# [README.md](./0001.%20è®¤è¯†%20canvas%20æ ‡ç­¾/README.md)<!-- !======> SEPERATOR <====== -->
# [0001. è®¤è¯† canvas æ ‡ç­¾](https://github.com/Tdahuyou/canvas/tree/main/0001.%20%E8%AE%A4%E8%AF%86%20canvas%20%E6%A0%87%E7%AD%BE)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ canvas æ¦‚è¿°](#2--canvas-æ¦‚è¿°)
- [3. ğŸ“’ canvas åŸºæœ¬ä½¿ç”¨](#3--canvas-åŸºæœ¬ä½¿ç”¨)
- [4. ğŸ“’ canvas åŸºæœ¬ç‰¹æ€§](#4--canvas-åŸºæœ¬ç‰¹æ€§)
- [5. ğŸ“’ canvas åº”ç”¨åœºæ™¯](#5--canvas-åº”ç”¨åœºæ™¯)
  - [5.1. æ¸¸æˆå¼€å‘](#51-æ¸¸æˆå¼€å‘)
  - [5.2. å›¾å½¢å¤„ç†](#52-å›¾å½¢å¤„ç†)
  - [5.3. æ•°æ®å¯è§†åŒ–](#53-æ•°æ®å¯è§†åŒ–)
  - [5.4. å®æ—¶è§†é¢‘å¤„ç†](#54-å®æ—¶è§†é¢‘å¤„ç†)
  - [5.5. è‡ªå®šä¹‰ç»˜å›¾](#55-è‡ªå®šä¹‰ç»˜å›¾)
  - [5.6. æ•™è‚²å’Œæ¨¡æ‹Ÿ](#56-æ•™è‚²å’Œæ¨¡æ‹Ÿ)
- [6. ğŸ“’ å¯¹æ¯” svg å’Œ canvas](#6--å¯¹æ¯”-svg-å’Œ-canvas)
  - [6.1. å¯¹æ¯”è¡¨æ ¼](#61-å¯¹æ¯”è¡¨æ ¼)
  - [6.2. å¯¹æ¯” svg å’Œ canvas](#62-å¯¹æ¯”-svg-å’Œ-canvas)
- [7. ğŸ¤– å¯¹æ¯” svg å’Œ canvas](#7--å¯¹æ¯”-svg-å’Œ-canvas)
  - [7.1. å›¾å½¢ç±»å‹](#71-å›¾å½¢ç±»å‹)
  - [7.2. DOM äº¤äº’](#72-dom-äº¤äº’)
  - [7.3. æ€§èƒ½](#73-æ€§èƒ½)
  - [7.4. å¯è®¿é—®æ€§å’ŒSEO](#74-å¯è®¿é—®æ€§å’Œseo)
  - [7.5. åº”ç”¨åœºæ™¯](#75-åº”ç”¨åœºæ™¯)
  - [7.6. æ€»ç»“](#76-æ€»ç»“)
- [8. ğŸ“’ åŒºåˆ† Image å’Œ Graphic](#8--åŒºåˆ†-image-å’Œ-graphic)
  - [8.1. å›¾åƒï¼ˆImageï¼‰](#81-å›¾åƒimage)
  - [8.2. å›¾å½¢ï¼ˆGraphicï¼‰](#82-å›¾å½¢graphic)
  - [8.3. SVG ä¸­çš„åº”ç”¨](#83-svg-ä¸­çš„åº”ç”¨)
  - [8.4. ç»“è®º](#84-ç»“è®º)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- æœ¬èŠ‚ä»‹ç»äº† canvas çš„ä¸€äº›åŸºæœ¬ç‰¹æ€§ã€‚é€šè¿‡ä¸€ä¸ªç®€å•çš„å°ç¤ºä¾‹ï¼Œç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ï¼Œæ¥åˆæ­¥äº†è§£ä¸€ä¸‹ canvas çš„åŸºæœ¬ä½¿ç”¨ã€‚
- ä»‹ç»äº† canvas æŠ€æœ¯çš„ä¸€äº›åº”ç”¨åœºæ™¯ã€‚ç®€å•äº†è§£ä¸€ä¸‹ canvas è¿™ç©æ„å„¿èƒ½ç”¨æ¥åšäº›ä»€ä¹ˆä¸œè¥¿ã€‚
- äº†è§£ Image å’Œ Graphic ä¹‹é—´çš„åŒºåˆ«
- äº†è§£ svg å’Œ canvas ä¹‹é—´çš„åŒºåˆ«

## 2. ğŸ“’ canvas æ¦‚è¿°

`<canvas>` æ˜¯ **HTML5** ä¸­å¼•å…¥çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå…è®¸ä½ åœ¨ç½‘é¡µä¸Šç»˜åˆ¶å›¾å½¢ï¼Œè¿™äº›å›¾å½¢å¯ä»¥æ˜¯ **2D** æˆ– **3D** ï¼ˆä½¿ç”¨ WebGLï¼‰ã€‚**`<canvas>` å…ƒç´ æœ¬èº«åªæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®é™…çš„ç»˜åˆ¶éœ€è¦ä½¿ç”¨ JavaScript æ¥å®Œæˆã€‚**

## 3. ğŸ“’ canvas åŸºæœ¬ä½¿ç”¨


```html
<!-- ./1.html -->
<body>
  <canvas id="myCanvas" width="200" height="100"></canvas>

  <script>
    // è·å–ä¸Šè¿°åˆ›å»ºå¥½çš„ canvas æ ‡ç­¾
    const canvas = document.getElementById('myCanvas')

    // è·å– canvas è¿™ç©æ„å„¿çš„ä¸Šä¸‹æ–‡
    // å¯ä»¥ç†è§£ä¸ºè·å–ç”»ç¬”ï¼Œéœ€è¦å…ˆæœ‰ç”»ç¬”æ‰èƒ½ç»˜å›¾ä¸æ˜¯ã€‚
    const ctx = canvas.getContext('2d')

    ctx.fillStyle = 'red'
    ctx.fillRect(10, 10, 50, 50)
  </script>
</body>
```

[1.html](./1.html) çš„æ¸²æŸ“ç»“æœå¦‚ä¸‹ï¼š

![](md-imgs/2024-09-18-06-27-53.png)

è¦åœ¨ç½‘é¡µä¸Šä½¿ç”¨ `<canvas>`ï¼Œä½ é¦–å…ˆéœ€è¦åœ¨ HTML ä¸­å®šä¹‰ä¸€ä¸ª `<canvas>` æ ‡ç­¾ï¼Œå¹¶ä¸ºå…¶æŒ‡å®šä¸€ä¸ª `id`ï¼š

**canvas æ ‡ç­¾**

```html
<canvas id="myCanvas" width="200" height="100"></canvas>
```

ç„¶ååœ¨ JavaScript ä¸­è·å–è¿™ä¸ª Canvas å…ƒç´ ï¼Œå¹¶é€šè¿‡å®ƒçš„ç»˜å›¾ä¸Šä¸‹æ–‡è¿›è¡Œç»˜åˆ¶ï¼š

**ä½¿ç”¨ js è·å– canvas æ ‡ç­¾**

```javascript
// è·å–ä¸Šè¿°åˆ›å»ºå¥½çš„ canvas æ ‡ç­¾
const canvas = document.getElementById('myCanvas')

// è·å– canvas è¿™ç©æ„å„¿çš„ä¸Šä¸‹æ–‡
// å¯ä»¥ç†è§£ä¸ºè·å–ç”»ç¬”ï¼Œéœ€è¦å…ˆæœ‰ç”»ç¬”æ‰èƒ½ç»˜å›¾ä¸æ˜¯ã€‚
const ctx = canvas.getContext('2d')
```

getContext('2d') æ–¹æ³•æ˜¯ç”¨æ¥è·å–æ¸²æŸ“ä¸Šä¸‹æ–‡å’Œå…¶ç»˜å›¾åŠŸèƒ½çš„ã€‚ä½ å¯ä»¥é€šè¿‡è¿™ä¸ªä¸Šä¸‹æ–‡æ¥ç»˜åˆ¶ç®€å•çš„å›¾å½¢ï¼Œæ¯”å¦‚çŸ©å½¢ã€åœ†å½¢ï¼Œæˆ–è€…æ›´å¤æ‚çš„è·¯å¾„ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨ Canvas ä¸Šç»˜åˆ¶ä¸€ä¸ªçº¢è‰²çŸ©å½¢ï¼š

```javascript
ctx.fillStyle = 'red'
ctx.fillRect(10, 10, 50, 50)
```

è¿™æ®µä»£ç è®¾ç½®äº†å¡«å……è‰²ä¸ºçº¢è‰²ï¼Œå¹¶ç»˜åˆ¶äº†ä¸€ä¸ªä½äºç”»å¸ƒä¸Š `(10,10)` ä½ç½®ï¼Œå®½ 50 åƒç´ ï¼Œé«˜ 50 åƒç´ çš„çŸ©å½¢ã€‚

![](md-imgs/2024-09-18-06-30-27.png)

ä»æœ€ç»ˆæ¸²æŸ“çš„ç»“æœæ¥çœ‹ï¼Œä½ ä¼šå‘ç°é¡µé¢ä¸Šç¡®å®ç»˜åˆ¶å‡ºäº†ä¸€ä¸ªçº¢è‰²çš„çŸ©å½¢ã€‚ä½†æ˜¯æ‰“å¼€å¼€å‘è€…è°ƒè¯•å·¥å…·åï¼Œä½ ä¼šå‘ç°å¹¶æ²¡æœ‰åƒ `<svg>` é‚£æ ·ï¼Œå‡ºç°ä¸€ä¸ª `<rect>` å…ƒç´ ã€‚è¿™ä¹Ÿæ˜¯ canvas å’Œ svg çš„ä¸€ä¸ªé‡å¤§å·®ä¸€ç‚¹ä¹‹ä¸€ï¼š

- svg æ˜¯åŸºäº xml çš„ï¼Œå®ƒç±»ä¼¼ä¸ htmlï¼Œæ˜¯æœ‰ DOM ç»“æ„çš„ã€‚
- canvas çš„ç»˜å›¾è¿™æ˜¯åŸºäº JavaScript æ¥æ§åˆ¶ï¼Œæˆ‘ä»¬å®šä¹‰çš„ canvas æ ‡ç­¾ï¼Œä»…ä»…æ˜¯æä¾›ä¸€ä¸ªç”»å¸ƒï¼Œç»˜åˆ¶çš„å†…å®¹æ˜¯ä¸å­˜åœ¨å¯¹åº”çš„ DOM èŠ‚ç‚¹çš„ã€‚

## 4. ğŸ“’ canvas åŸºæœ¬ç‰¹æ€§

- **åƒç´ åŸºç¡€**ï¼šCanvas æ˜¯åŸºäº **åƒç´ ** çš„ï¼Œä½ å¯ä»¥é€šè¿‡ JavaScript æ§åˆ¶æ¯ä¸€ä¸ªåƒç´ ã€‚
- **åŠ¨æ€å›¾å½¢**ï¼šCanvas éå¸¸é€‚åˆ **åŠ¨æ€** ç”Ÿæˆçš„å›¾å½¢ï¼Œå¦‚ **æ¸¸æˆ**ã€**å›¾å½¢å¤„ç†** å’Œå…¶ä»–éœ€è¦å¤§é‡ **åŠ¨æ€è§†è§‰æ•ˆæœ** çš„åº”ç”¨ã€‚
- **æ—  DOM ç»“æ„**ï¼šCanvas **å†…éƒ¨** çš„å›¾å½¢ **ä¸æ˜¯ DOM å…ƒç´ **ï¼Œå› æ­¤å®ƒä»¬ä¸æ˜¯ HTML çš„ä¸€éƒ¨åˆ†ï¼Œä¸èƒ½ç›´æ¥è¢« CSS æ ·å¼åŒ–æˆ–ç”¨ CSS æ§åˆ¶ã€‚
- **åŠ¨ç”»é—®é¢˜**ï¼šç”±äº Canvas æœ¬èº«ä¸æä¾›æ„å»ºåŠ¨ç”»çš„ç›´æ¥æ”¯æŒï¼ŒåŠ¨ç”»çš„åˆ›å»ºéœ€è¦é€šè¿‡ JavaScript å®šæ—¶è°ƒç”¨ç»˜å›¾å‘½ä»¤æ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œ**ä½¿ç”¨ `**requestAnimationFrame**` æ¥æŒç»­æ›´æ–° Canvas ä¸Šçš„å›¾å½¢ä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœ**ã€‚

`<canvas>` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œ**é€‚åˆéœ€è¦ç»˜åˆ¶å¤§é‡è®¡ç®—ç”Ÿæˆå›¾å½¢çš„åº”ç”¨ã€‚**

ç”±äºå…¶ä¾èµ– JavaScript è¿›è¡Œç»˜å›¾ï¼Œè¿™ä¸ºå¼€å‘è€…æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œä½†åŒæ—¶ä¹Ÿæ„å‘³ç€å®ƒå¯èƒ½ä¸å¦‚ SVG é‚£æ ·é€‚åˆ **æœç´¢å¼•æ“ä¼˜åŒ–** æˆ–ç®€å•çš„å›¾å½¢æ˜¾ç¤ºã€‚

## 5. ğŸ“’ canvas åº”ç”¨åœºæ™¯

`<canvas>` å…ƒç´ ä¸»è¦ç”¨æ¥è§£å†³éœ€è¦åŠ¨æ€ã€å¤æ‚æ¸²æŸ“ä»¥åŠé«˜åº¦å¯äº¤äº’çš„å›¾å½¢åœºæ™¯çš„é—®é¢˜ã€‚

`<canvas>` çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå¤„ç†å¤æ‚çš„å›¾å½¢æ“ä½œå’Œå®ç°é«˜çº§åŠ¨ç”»ä¸äº¤äº’ã€‚è¿™ä½¿å¾—å®ƒåœ¨éœ€è¦é«˜åº¦å›¾å½¢äº¤äº’å’ŒåŠ¨æ€å†…å®¹æ›´æ–°çš„åº”ç”¨ä¸­éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨æ¸¸æˆå¼€å‘ã€å›¾å½¢ç¼–è¾‘å’Œæ•°æ®å¯è§†åŒ–ç­‰é¢†åŸŸã€‚

### 5.1. æ¸¸æˆå¼€å‘

Canvas éå¸¸é€‚åˆç”¨äºå¼€å‘ 2D æ¸¸æˆã€‚å®ƒå¯ä»¥å¤„ç†å¤§é‡çš„å›¾å½¢å’ŒåŠ¨ç”»æ•ˆæœï¼Œè€Œä¸”ç”±äºåŸºäºåƒç´ ï¼Œå¼€å‘è€…å¯ä»¥ç²¾ç»†æ§åˆ¶å›¾åƒå’ŒåŠ¨ä½œï¼Œè¿›è¡Œå¤æ‚çš„è§†è§‰æ•ˆæœæ¸²æŸ“å’Œå¸§æ§åˆ¶ã€‚

[4399](https://www.4399.com/) ä¸­çš„å°æ¸¸æˆï¼Œå¤§å¤šä¹Ÿéƒ½æ˜¯é€šè¿‡ canvas æ¥åˆ¶ä½œçš„ã€‚

![](md-imgs/2024-09-18-06-32-20.png)

### 5.2. å›¾å½¢å¤„ç†

Canvas æä¾›äº†å¼ºå¤§çš„å›¾åƒå¤„ç†èƒ½åŠ›ï¼Œä¾‹å¦‚å›¾åƒç¼–è¾‘åŠŸèƒ½ï¼ˆå¦‚æ—‹è½¬ã€ç¼©æ”¾ã€è£å‰ªç­‰ï¼‰ã€é¢œè‰²æ•ˆæœå’Œå›¾åƒåˆæˆã€‚è¿™äº›åŠŸèƒ½ä½¿å…¶æˆä¸ºåœ¨çº¿å›¾å½¢ç¼–è¾‘å·¥å…·çš„å¥½é€‰æ‹©ã€‚

### 5.3. æ•°æ®å¯è§†åŒ–

è™½ç„¶ SVG åœ¨å¾ˆå¤šæ•°æ®å¯è§†åŒ–åœºæ™¯ä¸­ä¹Ÿå¾ˆæµè¡Œï¼Œä½†å¯¹äºéœ€è¦å¤§é‡åŠ¨æ€äº¤äº’å’Œå¤§æ•°æ®é‡æ¸²æŸ“çš„å¤æ‚æ•°æ®å¯è§†åŒ–ï¼ŒCanvas æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œå®æ—¶çš„æ•°æ®æ›´æ–°ã€åŠ¨æ€æ•ˆæœå’Œå›¾è¡¨ï¼Œä»¥åŠäº¤äº’å¼çš„å›¾å½¢æ“ä½œã€‚

æ¯”å¦‚ [echarts demos](https://echarts.apache.org/examples/zh/index.html#chart-type-line)

![](md-imgs/2024-09-18-06-32-40.png)

> è¿™é‡Œè¡¥å……ä¸€å˜´ï¼Œå®é™…ä¸Š echarts å›¾è¡¨ï¼Œæ”¯æŒä¸¤ç§æ¸²æŸ“æ¨¡å¼ svgã€canvasã€‚é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯ canvas æ¥æ¸²æŸ“ã€‚è¿™æ ·è¯´æ˜äº†ä¸€ç‚¹ï¼Œå¾ˆå¤šå›¾å½¢ svgã€canvas éƒ½å¯ä»¥ç»˜åˆ¶ï¼Œå¹¶ä¸æ˜¯è¯´æŸç§å›¾å½¢å°±ä¸€å®šå¾—ä½¿ç”¨æŸç§æŠ€æœ¯æ¥å®ç°ã€‚

### 5.4. å®æ—¶è§†é¢‘å¤„ç†

Canvas å¯ä»¥ç”¨æ¥å¤„ç†å’Œä¿®æ”¹è§†é¢‘å†…å®¹ï¼Œå¦‚è§†é¢‘ç‰¹æ•ˆã€å®æ—¶è§†é¢‘æ¸²æŸ“ç­‰ã€‚å¯ä»¥å°†è§†é¢‘å¸§æ•æ‰åˆ° Canvas ä¸Šï¼Œå¹¶ä½¿ç”¨å…¶ API æ¥å®ç°å›¾åƒæ•°æ®çš„å³æ—¶å¤„ç†ã€‚

### 5.5. è‡ªå®šä¹‰ç»˜å›¾

å¯¹äºéœ€è¦é«˜åº¦è‡ªå®šä¹‰çš„ç»˜å›¾åº”ç”¨ï¼Œå¦‚ç»˜ç”»ç¨‹åºæˆ–è®¾è®¡å·¥å…·ï¼ŒCanvas æä¾›äº†æ‰€éœ€çš„çµæ´»æ€§ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç®€å•çš„é¼ æ ‡äº¤äº’æ¥åˆ›å»ºå¤æ‚çš„è®¾è®¡å’Œå›¾å½¢ã€‚

### 5.6. æ•™è‚²å’Œæ¨¡æ‹Ÿ

åœ¨æ•™è‚²è½¯ä»¶ä¸­ï¼Œå°¤å…¶æ˜¯éœ€è¦åŠ¨æ€å±•ç¤ºå’Œäº¤äº’å¼å­¦ä¹ çš„åœºæ™¯ï¼Œå¦‚ç‰©ç†å®éªŒæ¨¡æ‹Ÿã€ç”Ÿç‰©ç»“æ„å±•ç¤ºç­‰ï¼ŒCanvas æä¾›äº†ä¸€ç§æœ‰æ•ˆçš„å®ç°æ–¹å¼ã€‚

## 6. ğŸ“’ å¯¹æ¯” svg å’Œ canvas

æ–‡ä¸­æä¾›äº†ä¸€å¼ è¡¨æ ¼ï¼Œè®°å½•äº†è¿™ä¿©ç©æ„å„¿ä¹‹é—´çš„ä¸€äº›å·®å¼‚ã€‚å¯ä»¥ç­‰å­¦å®Œäº† svgã€canvas çš„å†…å®¹ä¹‹åå†æ¥å›çœ‹è¿™ç¯‡æ–‡æ¡£ä¸­æåˆ°çš„å†…å®¹ã€‚

### 6.1. å¯¹æ¯”è¡¨æ ¼

| SVG | Canvas |
| --- | --- |
| 2003 æˆä¸º w3c æ ‡å‡† | html5 æ–°æ ‡ç­¾ |
| ç»˜åˆ¶çŸ¢é‡å›¾ | ç»˜åˆ¶ä½å›¾ |
| æ”¾ç¼©ä¸ä¼šå¯¼è‡´å¤±çœŸ | æ”¾ç¼©ä¼šå¯¼è‡´å¤±çœŸ |
| å¯¹ï¼ˆå›¾å½¢ï¼‰æ ‡ç­¾è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿ï¼Œçµæ´» | å¯¹åƒç´ ç‚¹è¿›è¡Œæ“ä½œï¼Œæ•ˆæœæ›´ç»†è…»ï¼Œä¸æ˜“æ“ä½œ |
| äº¤äº’æ€§å¼ºï¼Œå®¹æ˜“å®ç°åŠ¨ç”» | åŠ¨ç”»é€»è¾‘å®ç°å¤æ‚ |
| å­˜åœ¨ä¸€å®šçš„æ€§èƒ½é—®é¢˜ | æ€§èƒ½ç•¥é«˜ä¸€äº› |
| é€‚åˆç»˜åˆ¶åœ°å›¾ã€å›¾æ ‡â€¦â€¦ | é€‚åˆç»˜åˆ¶å›¾è¡¨ï¼Œåˆ¶ä½œæ¸¸æˆâ€¦â€¦ |
| ä¸æ˜“ç»˜åˆ¶ 3d å›¾å½¢ | æä¾›äº†ç»˜åˆ¶ 3d å›¾å½¢çš„ api |

### 6.2. å¯¹æ¯” svg å’Œ canvas

> åœ¨æåˆ°å‰ç«¯ç»˜å›¾æ—¶ï¼Œé¦–å…ˆä¼šæƒ³åˆ°çš„ä¸¤ä¸ªæŠ€æœ¯å°±æ˜¯ svgã€canvasã€‚ä½†æ˜¯å®ƒä»¬æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æŠ€æœ¯ï¼Œå­˜åœ¨ä¸å°‘åŒºåˆ«ã€‚

åˆå­¦é˜¶æ®µï¼Œæƒ³è¦å……åˆ†ç†è§£ svgã€canvas ä¹‹é—´çš„åŒºåˆ«å¹¶ä¸å®¹æ˜“ã€‚åªèƒ½è¯´å¯¹å®ƒä»¬ä¿©æœ‰ä¸ªåˆæ­¥çš„è®¤çŸ¥ï¼Œæ¯”å¦‚çŸ¥é“å®ƒä»¬éƒ½èƒ½ç”¨æ¥åšäº›ä»€ä¹ˆå†…å®¹ã€‚æƒ³è¦å……åˆ†ç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œæœ€å¥½æŠŠä¸¤ä¸ªæŠ€æœ¯éƒ½è¿‡ä¸€è¾¹ï¼Œä»å„ä¸ªè§’åº¦å»æ¯”è¾ƒä¸¤è€…ä¹‹é—´çš„å·®å¼‚ã€‚

åœ¨å†™æ³•ä¸Šä¸¤è€…å·®å¼‚æ˜¯æ¯”è¾ƒå¤§çš„ï¼š

- svg å†™çš„æ˜¯ xmlï¼Œå†™èµ·æ¥ç±»ä¼¼å†™ htmlï¼Œå› æ­¤æ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ª `<svg>` å…ƒç´ ï¼Œç„¶åè¿™ä¸ª `<svg>` é‡Œè¾¹åŒ…å«ç€ä¸€ä¸ªä¸ªå…¶å®ƒçš„ svg å­å…ƒç´ ã€‚
- canvas ä»…ä»…æ˜¯æä¾›ä¸€ä¸ªç”»å¸ƒï¼Œæ‰€æœ‰ç»˜å›¾çš„é€»è¾‘ï¼Œéƒ½äº¤ç»™ js å»æ§åˆ¶ï¼Œå› æ­¤åœ¨æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·ä¸­ï¼Œä½ åªèƒ½çœ‹åˆ°ä¸€ä¸ª `<canvas>` æ ‡ç­¾ã€‚

æƒ³è¦äº†è§£ svgã€canvas éƒ½èƒ½åšä»€ä¹ˆï¼Œä¸€ä¸ªä¸é”™çš„æ³•å­å°±æ˜¯ä¸Šç½‘æ‰¾æ¡ˆä¾‹ï¼Œçœ‹çœ‹ä½¿ç”¨ svgã€canvas æŠ€æœ¯å®ç°çš„æˆå“ã€‚æ¯”å¦‚ï¼Œå¿«é€Ÿäº†è§£ä¸€ä¸‹å®ƒä»¬èƒ½å¤Ÿå®ç°ä»€ä¹ˆæ•ˆæœã€‚

svg çš„ demos å¯ä»¥çœ‹çœ‹ [snapsvg demos](http://snapsvg.io/demos/)

![](md-imgs/2024-09-18-06-46-41.png)

canvas çš„ demos å¯ä»¥çœ‹çœ‹ [4399 å°æ¸¸æˆ](https://www.4399.com/)ã€‚

![](md-imgs/2024-09-18-06-46-53.png)

4399 ä¸­çš„å°æ¸¸æˆï¼Œå¤§å¤šä¹Ÿéƒ½æ˜¯é€šè¿‡ canvas æ¥åˆ¶ä½œçš„ã€‚

å†æ¯”å¦‚ [echarts demos](https://echarts.apache.org/examples/zh/index.html#chart-type-line)

![](md-imgs/2024-09-18-06-47-02.png)

> <font style="color:rgb(29, 29, 31);">è¿™é‡Œè¡¥å……ä¸€å˜´ï¼Œå®é™…ä¸Š echarts å›¾è¡¨ï¼Œæ”¯æŒä¸¤ç§æ¸²æŸ“æ¨¡å¼ svgã€canvasã€‚é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯ canvas æ¥æ¸²æŸ“ã€‚è¿™æ ·è¯´æ˜äº†ä¸€ç‚¹ï¼Œå¾ˆå¤šå›¾å½¢ svgã€canvas éƒ½å¯ä»¥ç»˜åˆ¶ï¼Œå¹¶ä¸æ˜¯è¯´æŸç§å›¾å½¢å°±ä¸€å®šå¾—ä½¿ç”¨æŸç§æŠ€æœ¯æ¥å®ç°ã€‚</font>
>

## 7. ğŸ¤– å¯¹æ¯” svg å’Œ canvas


SVGï¼ˆScalable Vector Graphicsï¼‰å’Œ Canvas æ˜¯ä¸¤ç§æµè¡Œçš„å›¾å½¢å¤„ç†æŠ€æœ¯ï¼Œå®ƒä»¬å„æœ‰ç‰¹ç‚¹ï¼Œå¹¶é€‚ç”¨äºä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¸»è¦å¯¹æ¯”ï¼š

### 7.1. å›¾å½¢ç±»å‹


- **SVG**ï¼šä½¿ç”¨çŸ¢é‡å›¾å½¢ï¼Œè¿™æ„å‘³ç€å›¾å½¢æ˜¯é€šè¿‡æ•°å­¦æ–¹ç¨‹å¼æ¥æè¿°çš„ï¼Œå¯ä»¥æ— é™ç¼©æ”¾è€Œä¸ä¼šå¤±çœŸã€‚
- **Canvas**ï¼šä½¿ç”¨åƒç´ å›¾å½¢ï¼ˆä½å›¾ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªçŸ©å½¢åƒç´ çš„ç½‘æ ¼ï¼Œæ”¾å¤§è¿‡å¤šæ—¶ä¼šå‡ºç°åƒç´ åŒ–ã€‚



### 7.2. DOM äº¤äº’


- **SVG**ï¼šSVG å›¾å½¢æ˜¯ä½œä¸ºDOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰çš„ä¸€éƒ¨åˆ†ç›´æ¥åµŒå…¥åˆ°HTMLä¸­ï¼Œå› æ­¤å¯ä»¥åƒHTMLå…ƒç´ ä¸€æ ·ç”¨CSSå’ŒJavaScriptè¿›è¡Œæ§åˆ¶å’Œæ“ä½œã€‚
- **Canvas**ï¼šCanvasé€šè¿‡JavaScriptåœ¨ä¸€ä¸ªç»˜å›¾è¡¨é¢ä¸ŠåŠ¨æ€æ¸²æŸ“å›¾åƒï¼Œå®ƒæœ¬èº«ä¸æ˜¯DOMçš„ä¸€éƒ¨åˆ†ï¼Œä¸èƒ½ç›´æ¥è¢«CSSæ§åˆ¶ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½éœ€è¦é€šè¿‡è„šæœ¬å¤„ç†ã€‚



### 7.3. æ€§èƒ½


- **SVG**ï¼šç”±äºSVGæ–‡ä»¶æ˜¯DOMçš„ä¸€éƒ¨åˆ†ï¼Œå½“SVGå…ƒç´ éå¸¸å¤šæˆ–éå¸¸å¤æ‚æ—¶ï¼Œå®ƒå¯èƒ½ä¼šé™ä½é¡µé¢çš„æ€§èƒ½ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½æ˜¯DOMèŠ‚ç‚¹ã€‚
- **Canvas**ï¼šé€šå¸¸åœ¨å¤„ç†å¤§é‡æˆ–å¤æ‚åŠ¨ç”»å’Œæ¸¸æˆå›¾å½¢æ—¶æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒç›´æ¥åœ¨ä½å›¾ä¸Šè¿›è¡Œæ¸²æŸ“ï¼Œä¸ä¾èµ–DOMç»“æ„ã€‚



### 7.4. å¯è®¿é—®æ€§å’ŒSEO


- **SVG**ï¼šç”±äºSVGå…ƒç´ æ˜¯DOMçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬å¯ä»¥è¢«æœç´¢å¼•æ“ç´¢å¼•ï¼Œä¹Ÿæ”¯æŒæ–‡æœ¬æ ‡ç­¾å’Œæè¿°ï¼Œå¢åŠ äº†å¯è®¿é—®æ€§ã€‚
- **Canvas**ï¼šCanvaså†…çš„å…ƒç´ ä¸å¯æœç´¢ï¼Œå¯¹æœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰å’Œå±å¹•é˜…è¯»å™¨çš„æ”¯æŒè¾ƒå·®ã€‚



### 7.5. åº”ç”¨åœºæ™¯


- **SVG**ï¼šéå¸¸é€‚åˆéœ€è¦é«˜åº¦å¯ç¼©æ”¾æ€§çš„åº”ç”¨ï¼Œå¦‚å›¾æ ‡ã€å›¾è¡¨å’Œå…¶ä»–å¤æ‚çš„äº¤äº’å¼ç•Œé¢å…ƒç´ ã€‚
- **Canvas**ï¼šæ›´é€‚åˆéœ€è¦å¤§é‡è®¡ç®—å’Œé‡æ–°ç»˜åˆ¶çš„åº”ç”¨ï¼Œå¦‚è§†é¢‘æ¸¸æˆã€å›¾åƒç¼–è¾‘å’Œå®æ—¶è§†é¢‘å¤„ç†ã€‚



### 7.6. æ€»ç»“


é€‰æ‹©SVGè¿˜æ˜¯Canvaså–å†³äºå…·ä½“çš„åº”ç”¨éœ€æ±‚ï¼š

- å¦‚æœä½ éœ€è¦é«˜è´¨é‡çš„å›¾å½¢ï¼Œå¦‚å›¾æ ‡å’ŒçŸ¢é‡å›¾ï¼Œä¸”å¸Œæœ›å®ƒä»¬å…·æœ‰è‰¯å¥½çš„ç¼©æ”¾æ€§å’Œå¯è®¿é—®æ€§ï¼Œé‚£ä¹ˆSVGå¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚
- å¦‚æœä½ çš„é¡¹ç›®æ¶‰åŠåˆ°å¤æ‚çš„åŠ¨ç”»ã€æ¸¸æˆæˆ–éœ€è¦å¤§é‡åŠ¨æ€å›¾å½¢å¤„ç†ï¼ŒCanvaså°†å¯èƒ½æä¾›æ›´å¥½çš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚

## 8. ğŸ“’ åŒºåˆ† Image å’Œ Graphic

Image å’Œ Graphic ç†è§£è¿™ä¿©è¯çš„åŒºåˆ«ï¼Œå¯¹äºç†è§£ svg å’Œ canvas çš„å·®å¼‚æœ‰æ‰€å¸®åŠ©ã€‚

ä»â€œä¸­æ–‡â€è¡¨è¿°çš„è§’åº¦æ¥çœ‹ï¼Œåœ¨ svgã€canvas çš„ç›¸å…³æ–‡ç« ä¸­ï¼Œå¯¹äºâ€œå›¾å½¢â€ã€â€œå›¾åƒâ€è¿™ä¿©è¯ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯æ··ç€ç”¨çš„ã€‚

ä¹‹æ‰€ä»¥ä¼šè®°å½• Image å’Œ Graphic ä¹‹é—´çš„åŒºåˆ«ï¼Œä¸»è¦æ˜¯å› ä¸º SVG çš„å…¨ç§°ï¼ˆScalable Vector Graphicsï¼‰ä¸­å‡ºç°äº† `Graphics` è¿™ä¸ªè¯ï¼ŒåŒæ—¶åœ¨ canvas ä¸­ï¼Œå¯¹åº”çš„è¯æ˜¯ `Image`ï¼Œæ‰€ä»¥åœ¨æ­¤ç®€å•è®°å½•ä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯ `Image`ã€`Graphic`ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åˆæ˜¯ä»€ä¹ˆã€‚

åœ¨å­¦ä¹  SVG ä»¥åŠæ›´å¹¿æ³›åœ°è®¨è®ºè®¡ç®—æœºå›¾å½¢å­¦æ—¶ï¼Œç†è§£â€œå›¾åƒâ€å’Œâ€œå›¾å½¢â€è¿™ä¸¤ä¸ªè¯çš„åŒºåˆ«ç¡®å®æœ‰å…¶ä»·å€¼ã€‚è¿™ä¸¤ä¸ªæ¦‚å¿µè™½ç„¶åœ¨æ—¥å¸¸è¯­è¨€ä¸­ç»å¸¸äº¤æ›¿ä½¿ç”¨ï¼Œä½†åœ¨æŠ€æœ¯ä¸Šæœ‰ç€æ˜ç¡®çš„åŒºåˆ«ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å›¾å½¢æ•°æ®å’Œæ¸²æŸ“æŠ€æœ¯æ—¶ã€‚

### 8.1. å›¾åƒï¼ˆImageï¼‰

å›¾åƒé€šå¸¸æŒ‡çš„æ˜¯ **åƒç´ æ•°æ®çš„é›†åˆ**ï¼Œè¿™äº›æ•°æ®ä»¥æ …æ ¼æˆ–ç‚¹é˜µçš„å½¢å¼å­˜å‚¨ã€‚æ¯ä¸ªåƒç´ éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä¸ä¹‹å…³è”çš„é¢œè‰²å€¼ï¼Œæ•´ä½“ä¸Šå½¢æˆäº†ä¸€å¹…å®Œæ•´çš„å›¾åƒã€‚è¿™ç§å›¾åƒçš„å…¸å‹ä¾‹å­åŒ…æ‹¬ç…§ç‰‡å’Œæ‰«æçš„æ–‡æ¡£ã€‚å›¾åƒçš„å…³é”®ç‰¹ç‚¹æ˜¯å®ƒä»¬çš„ç»†èŠ‚å’Œå¤–è§‚æ˜¯å›ºå®šçš„ï¼Œæ”¾å¤§å›¾åƒä¼šå¯¼è‡´åˆ†è¾¨ç‡ä¸‹é™ï¼Œå‡ºç°åƒç´ åŒ–ã€‚

### 8.2. å›¾å½¢ï¼ˆGraphicï¼‰

å›¾å½¢æ›´å¤šæŒ‡çš„æ˜¯ **é€šè¿‡æ•°å­¦è¡¨è¾¾å¼å®šä¹‰çš„å›¾å½¢**ï¼Œä¾‹å¦‚ SVG ä¸­çš„å½¢çŠ¶ï¼ˆåœ†å½¢ã€çŸ©å½¢ã€è·¯å¾„ç­‰ï¼‰ã€‚è¿™äº›å›¾å½¢æ˜¯çŸ¢é‡çš„ï¼Œæ„å‘³ç€å®ƒä»¬ä¸ä¾èµ–äºåƒç´ ï¼Œè€Œæ˜¯ä¾èµ–äºè·¯å¾„å’Œå½¢çŠ¶çš„æè¿°ã€‚çŸ¢é‡å›¾å½¢å¯ä»¥æ— é™æ”¾å¤§æˆ–ç¼©å°ï¼Œè€Œä¸ä¼šå¤±å»è´¨é‡ï¼Œå› ä¸ºå®ƒä»¬åœ¨æ˜¾ç¤ºæˆ–æ‰“å°å‰éƒ½æ˜¯ç”±è®¾å¤‡æ ¹æ®çŸ¢é‡è·¯å¾„å®æ—¶æ¸²æŸ“çš„ã€‚

### 8.3. SVG ä¸­çš„åº”ç”¨

SVGï¼ˆ**Scalable Vector Graphics**ï¼‰æ˜¯ä¸€ç§ä½¿ç”¨ XML æ ¼å¼å®šä¹‰å›¾å½¢çš„æŠ€æœ¯ã€‚å®ƒæ˜¯ä¸€ç§çŸ¢é‡å›¾å½¢æ ¼å¼ï¼Œè¿™æ„å‘³ç€å®ƒæè¿°çš„æ˜¯å›¾å½¢è€Œéå›¾åƒã€‚åœ¨ SVG ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰å½¢çŠ¶ã€è·¯å¾„ã€æ–‡æœ¬ç­‰å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥å¯¹å®ƒä»¬åº”ç”¨å˜æ¢ã€æ ·å¼å’ŒåŠ¨ç”»ï¼Œè¿™äº›éƒ½æ˜¯åœ¨å›¾å½¢å±‚é¢è¿›è¡Œçš„æ“ä½œã€‚

### 8.4. ç»“è®º

åœ¨å­¦ä¹  SVG æˆ–ä»»ä½•å›¾å½¢å¤„ç†ç›¸å…³çš„æŠ€æœ¯æ—¶ï¼Œæ˜ç¡®å›¾åƒå’Œå›¾å½¢çš„æ¦‚å¿µéå¸¸é‡è¦ã€‚è¿™æœ‰åŠ©äºä½ æ›´å¥½åœ°ç†è§£ä½•æ—¶ä½¿ç”¨ SVG è¿™æ ·çš„çŸ¢é‡æŠ€æœ¯ï¼Œä»¥åŠä½•æ—¶å¯èƒ½éœ€è¦ä½¿ç”¨åƒ JPEG æˆ– PNG è¿™æ ·çš„æ …æ ¼å›¾åƒæ ¼å¼ã€‚ç†è§£è¿™äº›æ¦‚å¿µå¯ä»¥å¸®åŠ©ä½ é€‰æ‹©æœ€é€‚åˆä½ çš„é¡¹ç›®éœ€æ±‚çš„å·¥å…·å’ŒæŠ€æœ¯ã€‚


# [README.md](./0002.%20åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ%20canvas/README.md)<!-- !======> SEPERATOR <====== -->
# [0002. åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ canvas](https://github.com/Tdahuyou/canvas/tree/main/0002.%20%E5%88%A4%E6%96%AD%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81%20canvas)


<!-- region:toc -->
- [1. â° TODO å¾…æ•´ç†](#1--todo-å¾…æ•´ç†)
<!-- endregion:toc -->

## 1. â° TODO å¾…æ•´ç†

- æŒæ¡åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ canvas çš„ä¸¤ç§æ–¹å¼ã€‚
[1.html](./1.html) ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!--
      ç»å¤§å¤šæ•°çš„æµè§ˆå™¨éƒ½æ”¯æŒ canvas
      å°‘æ•°è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸æ”¯æŒï¼ˆæ¯”å¦‚ç‰ˆæœ¬ä½äº 9 çš„ IE æµè§ˆå™¨ï¼‰
      å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸¤ç§æ–¹å¼æ¥åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ canvasï¼š
      1. æµè§ˆå™¨å¦‚æœä¸è®¤è¯† canvasï¼Œä¼šæ˜¾ç¤º canvas æ ‡ç­¾ä¸­çš„å†…å®¹ã€‚
      2. é€šè¿‡æ£€æŸ¥ canvas å…ƒç´ çš„ getContext æ–¹æ³•æ˜¯å¦å­˜åœ¨æ¥æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ canvasã€‚
     -->
    <canvas>
      æ‚¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œä¸æ”¯æŒcanvasï¼Œè¯·å‡çº§æµè§ˆå™¨æˆ–æ›´æ¢æµè§ˆå™¨
    </canvas>
    <script>
      // é€šè¿‡ JS æ¥æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒ canvas
      // é€šè¿‡æ£€æŸ¥ canvas å…ƒç´ çš„ getContext æ–¹æ³•æ˜¯å¦å­˜åœ¨æ¥æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ canvasã€‚
      function checkCanvasSupport() {
        var canvas = document.createElement('canvas') // åˆ›å»ºä¸€ä¸ªcanvaså…ƒç´ 
        return !!canvas.getContext // æ£€æŸ¥getContextæ–¹æ³•æ˜¯å¦å­˜åœ¨
      }
      if (checkCanvasSupport()) {
        console.log('æµè§ˆå™¨æ”¯æŒcanvas')
      } else {
        console.log('æµè§ˆå™¨ä¸æ”¯æŒcanvas')
      }
    </script>
  </body>
</html>
```
![](md-imgs/2024-09-19-09-26-51.png)
å› ä¸ºæµè§ˆå™¨æ”¯æŒ canvasï¼Œæ‰€ä»¥æ‰“å¼€è¿™ä¸ª 1.html ä¹‹åï¼Œå°†çœ‹åˆ°ä¸€ä¸ªç©ºç™½çš„ç•Œé¢ï¼Œå¹¶åœ¨ devtools ä¸­çš„ console æ¨¡å—ä¸­è¾“å‡ºäº† `æµè§ˆå™¨æ”¯æŒcanvas`ã€‚


# [README.md](./0003.%20åŒºåˆ†%20canvas%20çš„%20widthã€height%20å±æ€§å’Œ%20style%20ä¸­è®¾ç½®çš„%20widthã€height%20å€¼/README.md)<!-- !======> SEPERATOR <====== -->
# [0003. åŒºåˆ† canvas çš„ widthã€height å±æ€§å’Œ style ä¸­è®¾ç½®çš„ widthã€height å€¼](https://github.com/Tdahuyou/canvas/tree/main/0003.%20%E5%8C%BA%E5%88%86%20canvas%20%E7%9A%84%20width%E3%80%81height%20%E5%B1%9E%E6%80%A7%E5%92%8C%20style%20%E4%B8%AD%E8%AE%BE%E7%BD%AE%E7%9A%84%20width%E3%80%81height%20%E5%80%BC)

<!-- region:toc -->
- [1. â° TODO å¾…æ•´ç†](#1--todo-å¾…æ•´ç†)
<!-- endregion:toc -->

## 1. â° TODO å¾…æ•´ç†

åœ¨è®¾ç½®ç”»å¸ƒå°ºå¯¸çš„æ—¶å€™ï¼Œç›´æ¥è®¾ç½® canvas çš„ widthã€height å±æ€§å€¼ï¼Œä¸è¦é€šè¿‡ css æ¥è®¾ç½® widthã€heightã€‚
- ã€æ¨èã€‘ç›´æ¥è®¾ç½® canvas çš„ wdith å’Œ heightï¼š`<canvas width="400" height="400"></canvas>`
- ã€ä¸æ¨èã€‘é€šè¿‡ css æ¥è®¾ç½® width å’Œ heightï¼š`canvas { width: 400, height: 400 }`
**style è®¾ç½®çš„æ˜¯å®¹å™¨çš„å°ºå¯¸ã€canvas çš„ widthã€height è®¾ç½®çš„æ˜¯ç”»å¸ƒåæ ‡ç³»çš„å°ºå¯¸ã€‚å¦‚æœä¸¤è€…çš„å°ºå¯¸ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆåæ ‡ç³»çš„æœ€å°å•ä½å°†ä¼šè‡ªåŠ¨ç¼©å°/æ”¾å¤§ï¼Œä»¥é€‚åº”å®¹å™¨å°ºå¯¸ã€‚**
- å¦‚æœå®¹å™¨æ˜¯ 400x400 åæ ‡ç³»æ˜¯ 200x200ï¼Œé‚£ä¹ˆåæ ‡ç³»ä¸­çš„ä¸€ä¸ªå•ä½æ„å‘³ç€ 2pxã€‚ï¼ˆæ”¾å¤§ï¼‰
- å¦‚æœå®¹å™¨æ˜¯ 400x400 åæ ‡ç³»ä¹Ÿæ˜¯ 400x400ï¼Œé‚£ä¹ˆåæ ‡ç³»ä¸­çš„ä¸€ä¸ªå•ä½æ„å‘³ç€ 1pxã€‚ï¼ˆæ­£å¸¸ï¼‰
**åœ¨è®¾ç½®ç”»å¸ƒå°ºå¯¸çš„æ—¶å€™ï¼Œä¸ºäº†æ–¹å¼åæ ‡è¢«æ‹‰ä¼¸ï¼Œé€šå¸¸éƒ½æ˜¯ç›´æ¥è®¾ç½® canvas çš„ widthã€height è€Œä¸æ˜¯é€šè¿‡ style æ¥è®¾ç½®ã€‚**
[1.html](./1.html) æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        outline: 1px solid #ddd;
      }
      #c1 {
        width: 400px;
        height: 400px;
      }
      .box {
        width: 50px;
        height: 50px;
        background-color: black;
      }
    </style>
  </head>
  <body>
    <h1>50*50 ç›’å­çš„å¤§å°ï¼ˆä½œä¸ºå‚ç…§ï¼‰</h1>
    <div class="box"></div>
    <!--
    1. canvas å¯ä»¥ä½¿ç”¨ style æ ·å¼è®¾ç½®å®½é«˜
    2. canvas ä¹Ÿå¯ä»¥ä½¿ç”¨ width å’Œ height å±æ€§è®¾ç½®å®½é«˜
    åŒºåˆ«ï¼š
    1. style çš„ widthã€height è®¾ç½®çš„æ˜¯ç”»å¸ƒå®¹å™¨å°ºå¯¸
    2. canvas çš„ widthã€height è®¾ç½®çš„æ˜¯ç”»å¸ƒåæ ‡ç³»
   -->
    <!--
    c1 å®¹å™¨çš„å°ºå¯¸æ˜¯ 400 * 400
    c1 ç”»å¸ƒçš„åæ ‡ç³»æ˜¯ 200 * 200
    ç›¸å½“äº 1 ä¸ªå•ä½æ˜¯ 2px
    æ„å‘³ç€å›¾åƒçš„å¤§å°è¢«æ”¾å¤§åˆ°åŸæ¥çš„ä¸¤å€
    -->
    <h1>c1 åæ ‡ç³»ä¸­çš„ä¸€ä¸ªå•ä½æŒ‰æ¯”ä¾‹æ”¾å¤§ä¸¤å€</h1>
    <canvas id="c1" width="200" height="200"></canvas>
    <!--
    c2 å®¹å™¨çš„å°ºå¯¸æ˜¯ 400 * 400
    c2 ç”»å¸ƒçš„åæ ‡ç³»æ˜¯ 400 * 400
    ç›¸å½“äº 1 ä¸ªå•ä½æ˜¯ 1px
     -->
    <h1>c2 åæ ‡ç³»æ¯”ä¾‹ä¿æŒä¸å˜</h1>
    <!--
    å¦‚æœæ²¡æœ‰è®¾ç½® style çš„ width å’Œ height
    é‚£ä¹ˆå®¹å™¨çš„å°ºå¯¸å°±æ˜¯ canvas çš„ widthã€height å±æ€§å€¼
    ä¹Ÿå°±æ˜¯è¯´ #c2 çš„å®¹å™¨å°ºå¯¸å°±æ˜¯ 400 x 400
     -->
    <canvas id="c2" width="400" height="400"></canvas>
  </body>
  <script>
    {
      /** @type {HTMLCanvasElement} */
      const canvas = document.querySelector('#c1')
      const ctx = canvas.getContext('2d')
      ctx.fillRect(0, 0, 50, 50)
      // è¡¨ç¤ºåœ¨ (0, 0) ä½ç½®ç»˜åˆ¶ä¸€ä¸ªå®½é«˜ä¸º 50 çš„çŸ©å½¢
    }
    {
      /** @type {HTMLCanvasElement} */
      const canvas = document.querySelector('#c2')
      const ctx = canvas.getContext('2d')
      ctx.fillRect(0, 0, 50, 50)
    }
  </script>
</html>
```
![](md-imgs/2024-09-19-09-40-34.png)


# [README.md](./0004.%20ä½¿ç”¨%20ctx.clearRect%20æ¸…é™¤ç”»å¸ƒ/README.md)<!-- !======> SEPERATOR <====== -->
# [0004. ä½¿ç”¨ ctx.clearRect æ¸…é™¤ç”»å¸ƒ](https://github.com/Tdahuyou/canvas/tree/main/0004.%20%E4%BD%BF%E7%94%A8%20ctx.clearRect%20%E6%B8%85%E9%99%A4%E7%94%BB%E5%B8%83)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo1](#2--demo1)
- [3. ğŸ’» demo2](#3--demo2)
- [4. ğŸ’» demo3](#4--demo3)
- [5. ğŸ’» demo4](#5--demo4)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

éœ€è¦ç†è§£ ctx.clearRect æ¸…é™¤ç”»å¸ƒçš„æœ¬è´¨æ˜¯è®©æŒ‡å®šåŒºåŸŸ **é€æ˜**ï¼Œè€ŒéçœŸçš„å°†è·¯å¾„ç»™æ“¦æ‰äº†ã€‚

---

**ç†è§£æ“¦é™¤çš„æœ¬è´¨**

`ctx.clearRect(x, y, width, height)` ç”¨äºåœ¨ canvas ä¸Šæ¸…é™¤æŒ‡å®šçš„çŸ©å½¢åŒºåŸŸï¼Œä½¿è¯¥åŒºåŸŸå®Œå…¨é€æ˜ã€‚

---

**äº†è§£åº”ç”¨åœºæ™¯**

è¿™ä¸ªæ–¹æ³•å¯¹äºåŠ¨ç”»å’Œæ¸¸æˆå¼€å‘ä¸­çš„å›¾å½¢æ›´æ–°ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸å¼€å‘è€…æ¸…é™¤æ—§çš„å›¾åƒå¸§ï¼Œä»è€Œåœ¨åŒä¸€ä½ç½®ç»˜åˆ¶æ–°çš„å¸§ã€‚

- **åŠ¨ç”»**ï¼šåœ¨æ¯ä¸ªåŠ¨ç”»å¸§å¼€å§‹æ—¶æ¸…é™¤æ—§çš„ç”»é¢å†…å®¹ã€‚
- **æ¸¸æˆå¼€å‘**ï¼šæ¸…é™¤ç§»åŠ¨å¯¹è±¡ç•™ä¸‹çš„è½¨è¿¹ï¼Œæ¯”å¦‚è§’è‰²ã€å¼¹è¯æˆ–å…¶ä»–å…ƒç´ ã€‚
- **ç”¨æˆ·ç•Œé¢**ï¼šåœ¨ç”¨æˆ·ç•Œé¢å…ƒç´ å˜åŠ¨æ—¶ï¼Œæ¸…é™¤æ—§å…ƒç´ çš„åŒºåŸŸä»¥æ›´æ–°ç•Œé¢ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ctx.clearRect æ–¹æ³•</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // ä½¿ç”¨ ctx.clearRect(x, y, width, height) æ–¹æ³•
      // æ¸…é™¤ç”»å¸ƒä¸­çš„æŒ‡å®šçŸ©å½¢åŒºåŸŸ

      // ã€1ã€‘ç»˜åˆ¶ä¸€æ¡æ¨ªçº¿
      ctx.beginPath()
      ctx.moveTo(0, 100)
      ctx.lineTo(400, 100)
      ctx.stroke()

      // ã€2ã€‘ç»˜åˆ¶ä¸€æ¡ç«–çº¿
      ctx.beginPath()
      ctx.moveTo(100, 0)
      ctx.lineTo(100, 400)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-22-50-14.png)

## 3. ğŸ’» demo2

```html
<!-- 2.html -->
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ctx.clearRect æ–¹æ³•</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // ã€1ã€‘ç»˜åˆ¶ä¸€æ¡æ¨ªçº¿
      ctx.beginPath()
      ctx.moveTo(0, 100)
      ctx.lineTo(400, 100)
      ctx.stroke()

      ctx.clearRect(0, 0, 100, 400) // ã€1ã€‘ çš„ä¸€éƒ¨åˆ†ä¼šè¢«æ“¦æ‰ã€‚

      // ã€2ã€‘ç»˜åˆ¶ä¸€æ¡ç«–çº¿
      ctx.beginPath()
      ctx.moveTo(100, 0)
      ctx.lineTo(100, 400)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-22-51-05.png)

## 4. ğŸ’» demo3

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ctx.clearRect æ–¹æ³•</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // ã€1ã€‘ç»˜åˆ¶ä¸€æ¡æ¨ªçº¿
      ctx.beginPath()
      ctx.moveTo(0, 100)
      ctx.lineTo(400, 100)
      ctx.stroke()

      ctx.clearRect(0, 0, cavnas.width, cavnas.height) // æ“¦é™¤æ•´ä¸ªç”»å¸ƒ

      // ã€2ã€‘ç»˜åˆ¶ä¸€æ¡ç«–çº¿
      ctx.beginPath()
      ctx.moveTo(100, 0)
      ctx.lineTo(100, 400)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-22-51-24.png)

## 5. ğŸ’» demo4

```html
<!-- 4.html -->
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ctx.clearRect æ–¹æ³•</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // æ¸…é™¤ç”»å¸ƒçš„æœ¬è´¨å°±æ˜¯å°†æŒ‡å®šçš„çŸ©å½¢åŒºåŸŸçš„é€æ˜åº¦è®¾ç½®ä¸º 0
      // ä¹‹å‰çš„è·¯å¾„ä¾ç„¶æ˜¯å­˜åœ¨çš„

      // å¦‚æœåœ¨å¼€å§‹ç»˜åˆ¶æ–°çš„è·¯å¾„æ—¶ä¸å¸Œæœ›ä¹‹å‰çš„è·¯å¾„å‡ºç°
      // åˆ«å¿˜äº†è°ƒç”¨ beginPath() æ–¹æ³•

      // ã€1ã€‘ç»˜åˆ¶ä¸€æ¡æ¨ªçº¿
      ctx.beginPath() // å‡å¦‚å°†è¿™ä¸ª beginPath å’Œä¸‹é¢çš„éƒ½æ³¨é‡Šæ‰çš„è¯ï¼Œé‚£ä¹ˆæœ€åè°ƒç”¨ stroke() æ—¶ï¼Œä¼šå°†ä¹‹å‰çš„ç½‘æ ¼è·¯å¾„ä¹Ÿä¸€èµ·ç»˜åˆ¶å‡ºæ¥ã€‚ï¼ˆä¸è¿‡ lineWidth å’Œ strokeStyle ä¸å†æ˜¯ drawGrid æ–¹æ³•ä¸­å°è£…çš„å€¼äº†ã€‚ï¼‰
      ctx.moveTo(0, 100)
      ctx.lineTo(400, 100)
      ctx.stroke()

      ctx.clearRect(0, 0, cavnas.width, cavnas.height) // æ“¦é™¤æ•´ä¸ªç”»å¸ƒ

      // ã€2ã€‘ç»˜åˆ¶ä¸€æ¡ç«–çº¿
      // ctx.beginPath() // å¦‚æœæ²¡æœ‰ beginPath()ï¼Œç»˜åˆ¶ã€2ã€‘ç«–çº¿çš„æ—¶å€™ï¼Œä¹‹å‰çš„ã€1ã€‘æ¨ªçº¿ä¹Ÿä¼šå‡ºç°ã€‚
      ctx.moveTo(100, 0)
      ctx.lineTo(100, 400)
      ctx.stroke() // ç»˜åˆ¶è·¯å¾„ï¼Œæ­¤æ—¶ä¼šåŒæ—¶ç»˜åˆ¶å‡ºã€1ã€‘ã€ã€2ã€‘
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-22-51-38.png)

# [README.md](./0005.%20canvas%20çš„é»˜è®¤å°ºå¯¸%20300%20x%20150/README.md)<!-- !======> SEPERATOR <====== -->
# [0005. canvas çš„é»˜è®¤å°ºå¯¸ 300 x 150](https://github.com/Tdahuyou/canvas/tree/main/0005.%20canvas%20%E7%9A%84%E9%BB%98%E8%AE%A4%E5%B0%BA%E5%AF%B8%20300%20x%20150)

<!-- region:toc -->
- [1. ğŸ“ summary](#1--summary)
- [2. ğŸ“’ notes](#2--notes)
- [3. ğŸ’» demo](#3--demo)
<!-- endregion:toc -->

## 1. ğŸ“ summary

- çŸ¥é“ `<canvas>` é»˜è®¤æ˜¯ 300x150 çš„è¡Œç›’ã€‚

## 2. ğŸ“’ notes

å¦‚æœä½ ä»…ä»…åˆ›å»ºäº†ä¸€ä¸ª canvasï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æŒ‡å®šå®ƒçš„ widthã€heightï¼Œé‚£ä¹ˆè¿™ä¸ª canvas çš„é»˜è®¤å°ºå¯¸æ˜¯ 300x150ã€‚

## 3. ğŸ’» demo

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    canvas {
      outline: 1px solid #ddd;
    }
  </style>
</head>
<body>
  <!--
    1. canvas æ˜¯ä¸€ä¸ªè¡Œå†…å…ƒç´ 
    2. canvas é»˜è®¤å¤§å°æ˜¯ 300 * 150

    æ‰“å¼€æµè§ˆå™¨æŸ¥çœ‹æœ€ç»ˆæ¸²æŸ“æ•ˆæœä¼šå‘ç°ä¿©ç›’å­åŒè¡Œæ˜¾ç¤ºã€‚
    æ‰“å¼€ devtoolsï¼ŒæŸ¥çœ‹ç›’æ¨¡å‹ï¼Œä¼šå‘ç°ç›’å­å°ºå¯¸æ˜¯ 300 * 150ã€‚
   -->
  <canvas></canvas>
  <canvas></canvas>
</body>
</html>
```

**æœ€ç»ˆçš„æ¸²æŸ“ç»“æœ**

![](md-imgs/2024-10-03-22-58-50.png)

ä»æœ€ç»ˆçš„æ¸²æŸ“ç»“æœï¼ˆå¹¶è¡Œæ˜¾ç¤ºï¼‰æ¥çœ‹ï¼Œä¼šå‘ç°å…¶å® canvas å¹¶éå—ç›’ã€‚

**è®¡ç®—å±æ€§åŠç›’æ¨¡å‹**

![](md-imgs/2024-10-03-22-59-01.png)

# [README.md](./0006.%20ä½¿ç”¨%20JSDoc%20æ¥æ ‡æ³¨%20canvas%20å˜é‡ç±»å‹/README.md)<!-- !======> SEPERATOR <====== -->
# [0006. ä½¿ç”¨ JSDoc æ¥æ ‡æ³¨ canvas å˜é‡ç±»å‹](https://github.com/Tdahuyou/canvas/tree/main/0006.%20%E4%BD%BF%E7%94%A8%20JSDoc%20%E6%9D%A5%E6%A0%87%E6%B3%A8%20canvas%20%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1 - æŸ¥è¯¢å·²æœ‰çš„ canvas](#2--demo1---æŸ¥è¯¢å·²æœ‰çš„-canvas)
- [3. ğŸ’» demo2 - åˆ›å»ºæ–°çš„ canvas](#3--demo2---åˆ›å»ºæ–°çš„-canvas)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

æœ¬èŠ‚ä»‹ç»çš„å†…å®¹æ˜¯ â€”â€” å¦‚ä½•åœ¨ IDE ä¸­è·å–æ›´å‹å¥½åœ° canvas ç›¸å…³çš„ API æ™ºèƒ½æç¤ºé—®é¢˜ã€‚
- ã€ç¤ºä¾‹ 2ã€‘å¦‚æœæƒ³è¦è·å–åˆ° IDE çš„æ™ºèƒ½æç¤ºï¼Œæœ‰äº›æ•™ç¨‹ä¸­çš„åšæ³•æ˜¯æ¨èä½ ä½¿ç”¨ createElement çš„æ–¹å¼æ¥åˆ›å»º canvasï¼Œè¿™ä¹ˆåšçš„ç›®çš„æ˜¯ä¸ºäº†è·å–åˆ°æ›´æœ‰å¥½çš„æ™ºèƒ½æç¤ºã€‚
- ã€ç¤ºä¾‹ 1ã€‘è€Œå¦‚æœä½ é¡µé¢ä¸Šå¦‚æœå·²ç»æœ‰äº† canvas æ ‡ç­¾ï¼Œç„¶åä½ é€šè¿‡æŸ¥è¯¢çš„æ–¹å¼æ‰¾åˆ°è¿™ä¸ªæ ‡ç­¾ï¼Œæ­¤æ—¶é»˜è®¤æ˜¯æ²¡æœ‰æ™ºèƒ½æç¤ºçš„ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ JSDoc æ ‡æ³¨çš„æ–¹å¼æ¥è§£å†³ã€‚

## 2. ğŸ’» demo1 - æŸ¥è¯¢å·²æœ‰çš„ canvas

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <canvas id="c"></canvas>

    <script>
      // ä½¿ç”¨ JSDoc æ³¨é‡Šæ¥æ ‡æ³¨ canvas å˜é‡ç±»å‹ã€‚
      /** @type {HTMLCanvasElement} */
      const c = document.getElementById('c')

      // c.getContext
      // è¾“å…¥ c.getcon æ—¶ï¼Œä¼šè‡ªåŠ¨æç¤º c.getContext

      // å‡å¦‚æ²¡æœ‰ /** @type {HTMLCanvasElement} */ è¿™ä¸€éƒ¨åˆ†çš„ç±»å‹å£°æ˜ä¿¡æ¯çš„è¯
      // é‚£ä¹ˆ vscode å°†æ— æ³•è¯†åˆ«å˜é‡ c çš„ç±»å‹ï¼Œä¹Ÿå°±æ— æ³•æ™ºèƒ½æç¤º c.getContext
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-00-31.png)

## 3. ğŸ’» demo2 - åˆ›å»ºæ–°çš„ canvas

```html
<!-- 2.thml -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // å¦‚æœæ˜¯é€šè¿‡ createElement çš„æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ª canvas çš„è¯ï¼Œé‚£ä¹ˆ IDE æ˜¯èƒ½å¤Ÿç»™æˆ‘ä»¬æç¤ºçš„ã€‚
      // å› ä¸º IDE èƒ½å¤Ÿè¯†åˆ«å‡º canvas å˜é‡çš„ç±»å‹æ˜¯ HTMLCanvasElement
      const canvas = document.createElement('canvas')
      const ctx = canvas.getContext('2d')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-01-15.png)

æ­¤æ—¶ IDE èƒ½å¤Ÿæ¨æ–­å‡º canvas å˜é‡çš„ç±»å‹ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿéå¸¸æ™ºèƒ½åœ°ç»™äºˆå’±ä»¬æç¤ºã€‚

æ¯”å¦‚ï¼Œä½ è¾“å…¥ `canvas.getcon` å°±ä¼šæç¤ºå‡ºå¯¹åº”çš„ APIï¼Œæ­¤æ—¶ç›´æ¥æŒ‰ä¸‹ tap æˆ–è€…å›è½¦é”®ï¼Œå³å¯å¿«é€Ÿç”Ÿæˆå†…å®¹ã€‚

![](md-imgs/2024-10-03-23-01-33.png)

# [README.md](./0007.%20ä½¿ç”¨%20ctx.save%20å’Œ%20ctx.restore%20ä¿å­˜å’Œæ¢å¤ç”»å¸ƒçŠ¶æ€/README.md)<!-- !======> SEPERATOR <====== -->
# [0007. ä½¿ç”¨ ctx.save å’Œ ctx.restore ä¿å­˜å’Œæ¢å¤ç”»å¸ƒçŠ¶æ€](https://github.com/Tdahuyou/canvas/tree/main/0007.%20%E4%BD%BF%E7%94%A8%20ctx.save%20%E5%92%8C%20ctx.restore%20%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D%E7%94%BB%E5%B8%83%E7%8A%B6%E6%80%81)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ notes](#2--notes)
  - [2.1. `ctx.save` å’Œ `ctx.restore` ä½¿ç”¨åœºæ™¯](#21-ctxsave-å’Œ-ctxrestore-ä½¿ç”¨åœºæ™¯)
  - [2.2. `ctx.save()`](#22-ctxsave())
  - [2.3. ctx.restore()](#23-ctxrestore())
  - [2.4. å¸¸è§ç”¨æ³•ï¼šå­˜ - æ”¹ - å¤åŸ](#24-å¸¸è§ç”¨æ³•å­˜---æ”¹---å¤åŸ)
- [3. ğŸ’» demo](#3--demo)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ç”»ç¬”çŠ¶æ€çš„å­˜å‚¨å’Œæ¢å¤è¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„æ“ä½œï¼Œéœ€è¦æŒæ¡ä¸€äº›å¸¸è§çš„å†™æ³•ã€‚

## 2. ğŸ“’ notes

[ctx.save()](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/save) å’Œ [ctx.restore()](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/restore) æ–¹æ³•ç”¨äºä¿å­˜å’Œæ¢å¤ç”»å¸ƒï¼ˆCanvasï¼‰çš„çŠ¶æ€ã€‚

### 2.1. `ctx.save` å’Œ `ctx.restore` ä½¿ç”¨åœºæ™¯

åœ¨ä½ éœ€è¦æš‚æ—¶æ”¹å˜ç»˜å›¾æ ·å¼ã€å˜æ¢æˆ–è€…è·¯å¾„ï¼Œè€Œååˆæƒ³æ¢å¤åˆ°ä¹‹å‰çŠ¶æ€çš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚

### 2.2. `ctx.save()`

è¿™ä¸ªæ–¹æ³•ç”¨äºä¿å­˜å½“å‰ç”»å¸ƒçš„æ‰€æœ‰çŠ¶æ€ã€‚

è¿™é‡Œè¯´çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ï¼š

- æè¾¹æ ·å¼ `ctx.strokeStyle`
- å¡«å……æ ·å¼ `ctx.fillStyle`
- çº¿æ¡æ ·å¼ `ctx.lineWidth`
- æ–‡æœ¬æ ·å¼ `ctx.font`
- è£å‰ª `ctx.clip`
- â€¦â€¦

### 2.3. ctx.restore()

è¿™ä¸ªæ–¹æ³•ç”¨äºæ¢å¤ **æœ€è¿‘ä¸€æ¬¡** é€šè¿‡ `ctx.save()` ä¿å­˜çš„ç”»å¸ƒçŠ¶æ€ã€‚

ä½ å¯ä»¥è°ƒç”¨å¤šæ¬¡ `ctx.save()` æ¥ä¿å­˜å¤šä¸ªçŠ¶æ€ï¼Œå¹¶æŒ‰ç…§æ ˆçš„åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰é¡ºåºé€šè¿‡ `ctx.restore()` æ¥æ¢å¤è¿™äº›çŠ¶æ€ã€‚

### 2.4. å¸¸è§ç”¨æ³•ï¼šå­˜ - æ”¹ - å¤åŸ

```javascript
const canvas = document.createElement('canvas')
onst ctx = canvas.getContext('2d')

// â€¦â€¦

function draw1() {
  // ç¬¬ä¸€æ­¥ å­˜ä¸‹å½“å‰çš„ç”»ç¬”çŠ¶æ€
  ctx.save()

  // ç¬¬äºŒæ­¥ ä¿®æ”¹ç”»ç¬”çŠ¶æ€ï¼Œç»˜åˆ¶å›¾å½¢
  // â€¦â€¦

  // ç¬¬ä¸‰æ­¥ é‡ç½®å›ç¬¬ä¸€æ­¥çš„ç”»ç¬”çŠ¶æ€
  ctx.restore()
}

function draw2() {
  // ç¬¬ä¸€æ­¥ å­˜ä¸‹å½“å‰çš„ç”»ç¬”çŠ¶æ€
  ctx.save()

  // ç¬¬äºŒæ­¥ ä¿®æ”¹ç”»ç¬”çŠ¶æ€ï¼Œç»˜åˆ¶å›¾å½¢
  // â€¦â€¦

  // ç¬¬ä¸‰æ­¥ é‡ç½®å›ç¬¬ä¸€æ­¥çš„ç”»ç¬”çŠ¶æ€
  ctx.restore()
}
```

åœ¨æ¯ä¸ªç»˜å›¾çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦è°ƒæ•´ç”»ç¬”çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ”¹å˜ä¸€äº›æè¾¹çš„ç²—ç»†ã€é¢œè‰²ç­‰ç­‰ï¼Œä½†æ˜¯è¿™äº›ä¿¡æ¯çš„ä¿®æ”¹æˆ‘ä»¬å¸Œæœ›æ˜¯å±€éƒ¨çš„ï¼Œä¸è¦å¯¹å…¨å±€é€ æˆå½±å“ã€‚æ­¤æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šè¿°è¿™ç§åšæ³•æ¥ç®¡ç†ç”»ç¬”çš„çŠ¶æ€ã€‚

1. åœ¨ç»˜å›¾ä¹‹å‰ï¼Œæš‚å­˜ç”»ç¬”å¼€å§‹çŠ¶æ€ä¿¡æ¯ã€‚`ctx.store()`
2. è‡ªå®šä¹‰ç”»ç¬”çŠ¶æ€æ¥å®ç°ç»˜å›¾ã€‚
3. æœ¬æ¬¡ç»˜åˆ¶é€»è¾‘ç»“æŸï¼Œæ¢å¤ç”»ç¬”åˆ°å¼€å§‹çŠ¶æ€ã€‚`ctx.restore()`

## 3. ğŸ’» demo

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 200, 450, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.globalAlpha = .8

      ctx.fillRect(50, 50, 100, 50)

      ctx.save() // ä¿å­˜åˆå§‹çŠ¶æ€ã€é»‘è‰²å¡«å……ã€‘

      ctx.fillStyle = 'red'
      ctx.fillRect(50, 100, 100, 50)

      ctx.save() // ä¿å­˜çŠ¶æ€ 1ã€çº¢è‰²å¡«å……ã€‘

      ctx.fillStyle = 'green'
      ctx.fillRect(50, 150, 100, 50)

      ctx.save() // ä¿å­˜çŠ¶æ€ 2ã€ç»¿è‰²å¡«å……ã€‘

      ctx.fillStyle = 'blue'
      ctx.fillRect(50, 200, 100, 50)

      ctx.restore()
      // æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯çŠ¶æ€ 2ï¼Œæ­¤æ—¶çš„å¡«å……é¢œè‰²ä¸ºç»¿è‰²
      ctx.fillRect(50, 250, 100, 50)

      ctx.restore()
      // å†æ¬¡æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯çŠ¶æ€ 1ï¼Œæ­¤æ—¶çš„å¡«å……é¢œè‰²ä¸ºçº¢è‰²
      ctx.fillRect(50,  300, 100, 50)

      ctx.restore()
      // å†æ¬¡æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯åˆå§‹çŠ¶æ€ï¼Œæ­¤æ—¶çš„å¡«å……é¢œè‰²ä¸ºé»‘è‰²
      ctx.fillRect(50,  350, 100, 50)
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-05-01.png)

# [README.md](./0008.%20ä½¿ç”¨%20ctx.lineCap%20è®¾ç½®çº¿æ¡ç«¯ç‚¹æ ·å¼/README.md)<!-- !======> SEPERATOR <====== -->
# [0008. ä½¿ç”¨ ctx.lineCap è®¾ç½®çº¿æ¡ç«¯ç‚¹æ ·å¼](https://github.com/Tdahuyou/canvas/tree/main/0008.%20%E4%BD%BF%E7%94%A8%20ctx.lineCap%20%E8%AE%BE%E7%BD%AE%E7%BA%BF%E6%9D%A1%E7%AB%AF%E7%82%B9%E6%A0%B7%E5%BC%8F)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo](#2--demo)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

`lineCap` è¡¨ç¤ºçº¿å¸½ï¼Œä¹Ÿå°±æ˜¯çº¿æ¡çš„ç«¯ç‚¹ã€‚`ctx.lineCap` è¿™ç©æ„å„¿æ˜¯ç”¨æ¥è®¾ç½®çº¿æ¡ç«¯ç‚¹æ ·å¼çš„ã€‚

çŸ¥é“ `ctx.lineCap` è¿™ç©æ„å„¿æ˜¯ç”¨æ¥é…ç½®å•¥ç©æ„å„¿çš„å³å¯ï¼Œå¾ˆç®€å•ï¼Œçœ‹çœ‹æœ€ç»ˆçš„æ¸²æŸ“ç»“æœå’Œå¯¹åº”çš„å­—ç¬¦ä¸²ï¼ˆbuttã€roundã€squareï¼‰è‡ªç„¶å°±ç†è§£äº†ã€‚

## 2. ğŸ’» demo

```html
<!-- 1.thml -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>demo</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // æŠŠçº¿æ¡è®¾ç½®å¾—ç²—ä¸€äº›ï¼Œä»¥ä¾¿æŸ¥çœ‹æ•ˆæœã€‚
      ctx.lineWidth = 30
      ctx.strokeStyle = 'red'

      // ctx.lineCap ç”¨äºè®¾ç½®çº¿æ¡ä¸¤ç«¯çš„æ ·å¼ã€‚

      ctx.beginPath()
      ctx.lineCap = 'butt'
      // çº¿æ¡ä¸¤ç«¯ä»¥æ–¹å½¢ç»“æŸã€‚
      // è¿™ä¹Ÿæ˜¯é»˜è®¤å€¼ã€‚
      ctx.moveTo(100, 100)
      ctx.lineTo(300, 100)
      ctx.stroke()

      ctx.beginPath()
      ctx.lineCap = 'round'
      // çº¿æ¡ä¸¤ç«¯ä»¥åœ†å½¢ç»“æŸã€‚
      ctx.moveTo(100, 200)
      ctx.lineTo(300, 200)
      ctx.stroke()

      ctx.beginPath()
      ctx.lineCap = 'square'
      // çº¿æ¡ä¸¤ç«¯ä»¥æ–¹å½¢ç»“æŸã€‚
      // å¢åŠ äº†ä¸€ä¸ªå®½åº¦æ˜¯çº¿æ¡åšåº¦ä¸€åŠçš„çŸ©å½¢ã€‚
      ctx.moveTo(100, 300)
      ctx.lineTo(300, 300)
      ctx.stroke()

      ctx.beginPath()
      ctx.lineWidth = 100 // åˆ»æ„å°†çº¿æ¡çš„åšåº¦è®¾ç½®ä¸º 100
      ctx.strokeStyle = 'blue'
      ctx.lineCap = 'square' // ä¸¤ç«¯å°†å„è‡ªå¤šå‡º 100/2 ä¹Ÿå°±æ˜¯ 50 çš„çŸ©å½¢
      ctx.moveTo(100, 400)
      ctx.lineTo(300, 400)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-06-25.png)


# [README.md](./0009.%20ä½¿ç”¨%20ctx.lineDashOffset%20è®¾ç½®è™šçº¿çš„åç§»é‡/README.md)<!-- !======> SEPERATOR <====== -->
# [0009. ä½¿ç”¨ ctx.lineDashOffset è®¾ç½®è™šçº¿çš„åç§»é‡](https://github.com/Tdahuyou/canvas/tree/main/0009.%20%E4%BD%BF%E7%94%A8%20ctx.lineDashOffset%20%E8%AE%BE%E7%BD%AE%E8%99%9A%E7%BA%BF%E7%9A%84%E5%81%8F%E7%A7%BB%E9%87%8F)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo](#2--demo)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

`lineDashOffset` è¿™ä¸ªå±æ€§å¸¸ç”¨äºå®ç°çº¿æ¡ç›¸å…³çš„åŠ¨ç”»æ•ˆæœã€‚æœ‰ä¸å°‘è·Ÿ **çº¿æ¡ç§»åŠ¨ç›¸å…³çš„åŠ¨ç”»**ï¼Œå°±æ˜¯ä½¿ç”¨è¿™ä¸ªå±æ€§æ¥å®ç°çš„ã€‚

## 2. ğŸ’» demo

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // ctx.lineDashOffset å±æ€§ï¼Œç”¨äºè®¾ç½®è™šçº¿èµ·å§‹ä½ç½®çš„åç§»é‡ã€‚

      // æ­£æ•°ï¼Œå‘å·¦åç§» â†
      // è´Ÿæ•°ï¼Œå‘å³åç§» â†’

      // åç§»åçš„å›¾å½¢ï¼Œå¦‚æœè¶…å‡ºäº†è¾¹ç•Œï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨è¢«æˆªæ–­éšè—ã€‚

      ctx.beginPath()
      ctx.setLineDash([50])
      ctx.moveTo(50, 100)
      ctx.lineTo(450, 100)
      ctx.stroke()

      ctx.beginPath()
      ctx.setLineDash([50])
      ctx.lineDashOffset = -50 // å‘å³åç§» â†’
      ctx.moveTo(50, 200)
      ctx.lineTo(450, 200)
      ctx.stroke()

      ctx.beginPath()
      ctx.setLineDash([50])
      ctx.lineDashOffset = 20 // å‘å·¦åç§» â†
      ctx.moveTo(50, 300)
      ctx.lineTo(450, 300)
      ctx.stroke()
    </script>
  </body>
</html>
```

ä¸€å…± 3 æ ¹çº¿ï¼š
- ç¬¬ 1 æ ¹çº¿ä½œä¸ºå‚è€ƒ
- ç¬¬ 2 æ ¹çº¿å‘å³åç§» 50 ä¸ªå•ä½
- ç¬¬ 3 æ ¹çº¿å‘å·¦åç§» 20 ä¸ªå•ä½

è¿™ 3 æ ¹çº¿ç»˜åˆ¶çš„æ¨ªå‘ï¼ˆx è½´ï¼‰æœ‰æ•ˆåŒºåŸŸæ˜¯ [50, 450]ï¼Œè¶Šç•Œçš„éƒ¨åˆ†å°†ä¼šè‡ªåŠ¨æˆªæ–­éšè—ã€‚

![](md-imgs/2024-10-03-23-07-43.png)

# [README.md](./0010.%20ä½¿ç”¨%20ctx.setLineDash%20è®¾ç½®è™šçº¿/README.md)<!-- !======> SEPERATOR <====== -->
# [0010. ä½¿ç”¨ ctx.setLineDash è®¾ç½®è™šçº¿](https://github.com/Tdahuyou/canvas/tree/main/0010.%20%E4%BD%BF%E7%94%A8%20ctx.setLineDash%20%E8%AE%BE%E7%BD%AE%E8%99%9A%E7%BA%BF)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo](#2--demo)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

å­¦ä¼šä½¿ç”¨ `ctx.setLineDash` è®¾ç½®è™šçº¿ï¼Œå®ƒä¼šæ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°æ•°é‡ä¸åŒï¼Œé€‰æ‹©ä½¿ç”¨ä¸åŒçš„è¡Œä¸ºæ¥è®¾ç½®è™šçº¿ä¹‹é—´çš„é—´éš™ã€‚

## 2. ğŸ’» demo

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // ctx.setLineDash(array) æ–¹æ³•ï¼Œç”¨äºè®¾ç½®è™šçº¿ã€‚
      // å…¶ä¸­å‚æ•° array ä¸­çš„æ•°å€¼å«ä¹‰ï¼šçº¿æ®µçš„é•¿åº¦ã€çº¿æ®µé—´ç•™ç™½çš„é•¿åº¦ã€‚

      ctx.beginPath()
      ctx.setLineDash([50])
      // çº¿æ®µé•¿åº¦ï¼š50
      // ç•™ç™½é•¿åº¦ï¼š50
      ctx.moveTo(50, 100)
      ctx.lineTo(450, 100)
      ctx.stroke()

      ctx.beginPath()
      ctx.setLineDash([50, 20])
      // çº¿æ®µé•¿åº¦ï¼š50
      // ç•™ç™½é•¿åº¦ï¼š20
      ctx.moveTo(50, 200)
      ctx.lineTo(450, 200)
      ctx.stroke()

      ctx.beginPath()
      ctx.setLineDash([10, 20, 30])
      // æŒ‰ç…§æ•°ç»„çš„æ•°åˆ—ï¼Œæ— é™çš„å»¶ç»­ä¸‹å»ã€‚
      // ã€1ã€‘æ•°å­— 10, 20, 30 æ— é™é‡å¤     10       20      30        10       20       30        10       20  ...
      // ã€2ã€‘çº¿æ®µã€ç•™ç™½ï¼Œæ— é™é‡å¤          çº¿æ®µ     ç•™ç™½     çº¿æ®µ      ç•™ç™½      çº¿æ®µ      ç•™ç™½      çº¿æ®µ      ç•™ç™½  ...
      // ã€1ã€‘+ã€2ã€‘åŒ¹é…åçš„ç»“æœ           çº¿æ®µ10  ç•™ç™½20   çº¿æ®µ30    ç•™ç™½10    çº¿æ®µ20    ç•™ç™½30    çº¿æ®µ10    ç•™ç™½20 ...
      ctx.moveTo(50, 300)
      ctx.lineTo(450, 300)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-08-48.png)


# [README.md](./0011.%20ä½¿ç”¨%20ctx.miterLimit%20çº¦æŸä¸¤çº¿ç›¸äº¤å¤„çš„æœ€å¤§å€¾æ–œé•¿åº¦/README.md)<!-- !======> SEPERATOR <====== -->
# [0011. ä½¿ç”¨ ctx.miterLimit çº¦æŸä¸¤çº¿ç›¸äº¤å¤„çš„æœ€å¤§å€¾æ–œé•¿åº¦](https://github.com/Tdahuyou/canvas/tree/main/0011.%20%E4%BD%BF%E7%94%A8%20ctx.miterLimit%20%E7%BA%A6%E6%9D%9F%E4%B8%A4%E7%BA%BF%E7%9B%B8%E4%BA%A4%E5%A4%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BE%E6%96%9C%E9%95%BF%E5%BA%A6)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo1](#2--demo1)
- [3. ğŸ’» demo2](#3--demo2)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

æœ¬èŠ‚ä»‹ç»çš„å†…å®¹ï¼Œå’Œä¸‹é¢è¿™ä¸ªå…¬å¼æœ‰å…³ã€‚

$$
\text{miterLimit} = \frac{\text{miterLengthï¼ˆæ–œæ¥é•¿åº¦ï¼‰}}{\text{lineWidthï¼ˆçº¿æ¡å®½åº¦ï¼‰}}
$$

é€šè¿‡ä¸‹é¢è¿™å¼ å›¾ï¼Œè®¤è¯† lineWidthã€miterLength è¡¨ç¤ºçš„åˆ†åˆ«æ˜¯å“ªéƒ¨åˆ†çš„å°ºå¯¸ã€‚

![](md-imgs/2024-10-03-23-11-03.png)

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>demo</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      cavnas.width = 500
      cavnas.height = 500
      document.body.appendChild(cavnas)

      drawGrid(cavnas, 500, 500, 50)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      /*
      MDN doc:
      https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/miterLimit

      ctx.miterLimit æ˜¯ HTML5 Canvas 2D API ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºè®¾ç½®æˆ–è¿”å›å½“ä¸¤æ¡çº¿ç›¸äº¤æ—¶æ¥åˆå¤„çš„æœ€å¤§æ–œæ¥é•¿åº¦ï¼ˆmiter lengthï¼‰ã€‚
      æ–œæ¥é•¿åº¦æ˜¯æŒ‡åœ¨ä¸¤æ¡çº¿ç›¸äº¤å½¢æˆå°–è§’æ—¶ï¼Œå†…è§’é¡¶ç‚¹åˆ°å¤–è§’é¡¶ç‚¹çš„è·ç¦»ã€‚
      è¿™ä¸ªå±æ€§ä¸»è¦ç”¨äºæ§åˆ¶å…·æœ‰ miter æ¥åˆç±»å‹çš„çº¿æ¡è¾¹è§’çš„å¤–è§‚ã€‚


      åœºæ™¯ï¼š
      å½“çº¿æ¡æ¯”è¾ƒç²—ï¼ŒæŠ˜çº¿å¤¹è§’æ¯”è¾ƒå°çš„æ—¶å€™ï¼ŒlineJoin çš„ miter è®¾ç½®å½¢æˆçš„å°–ä¼šæ¯”è¾ƒé•¿ã€‚
      å¦‚æœè§’åº¦éå¸¸å°–é”ï¼Œæ–œæ¥é•¿åº¦å¯èƒ½ä¼šå¼‚å¸¸é•¿ï¼Œå¯¼è‡´å›¾å½¢æ˜¾ç¤ºä¸ç†æƒ³ã€‚
      è¿™æ—¶å€™å¯ä»¥åˆ©ç”¨è¯¥å±æ€§æ¥æ§åˆ¶å°–è§’çš„é•¿çŸ­ã€‚
      miterLimit å±æ€§å…è®¸ä½ è®¾ç½®ä¸€ä¸ªé™åˆ¶å€¼ï¼Œè¶…è¿‡è¿™ä¸ªå€¼çš„æ–œæ¥é•¿åº¦ä¼šè‡ªåŠ¨è½¬æ¢ä¸º bevel ç±»å‹çš„æ¥åˆï¼Œå³åˆ‡å»å°–è§’éƒ¨åˆ†ã€‚


      å‚æ•°ï¼š
      miterLimit: è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªå¤§äºç­‰äº 1 çš„æ•°å­—ã€‚å®ƒè¡¨ç¤ºå…è®¸çš„æœ€å¤§æ–œæ¥é•¿åº¦ä¸çº¿æ¡å®½åº¦çš„æ¯”ç‡ã€‚é»˜è®¤å€¼é€šå¸¸æ˜¯ 10ã€‚
      å¦‚æœæ–œæ¥é•¿åº¦è¶…è¿‡ miterLimit çš„å€¼ï¼Œè¾¹è§’ä¼šä»¥ lineJoin çš„ " ] " ç±»å‹æ¥æ˜¾ç¤º


      æ•ˆæœï¼š
      å½“ miterLimit è®¾ç½®å¾—è¾ƒå°ï¼Œå¦‚æ¥è¿‘äº 1 æ—¶ï¼Œåªè¦ç›¸äº¤è§’ç¨å¾®å°–é”ä¸€ç‚¹ï¼Œæ¥åˆæ–¹å¼å°±ä¼šä» miter è½¬ä¸º bevelã€‚
      å½“ miterLimit è®¾ç½®å¾—è¾ƒå¤§æ—¶ï¼Œå³ä½¿æ˜¯éå¸¸å°–é”çš„è§’ï¼Œæ¥åˆå¤„ä¹Ÿä¼šå°è¯•ä¿æŒ miter ç±»å‹ï¼Œå¯èƒ½å¯¼è‡´è§’éƒ¨åˆ†éå¸¸å°–é•¿ã€‚

      å°ç»“ï¼š
      è§’å¯ä»¥å°–ã€å¯ä»¥é•¿ï¼Œä½†æ˜¯å¾—æœ‰ä¸ªåº¦ã€‚
      è¿™ä¸ªåº¦å°±æ˜¯ miterLimitã€‚
      miterLimit = miterLength / lineWidth

      1ï¸âƒ£ miterLength / lineWidth è¿™ç©æ„å„¿ç”¨äºè¡¨ç¤ºè§’çš„å°–é”ç¨‹åº¦ã€‚ã€è§’å®é™…çš„å°–é”ç¨‹åº¦ã€‘
      2ï¸âƒ£ miterLimit è¿™ç©æ„å„¿ç”¨äºè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ã€‚ã€å…è®¸çš„æœ€å¤§å°–é”ç¨‹åº¦ã€‘

      å¦‚æœ 1ï¸âƒ£ å¤§äº 2ï¸âƒ£ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠå°–è§’åˆ‡æ‰ï¼Œå˜æˆ bevel ç±»å‹ã€‚
        è¡¨ç¤ºè§’å¤ªå°–äº†ï¼Œå¾—åˆ‡æ‰ï¼Œå˜ä¸ºå¹³è§’ã€‚
      å¦‚æœ 1ï¸âƒ£ å°äº 2ï¸âƒ£ï¼Œé‚£ä¹ˆå°±ä¼šä¿æŒ miter ç±»å‹ã€‚
        è¡¨ç¤ºè§’è¿˜ä¸å¤Ÿå°–ï¼Œä¸éœ€è¦åˆ‡ã€‚
      */

      ctx.lineWidth = 20
      ctx.lineJoin = 'miter'
      ctx.strokeStyle = 'blue'

      ctx.moveTo(100, 100)
      ctx.lineTo(150, 400)
      ctx.lineTo(200, 100)
      ctx.stroke()

      ctx.beginPath()
      ctx.moveTo(300, 100)
      ctx.lineTo(350, 400)
      ctx.lineTo(400, 100)

      ctx.miterLimit = 6 // 2ï¸âƒ£
      // æ­¤æ—¶ lineWidth æ˜¯ 20
      // è§†è§‰è¯„ä¼°ï¼šæ­¤æ—¶ miterLength å¤§æ¦‚åœ¨ 120 åˆ° 140 ä¹‹é—´
      // å³ 1ï¸âƒ£ çš„å€¼å¤§æ¦‚åœ¨ 6ï½7 ä¹‹é—´
      // ä¹Ÿå°±æ˜¯è¯´å¦‚æœ miterLimit åœ¨ 1 åˆ° 6 ä¹‹é—´ï¼Œé‚£ä¹ˆè¿™ä¸ªå°–è§’å°±ä¼šè¢«åˆ‡ä¸ºå¹³è§’ã€‚1ï¸âƒ£ å¤§äº 2ï¸âƒ£
      // å¦‚æœ miterLimit å¤§äºç­‰äº 7ï¼Œé‚£ä¹ˆè¿™ä¸ªå°–è§’å°±ä¸ä¼šè¢«åˆ‡ä¸ºå¹³è§’ã€‚1ï¸âƒ£ å°äº 2ï¸âƒ£
      // éªŒè¯ï¼š
      // æ”¹å˜ miterLimit ä» 1 åˆ° 6 æ—¶ï¼Œæ¯”ä¾‹è¿˜æœªè¾¾åˆ°è¿™ä¸ªç¤ºä¾‹ä¸­çš„ä¸´ç•Œç‚¹ï¼Œå› æ­¤å®ƒä»¬éƒ½æ˜¾ç¤ºä¸ºæ–œæ¥ï¼ˆmiterï¼‰æ ·å¼ã€‚
      // è®¾ç½®ä¸º 7 æ—¶ï¼Œè¿™ä¸ªå€¼åˆšå¥½è¶…è¿‡äº†æ–œæ¥é•¿åº¦ä¸çº¿å®½æ¯”ä¾‹çš„é™åˆ¶ï¼Œå¯¼è‡´è¿æ¥æ ·å¼ä»æ–œæ¥ï¼ˆmiterï¼‰è½¬ä¸ºæ–œè§’ï¼ˆbevelï¼‰ã€‚
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-11-26.png)

## 3. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>demo</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      cavnas.width = 500
      cavnas.height = 500
      document.body.appendChild(cavnas)

      drawGrid(cavnas, 500, 500, 50)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.lineWidth = 100
      ctx.lineJoin = 'miter'
      ctx.strokeStyle = 'blue'

      ctx.moveTo(100, 100)
      ctx.lineTo(100, 400)
      ctx.lineTo(400, 400)
      ctx.miterLimit = Math.sqrt(2)
      ctx.stroke()

      /*
      ä¸Šé¢æè¿°äº†ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œæ­¤æ—¶ miterLength æ¯”è¾ƒå¥½è®¡ç®—
      lineWidth = 100
      miterLength = Math.sqrt(lineWidth^2 + lineWidth^2)
      miterLimit = miterLength / lineWidth = Math.sqrt(2)

      ç°åœ¨æ˜¯å¦è¦å°†å°–è§’åˆ‡ä¸ºå¹³è§’ï¼Œå°±çœ‹æˆ‘ä»¬è®¾ç½®çš„ miterLimit çš„é˜ˆå€¼æ˜¯å¤šå°‘äº†ã€‚
      miterLimit å€¼è¶Šå¤§ -> å°–è§’è¶Šå°–
      å¦‚æœä½ è§‰å¾—è¿™ä¸ªè§’å¤ªå°–äº†ï¼Œè¦åˆ‡ä¸ºå¹³è§’ï¼Œé‚£ä¹ˆ miterLimit è®¾ç½®çš„æ¯” Math.sqrt(2) å°å°±å¯ä»¥äº†ã€‚
      å¦‚æœä½ è§‰å¾—è¿™ä¸ªè§’ä¸ä¼šå¤ªå°–ï¼Œä¸éœ€è¦åˆ‡ï¼Œé‚£ä¹ˆ miterLimit è®¾ç½®çš„æ¯” Math.sqrt(2) å¤§å°±å¯ä»¥äº†ã€‚
        é»˜è®¤å€¼æ˜¯ 10ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ä¼šåˆ‡è§’ã€‚
      */
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-11-54.png)


# [README.md](./0012.%20ä½¿ç”¨%20ctx.lineTo%20æ¥ç»˜åˆ¶çº¿æ¡/README.md)<!-- !======> SEPERATOR <====== -->
# [0012. ä½¿ç”¨ ctx.lineTo æ¥ç»˜åˆ¶çº¿æ¡](https://github.com/Tdahuyou/canvas/tree/main/0012.%20%E4%BD%BF%E7%94%A8%20ctx.lineTo%20%E6%9D%A5%E7%BB%98%E5%88%B6%E7%BA%BF%E6%9D%A1)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1](#2--demo1)
- [3. ğŸ’» demo2](#3--demo2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- å­¦ä¼šä½¿ç”¨ `ctx.lineTo` æ¥ç»˜åˆ¶çº¿æ¡ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.moveTo(100, 100) // è¡¨ç¤ºä»å“ªä¸ªç‚¹å¼€å§‹ç”»
      ctx.lineTo(300, 100) // è¡¨ç¤ºç”»åˆ°å“ªä¸ªç‚¹
      ctx.stroke() // å¼€å§‹ç”»çº¿
      // é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿çš„é¢œè‰²æ˜¯é»‘è‰²ï¼Œçº¿çš„ç²—ç»†æ˜¯ 1 ä¸ªå•ä½

      ctx.beginPath()
      ctx.strokeStyle = 'red' // è¡¨ç¤ºçº¿çš„é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²
      ctx.lineWidth = 100 // è¡¨ç¤ºçº¿çš„ç²—ç»†è®¾ç½®ä¸º 100 ä¸ªå•ä½ï¼ˆä»¥ç»˜åˆ¶çš„è·¯å¾„ä¸ºä¸­å¿ƒï¼Œå‘ä¸¤ç«¯å„æ‰©æ•£ lineWidth / 2 ä¹Ÿå°±æ˜¯ 50 ä¸ªå•ä½ï¼‰
      ctx.moveTo(100, 200)
      ctx.lineTo(300, 200)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-13-29.png)

## 3. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      // ç”»ä¸€ä¸ª Z å­—å½¢
      ctx.moveTo(100, 100)

      // ç»è¿‡ä¸‹é¢è¿™äº›ç‚¹ï¼Œç”»å‡ºä¸€ä¸ª Z å­—å½¢
      ctx.lineTo(200, 100)
      ctx.lineTo(100, 200)
      ctx.lineTo(200, 200)

      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-13-41.png)

# [README.md](./0013.%20ä½¿ç”¨%20ctx.lineJoin%20è®¾ç½®çº¿æ¡è¿æ¥å¤„çš„æ ·å¼/README.md)<!-- !======> SEPERATOR <====== -->
# [0013. ä½¿ç”¨ ctx.lineJoin è®¾ç½®çº¿æ¡è¿æ¥å¤„çš„æ ·å¼](https://github.com/Tdahuyou/canvas/tree/main/0013.%20%E4%BD%BF%E7%94%A8%20ctx.lineJoin%20%E8%AE%BE%E7%BD%AE%E7%BA%BF%E6%9D%A1%E8%BF%9E%E6%8E%A5%E5%A4%84%E7%9A%84%E6%A0%B7%E5%BC%8F)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo](#2--demo)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

å­¦ä¼šä½¿ç”¨ `ctx.lineJoin` è®¾ç½®çº¿æ¡è¿æ¥å¤„çš„æ ·å¼ã€‚
- miter `>` å°–è§’
- round `)` åœ†è§’
- bevel `]` å¹³è§’

**å•è¯**
- miterï¼Œå°–è§’
- bevelï¼Œå¹³è§’ã€æ–œè§’

## 2. ğŸ’» demo

```html
<!-- 1.html -->
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>demo</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      cavnas.width = 500
      cavnas.height = 500
      document.body.appendChild(cavnas)

      drawGrid(cavnas, 500, 500, 50)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.lineWidth = 30
      ctx.strokeStyle = 'blue'

      // miter   >
      // round   )
      // bevel   ]

      ctx.lineJoin = 'miter' // å°–çš„ï¼ˆé»˜è®¤ï¼‰
      ctx.beginPath()
      ctx.moveTo(100, 100)
      ctx.lineTo(200, 200)
      ctx.lineTo(300, 100)
      ctx.stroke()

      ctx.lineJoin = 'round' // åœ†çš„
      ctx.beginPath()
      ctx.moveTo(100, 200)
      ctx.lineTo(200, 300)
      ctx.lineTo(300, 200)
      ctx.stroke()

      ctx.lineJoin = 'bevel' // å¹³çš„ï¼ˆæ–œè§’ï¼‰
      ctx.beginPath()
      ctx.moveTo(100, 300)
      ctx.lineTo(200, 400)
      ctx.lineTo(300, 300)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-15-35.png)


# [README.md](./0014.%20ä½¿ç”¨%20ctx.fillTextã€ctx.strokeText%20ç»˜åˆ¶æ–‡æœ¬/README.md)<!-- !======> SEPERATOR <====== -->
# [0014. ä½¿ç”¨ ctx.fillTextã€ctx.strokeText ç»˜åˆ¶æ–‡æœ¬](https://github.com/Tdahuyou/canvas/tree/main/0014.%20%E4%BD%BF%E7%94%A8%20ctx.fillText%E3%80%81ctx.strokeText%20%E7%BB%98%E5%88%B6%E6%96%87%E6%9C%AC)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo1](#2--demo1)
- [3. ğŸ’» demo2](#3--demo2)
- [4. ğŸ’» demo3](#4--demo3)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

`ctx.fillText` ç»˜åˆ¶å¡«å……æ–‡æœ¬ã€‚

`ctx.strokeText` ç»˜åˆ¶æè¾¹æ–‡æœ¬ã€‚

æœ€å¤šå¯ä»¥æ¥æ”¶ 4 ä¸ªå‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š
1. æ–‡æœ¬å†…å®¹
2. æ–‡æœ¬çš„æ¨ªåæ ‡
3. æ–‡æœ¬çš„çºµåæ ‡
4. æ–‡æœ¬çš„æ€»å®½åº¦

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç»˜åˆ¶å¡«å……æ–‡æœ¬</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.font = 'bold italic 4rem sans-serif'

      // ctx.fillText(text, x, y[, maxWidth])
      // ç”¨äºåœ¨ç”»å¸ƒä¸Šç»˜åˆ¶å¡«å……çš„æ–‡æœ¬ã€‚

      // text è¦ç»˜åˆ¶çš„å­—ç¬¦ä¸²ã€‚
      // x y æ–‡æœ¬èµ·å§‹ç‚¹çš„åæ ‡ï¼ˆç›¸å¯¹äº Canvas ç”»å¸ƒï¼‰ã€‚
      // maxWidth è¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºæ–‡æœ¬çš„æœ€å¤§å…è®¸å®½åº¦ã€‚
      // å¦‚æœè®¾ç½®äº† maxWidthï¼Œæ–‡æœ¬å°†åœ¨å¿…è¦æ—¶è¢«ç¼©æ”¾æˆ–å‹ç¼©ä»¥é€‚åº”è¿™ä¸ªå®½åº¦ã€‚

      ctx.fillText('Tdahuyou', 200, 200)
      // 'Tdahuyou'   è¡¨ç¤ºè¦ç»˜åˆ¶çš„æ–‡æœ¬
      // 200          è¡¨ç¤ºæ–‡æœ¬çš„ x åæ ‡
      // 200          è¡¨ç¤ºæ–‡æœ¬çš„ y åæ ‡
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-17-30.png)

## 3. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ–‡æœ¬çš„æœ€å¤§å®½åº¦</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.font = 'bold italic 4rem sans-serif'
      ctx.fillText('Tdahuyou', 200, 100)

      ctx.fillText('Tdahuyou', 200, 200, 300)
      // æ–‡æœ¬æœ€å¤§å®½åº¦ä¸º 300ï¼ˆæ­¤æ—¶æ–‡æœ¬ä¸ä¼šè¢«å‹ç¼©ï¼Œå› ä¸ºæœ€å¤§å®½åº¦è¶³å¤Ÿã€‚ï¼‰

      ctx.fillText('Tdahuyou', 200, 300, 200)
      // æ–‡æœ¬æœ€å¤§å®½åº¦ä¸º 200ï¼ˆæ­¤æ—¶æ–‡æœ¬ä¼šè¢«å‹ç¼©ï¼Œå¾€èµ·å§‹ç‚¹æ–¹å‘å‹ç¼©ã€‚ï¼‰

      ctx.fillText('Tdahuyou', 200, 400, 100)
      // æ–‡æœ¬æœ€å¤§å®½åº¦ä¸º 400ï¼ˆæ­¤æ—¶æ–‡æœ¬ä¼šè¢«å‹ç¼©ï¼Œå¾€èµ·å§‹ç‚¹æ–¹å‘å‹ç¼©ã€‚ï¼‰
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-17-40.png)

## 4. ğŸ’» demo3

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æè¾¹æ–‡æœ¬</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)

      const ctx = cavnas.getContext('2d')

      ctx.font = 'bold italic 4rem sans-serif'
      ctx.fillText('Tdahuyou', 200, 200)
      ctx.strokeText('Tdahuyou', 200, 300)

      // ctx.strokeText(text, x, y[, maxWidth])
      // ç”¨äºç»˜åˆ¶æè¾¹æ–‡æœ¬ã€‚

      // å¯¹æ¯” ctx.fillTextã€ctx.strokeText ä¸¤ä¸ªç»˜åˆ¶æ–‡æœ¬çš„æ–¹æ³•ã€‚
      // ç›¸åŒç‚¹ï¼šéƒ½æ˜¯ç”¨äºåœ¨ç”»å¸ƒä¸Šç»˜åˆ¶æ–‡æœ¬ï¼Œå¹¶ä¸”å‚æ•°éƒ½æ˜¯ä¸€æ ·çš„ã€‚
      // ä¸åŒç‚¹ï¼šfillText ç»˜åˆ¶çš„æ–‡æœ¬æ˜¯å®å¿ƒçš„ï¼ŒstrokeText ç»˜åˆ¶çš„æ–‡æœ¬æ˜¯ç©ºå¿ƒçš„ã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-17-53.png)


# [README.md](./0015.%20ä½¿ç”¨%20ctx.font%20è®¾ç½®å­—ä½“æ ·å¼/README.md)<!-- !======> SEPERATOR <====== -->
# [0015. ä½¿ç”¨ ctx.font è®¾ç½®å­—ä½“æ ·å¼](https://github.com/Tdahuyou/canvas/tree/main/0015.%20%E4%BD%BF%E7%94%A8%20ctx.font%20%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E6%A0%B7%E5%BC%8F)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo](#2--demo)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- çŸ¥é“ `ctx.font` å±æ€§æœ‰ä»€ä¹ˆç”¨
- çŸ¥é“ `ctx.font` å±æ€§å€¼çš„ä¹¦å†™è§„åˆ™æ˜¯ä»€ä¹ˆ

## 2. ğŸ’» demo

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç»˜åˆ¶æ–‡æœ¬</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // MDN DOCï¼š
      // ctx.font - https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font
      // css font - https://developer.mozilla.org/en-US/docs/Web/CSS/font

      // ctx.font å±æ€§
      // æè¿°ç»˜åˆ¶æ–‡å­—æ—¶ï¼Œå½“å‰å­—ä½“æ ·å¼çš„å±æ€§ã€‚
      // ä½¿ç”¨å’Œ CSS font è§„èŒƒç›¸åŒçš„å­—ç¬¦ä¸²å€¼ã€‚

      // ctx.font çš„å€¼é€šå¸¸æŒ‰ç…§ä»¥ä¸‹é¡ºåºå’Œæ ¼å¼è®¾ç½®ï¼š
      // 1. å­—ä½“æ ·å¼  font-style     å¯é€‰é¡¹     å¦‚ italic, normal æˆ– oblique
      // 2. å­—ä½“å˜ä½“  font-variant   å¯é€‰é¡¹     å¦‚ small-caps
      // 3. å­—ä½“ç²—ç»†  font-weight    å¯é€‰é¡¹     å¦‚ bold, 100, 300 ç­‰
      // 4. å­—ä½“å¤§å°  font-size      å¿…éœ€é¡¹     é€šå¸¸ä»¥ px, pt, em ç­‰å•ä½è¡¨ç¤º
      // 5. è¡Œé«˜     line-height    å¯é€‰é¡¹     é€šå¸¸ä¸å­—ä½“å¤§å°ä¸€èµ·è®¾ç½®ï¼Œå¦‚ 16px/1.5
      // 6. å­—ä½“æ—å  font-family    å¿…éœ€é¡¹     å¯ä»¥æ˜¯å…·ä½“çš„å­—ä½“åç§°å¦‚ Arialï¼Œæˆ–é€šç”¨å­—ä½“æ—å¦‚ serif, sans-serif

      // å…¶ä¸­åªæœ‰å­—ä½“çš„å¤§å°å’Œå­—ä½“çš„ç±»å‹æ˜¯å¿…å¡«é¡¹ï¼Œå…¶ä»–çš„éƒ½æ˜¯å¯é€‰é¡¹ã€‚

      ctx.font = 'bold italic 4rem sans-serif'
      // bold       è¡¨ç¤ºç²—ä½“
      // italic     è¡¨ç¤ºæ–œä½“
      // 4rem       è¡¨ç¤ºå­—ä½“å¤§å°
      // sans-serif è¡¨ç¤ºå­—ä½“

      ctx.fillText('Tdahuyou', 200, 200)
      // 'Tdahuyou'   è¡¨ç¤ºè¦ç»˜åˆ¶çš„æ–‡æœ¬
      // 200          è¡¨ç¤ºæ–‡æœ¬çš„ x åæ ‡
      // 200          è¡¨ç¤ºæ–‡æœ¬çš„ y åæ ‡
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-18-51.png)

# [README.md](./0016.%20ä½¿ç”¨%20ctx.textBaselineã€ctx.textAlign%20è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼/README.md)<!-- !======> SEPERATOR <====== -->
# [0016. ä½¿ç”¨ ctx.textBaselineã€ctx.textAlign è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼](https://github.com/Tdahuyou/canvas/tree/main/0016.%20%E4%BD%BF%E7%94%A8%20ctx.textBaseline%E3%80%81ctx.textAlign%20%E8%AE%BE%E7%BD%AE%E6%96%87%E6%9C%AC%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ’» demo1](#3--demo1)
- [4. ğŸ’» demo2](#4--demo2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- ctx.textBaseline è®¾ç½®æ–‡æœ¬çš„ **å‚ç›´** å¯¹é½æ–¹å¼
- ctx.textAlign è®¾ç½®æ–‡æœ¬çš„ **æ°´å¹³** å¯¹é½æ–¹å¼

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textBaseline - MDNï¼ŒtextBaseline è®¾ç½®æ–‡æœ¬çš„ å‚ç›´ å¯¹é½æ–¹å¼ã€‚
- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textAlign - MDNï¼ŒtextAlign è®¾ç½®æ–‡æœ¬çš„ æ°´å¹³ å¯¹é½æ–¹å¼ã€‚


## 3. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ctx.textAlign</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // MDN DOC textAlign
      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textAlign

      // ctx.textAlign å±æ€§ç”¨äºè®¾ç½®æ–‡æœ¬åŸºäºé”šç‚¹çš„æ°´å¹³ä½ç½®ã€‚

      // å¸¸ç”¨å±æ€§å€¼ï¼š
      // left   æ–‡æœ¬åœ¨é”šç‚¹çš„å·¦ä¾§
      // right  æ–‡æœ¬åœ¨é”šç‚¹çš„å³ä¾§
      // center æ–‡æœ¬åœ¨é”šç‚¹çš„ä¸­å¿ƒ

      ctx.textAlign = 'center' // æ°´å¹³å±…ä¸­å¯¹é½

      ctx.font = '4rem sans-serif'
      ctx.fillText('Tdahuyou', 200, 200)

      // é”šç‚¹
      ctx.beginPath()
      ctx.fillStyle = 'red'
      ctx.arc(200, 200, 8, 0, Math.PI * 2)
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-20-10.png)

## 4. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ctx.textBaseline</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // MDN DOC textBaseline
      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textBaseline

      // ctx.textBaseline å±æ€§ç”¨äºè®¾ç½®æ–‡æœ¬åŸºäºé”šç‚¹çš„å‚ç›´ä½ç½®ã€‚

      // å¸¸ç”¨å±æ€§å€¼ï¼š
      // top    æ–‡æœ¬çš„é¡¶éƒ¨ä¸æŒ‡å®šçš„ y åæ ‡å¯¹é½ã€‚
      // middle æ–‡æœ¬çš„ä¸­ç‚¹ä¸æŒ‡å®šçš„ y åæ ‡å¯¹é½ã€‚
      // bottom æ–‡æœ¬çš„åº•éƒ¨ä¸æŒ‡å®šçš„ y åæ ‡å¯¹é½ã€‚

      ctx.textBaseline = 'middle' // å‚ç›´å±…ä¸­å¯¹é½
     ctx.textAlign = 'center' // æ°´å¹³å±…ä¸­å¯¹é½

      ctx.font = '4rem sans-serif'
      ctx.fillText('Tdahuyou', 200, 200)

      // é”šç‚¹
      ctx.beginPath()
      ctx.fillStyle = 'red'
      ctx.arc(200, 200, 8, 0, Math.PI * 2)
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-20-23.png)


# [README.md](./0017.%20ç»˜åˆ¶ç½‘æ ¼/README.md)<!-- !======> SEPERATOR <====== -->
# [0017. ç»˜åˆ¶ç½‘æ ¼](https://github.com/Tdahuyou/canvas/tree/main/0017.%20%E7%BB%98%E5%88%B6%E7%BD%91%E6%A0%BC)


<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo1](#2--demo1)
- [3. ğŸ’» demo2](#3--demo2)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

åšä¸€ä¸ªå¯è§†åŒ–çš„ç½‘æ ¼ï¼Œä½œä¸ºå‚è€ƒåæ ‡ç³»ï¼Œä»¥ä¾¿æ›´ç›´è§‚åœ°æŸ¥çœ‹åæ ‡ï¼Œä¸»è¦æ˜¯è¾…åŠ©å­¦ä¹ ç”¨ã€‚
> å…¶ä¸­ `drawGrid.js` ç”¨åˆ°çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œåœ¨å…¶å®ƒæ–‡æ¡£ä¸­ä¼šä»‹ç»ã€‚

---

**å°è£… drawGrid**

```js
// drawGrid.js
/**
 * ç»˜åˆ¶ç½‘æ ¼
 * @param {HTMLCanvasElement} canvas ç”»å¸ƒå…ƒç´ 
 * @param {Number} width ç”»å¸ƒå®½åº¦
 * @param {Number} height ç”»å¸ƒé«˜åº¦
 * @param {Number} cellSize ç½‘æ ¼å•å…ƒæ ¼å°ºå¯¸
 * @param {Number} opacity ç½‘æ ¼çº¿é€æ˜åº¦
 * @param {Number} fontSize ç½‘æ ¼åæ ‡åˆ»åº¦çš„æ–‡å­—å¤§å°
 */
function drawGrid(canvas, width = 500, height = 500, cellSize = 50, opacity = 0.2, fontSize = 14) {
  const ctx = canvas.getContext('2d')

  canvas.width = width // è®¾ç½®ç”»å¸ƒå¤§å°ï¼ˆæ³¨æ„ï¼šè¿™ä¼šé‡ç½®ç”»å¸ƒçŠ¶æ€ï¼‰
  canvas.height = height

  ctx.save() // ä¿å­˜å½“å‰çš„ç»˜å›¾çŠ¶æ€ï¼ˆæ³¨æ„ï¼šctx.save çš„è°ƒç”¨ï¼Œè¦æ”¾åœ¨è®¾ç½® widthã€height ä¹‹åã€‚ï¼‰

  ctx.strokeStyle = `rgba(0, 0, 0, ${opacity})`
  ctx.font = `${fontSize}px Arial`

  // å¼€å§‹ç»˜åˆ¶ç½‘æ ¼çº¿
  ctx.beginPath()
  for (let x = 0; x <= width; x += cellSize) {
    ctx.moveTo(x, 0)
    ctx.lineTo(x, height)
    ctx.fillText(x.toString(), x + 2, 15) // ç»˜åˆ¶æ–‡å­—
  }
  for (let y = 0; y <= height; y += cellSize) {
    ctx.moveTo(0, y)
    ctx.lineTo(width, y)
    ctx.fillText(y.toString(), 2, y + 14) // ç»˜åˆ¶æ–‡å­—
  }
  ctx.stroke() // åº”ç”¨ä¹‹å‰çš„è®¾ç½®ç»˜åˆ¶çº¿æ¡

  ctx.restore() // æ¢å¤ä¿å­˜çš„ç»˜å›¾çŠ¶æ€
}
```

`drawGrid.js` ç”¨åˆ°çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œåœ¨åç»­æ–‡æ¡£ä¸­ä¼šä»‹ç»ã€‚

è¿™é‡Œæå‰å°†å…¶ä¸¢åˆ°è¿™é‡Œæ¥ä»‹ç»ï¼Œæ˜¯ä¸ºäº†ç»™åç»­å†…å®¹åšä¸€ä¸ªé“ºå«ï¼Œå°†ä¸å¯è§çš„åæ ‡å¯è§†åŒ–åœ°ç»˜åˆ¶å‡ºæ¥ï¼Œå‚è€ƒç€å¯è§†åŒ–çš„åæ ‡æ¥å­¦ä¹ ï¼Œæ•ˆæœä¹Ÿè®¸ä¼šæ›´å¥½ã€‚æ¯•ç«Ÿç±»ä¼¼ canvas å’Œ svg è¿™ç±»çš„å¯è§†åŒ–æŠ€æœ¯ï¼Œæ— æ—¶æ— åˆ»ä¸åœ¨è·Ÿä¸å¯è§çš„åæ ‡ç³»æ‰“äº¤é“ã€‚


## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')

      // åˆ›å»ºå¥½ canvas ä¹‹åï¼Œç›´æ¥è°ƒç”¨ drawGrid å‡½æ•°ç»˜åˆ¶å‚è€ƒç½‘æ ¼ã€‚
      drawGrid(cavnas, 500, 500, 50)
      // è¡¨ç¤ºç»˜åˆ¶ä¸€ä¸ª 500 * 500 çš„ç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼çš„å°ºå¯¸æ˜¯ 50ã€‚

      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath() // è·¯å¾„åˆ†ç»„ï¼Œä»¥é˜²åç»­çš„ç»˜åˆ¶æ“ä½œå½±å“åˆ°ä¹‹å‰ç»˜åˆ¶çš„ç½‘æ ¼ã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-22-09.png)

## 3. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      // å‰é¢çš„ canvas ç”»å¸ƒåˆå§‹åŒ–é€»è¾‘åŸºæœ¬ä¸ä¼šå˜åŒ–ï¼Œåœ¨æ¥ä¸‹æ¥çš„å­¦ä¹ ä¸­ç›´æ¥æ¬è¿å³å¯ã€‚
      // åç»­å¦‚æœè¦å­¦ä¹ ç»˜åˆ¶æ–°çš„å›¾å½¢ï¼Œç›´æ¥æ¥ç€å†™å¾€åå†™å°±è¡Œã€‚
      // å‰é¢ç»˜åˆ¶çš„ç½‘æ ¼ï¼Œä¸»è¦ä½œä¸ºå‚è€ƒåæ ‡ç³»ï¼Œä»¥ä¾¿æ›´ç›´è§‚åœ°æŸ¥çœ‹åæ ‡ã€‚
      ctx.fillRect(100, 100, 200, 100)
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-03-23-22-19.png)

# [README.md](./0018.%20ä½¿ç”¨%20ctx.fillRect%20ç»˜åˆ¶çŸ©å½¢/README.md)<!-- !======> SEPERATOR <====== -->
# [0018. ä½¿ç”¨ ctx.fillRect ç»˜åˆ¶çŸ©å½¢](https://github.com/Tdahuyou/canvas/tree/main/0018.%20%E4%BD%BF%E7%94%A8%20ctx.fillRect%20%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ notes](#2--notes)
- [3. ğŸ’» demo1 - ç»˜åˆ¶ä¸€ä¸ªé»˜è®¤çš„é»‘è‰²å¡«å……çŸ©å½¢](#3--demo1---ç»˜åˆ¶ä¸€ä¸ªé»˜è®¤çš„é»‘è‰²å¡«å……çŸ©å½¢)
- [4. ğŸ’» demo2 - æŒ‡å®šç»˜åˆ¶çŸ©å½¢çš„é¢œè‰²](#4--demo2---æŒ‡å®šç»˜åˆ¶çŸ©å½¢çš„é¢œè‰²)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- å­¦ä¼šä½¿ç”¨ `ctx.fillRect()` æ¥ç»˜åˆ¶ä¸€ä¸ªå¡«å……çŸ©å½¢ã€‚

## 2. ğŸ“’ notes

`ctx.fillRect(x, y, width, height)`
- `(x, y)` è¡¨ç¤ºä»å“ªä¸ªç‚¹å¼€å§‹ç»˜åˆ¶ï¼›
- `width, height` è¡¨ç¤ºç»˜åˆ¶çš„çŸ©å½¢çš„å°ºå¯¸ï¼›

é¡¾åæ€ä¹‰ï¼Œè¿™ç©æ„å„¿ç»˜åˆ¶çš„æ˜¯ä¸€ä¸ªå¡«å……çŸ©å½¢ã€‚å½“ä½ æ²¡æœ‰æŒ‡å®šå¡«å……æ ·å¼ `ctx.fillStyle` çš„æ—¶å€™ï¼Œé»˜è®¤å°†ä¼šç»˜åˆ¶ä¸€ä¸ªé»‘è‰²çš„å¡«å……çŸ©å½¢ã€‚

## 3. ğŸ’» demo1 - ç»˜åˆ¶ä¸€ä¸ªé»˜è®¤çš„é»‘è‰²å¡«å……çŸ©å½¢

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.fillRect(100, 100, 200, 100)
      // 100 100 è¡¨ç¤ºçŸ©å½¢å·¦ä¸Šè§’çš„ x y åæ ‡
      // 200 100 è¡¨ç¤ºçŸ©å½¢çš„å®½é«˜
      // è¯¥æ–¹æ³•ç»˜åˆ¶çš„æ˜¯ä¸€ä¸ªå¡«å……çŸ©å½¢
      // å¡«å……çš„é¢œè‰²é»˜è®¤ä¸ºé»‘è‰²
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-45-56.png)

## 4. ğŸ’» demo2 - æŒ‡å®šç»˜åˆ¶çŸ©å½¢çš„é¢œè‰²

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      // æŒ‡å®šç»˜åˆ¶çš„çŸ©å½¢çš„å¡«å……é¢œè‰²ä¸ºè“è‰²
      ctx.fillStyle = 'blue'

      ctx.fillRect(100, 100, 200, 100)
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-46-11.png)


# [README.md](./0019.%20ä½¿ç”¨%20ctx.strokeRect%20ç»˜åˆ¶çŸ©å½¢/README.md)<!-- !======> SEPERATOR <====== -->
# [0019. ä½¿ç”¨ ctx.strokeRect ç»˜åˆ¶çŸ©å½¢](https://github.com/Tdahuyou/canvas/tree/main/0019.%20%E4%BD%BF%E7%94%A8%20ctx.strokeRect%20%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2)

<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo1](#2--demo1)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

å­¦ä¼šä½¿ç”¨ `ctx.strokeRect()` æ¥ç»˜åˆ¶ä¸€ä¸ªæè¾¹çŸ©å½¢ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.strokeRect(100, 100, 200, 100)
      // 100 100 è¡¨ç¤ºçŸ©å½¢å·¦ä¸Šè§’çš„ x y åæ ‡
      // 200 100 è¡¨ç¤ºçŸ©å½¢çš„å®½é«˜
      // è¯¥æ–¹æ³•ç»˜åˆ¶çš„æ˜¯ä¸€ä¸ªçŸ©å½¢è¾¹æ¡†ï¼ˆä¹Ÿç§°æè¾¹çŸ©å½¢ï¼‰
      // æè¾¹çš„é¢œè‰²é»˜è®¤ä¸ºé»‘è‰²
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-46-49.png)

# [README.md](./0020.%20ä½¿ç”¨%20ctx.roundRect%20ç»˜åˆ¶åœ†è§’çŸ©å½¢/README.md)<!-- !======> SEPERATOR <====== -->
# [0020. ä½¿ç”¨ ctx.roundRect ç»˜åˆ¶åœ†è§’çŸ©å½¢](https://github.com/Tdahuyou/canvas/tree/main/0020.%20%E4%BD%BF%E7%94%A8%20ctx.roundRect%20%E7%BB%98%E5%88%B6%E5%9C%86%E8%A7%92%E7%9F%A9%E5%BD%A2)



<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1](#2--demo1)
- [3. ğŸ’» demo2](#3--demo2)
- [4. ğŸ’» demo3](#4--demo3)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- å­¦ä¼šä½¿ç”¨ `ctx.roundRect()` æ¥ç»˜åˆ¶ä¸€ä¸ªåœ†è§’çŸ©å½¢è·¯å¾„ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.roundRect(100, 100, 200, 200, 50)
      // 100 100 è¡¨ç¤ºçŸ©å½¢å·¦ä¸Šè§’çš„åæ ‡
      // 200 200 è¡¨ç¤ºçŸ©å½¢çš„å®½é«˜
      // 50 è¡¨ç¤ºåœ†è§’çš„å¤§å°
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-47-41.png)

## 3. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.roundRect(100, 100, 200, 200, 100)
      // 100 100 è¡¨ç¤ºçŸ©å½¢å·¦ä¸Šè§’çš„åæ ‡
      // 200 200 è¡¨ç¤ºçŸ©å½¢çš„å®½é«˜
      // 100 è¡¨ç¤ºåœ†è§’çš„å¤§å° â€”â€” æ­¤æ—¶å°†ç»˜åˆ¶ä¸€ä¸ªåœ†å½¢
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-47-52.png)

## 4. ğŸ’» demo3

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      // ctx.roundRect(x, y, width, height, radii)
      // æœ€åä¸€ä¸ªå‚æ•° radii å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆæœ‰å¤šç§å†™æ³•ï¼‰ã€‚

      ctx.roundRect(100, 100, 100, 100, [10])
      // å¦‚æœåœ†è§’å‚æ•°æ˜¯ä¸€ä¸ªå•ä¸€æ•°å€¼ï¼Œæˆ–è€…å•ä¸€æ•°å€¼çš„æ•°ç»„
      // é‚£ä¹ˆæ‰€æœ‰å››ä¸ªè§’å°†ä½¿ç”¨è¿™ä¸ªç›¸åŒçš„åŠå¾„
      // å››ä¸ªè§’çš„åœ†è§’å‚æ•°éƒ½æ˜¯ 10
      ctx.fill()

      ctx.roundRect(300, 100, 100, 100, [10, 30])
      // å¦‚æœæ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå€¼çš„æ•°ç»„ï¼š
      // ç¬¬ä¸€ä¸ªå€¼ 10 ç”¨äºå·¦ä¸Šè§’å’Œå³ä¸‹è§’
      // ç¬¬äºŒä¸ªå€¼ 30 ç”¨äºå³ä¸Šè§’å’Œå·¦ä¸‹è§’
      ctx.fill()

      ctx.roundRect(100, 300, 100, 100, [10, 30, 20])
      // å¦‚æœæ˜¯ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå€¼çš„æ•°ç»„ï¼š
      // ç¬¬ä¸€ä¸ªå€¼ 10 ç”¨äºå·¦ä¸Šè§’
      // ç¬¬äºŒä¸ªå€¼ 30 ç”¨äºå³ä¸Šè§’å’Œå·¦ä¸‹è§’
      // ç¬¬ä¸‰ä¸ªå€¼ 20 ç”¨äºå³ä¸‹è§’
      ctx.fill()

      ctx.roundRect(300, 300, 100, 100, [10, 20, 30, 40])
      // å¦‚æœæ˜¯å››ä¸ªå€¼çš„æ•°ç»„ï¼š
      // ç¬¬ä¸€ä¸ªå€¼ç”¨äºå·¦ä¸Šè§’
      // ç¬¬äºŒä¸ªå€¼ç”¨äºå³ä¸Šè§’
      // ç¬¬ä¸‰ä¸ªå€¼ç”¨äºå³ä¸‹è§’
      // ç¬¬å››ä¸ªå€¼ç”¨äºå·¦ä¸‹è§’
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-48-02.png)

# [README.md](./0021.%20ä½¿ç”¨%20ctx.rect%20ç»˜åˆ¶çŸ©å½¢/README.md)<!-- !======> SEPERATOR <====== -->
# [0021. ä½¿ç”¨ ctx.rect ç»˜åˆ¶çŸ©å½¢](https://github.com/Tdahuyou/canvas/tree/main/0021.%20%E4%BD%BF%E7%94%A8%20ctx.rect%20%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1](#2--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- å­¦ä¼šä½¿ç”¨ `ctx.rect()` æ¥ç»˜åˆ¶ä¸€ä¸ªå¡«å……è·¯å¾„ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.rect(100, 100, 200, 100) // è®¾ç½®ä¸€ä¸ªçŸ©å½¢è·¯å¾„
      ctx.fillStyle = 'red' // è®¾ç½®å¡«å……é¢œè‰²
      ctx.strokeStyle = 'blue' // è®¾ç½®ç”»ç¬”é¢œè‰²
      ctx.lineWidth = 10 // è®¾ç½®ç”»ç¬”å®½åº¦
      ctx.stroke() // ç»˜åˆ¶çŸ©å½¢è·¯å¾„
      ctx.fill() // å¡«å……çŸ©å½¢

      // ä¸Šè¿°åšæ³•å®é™…ä¸Šæ˜¯å…ˆå‡†å¤‡å¥½è·¯å¾„
      // ç„¶åå†å¯¹è·¯å¾„è¿›è¡Œå¡«å……å’Œæè¾¹

      // æ³¨æ„ï¼š
      // ä»£ç æ‰§è¡Œåˆ° ctx.fill() ä½ç½®æ„å‘³ç€ canvas æœ¬æ¬¡ç»˜åˆ¶å·²ç»å®Œæ¯•äº†
      // è‹¥å†å»è®¾ç½®ç±»ä¼¼ ctx.fillStyle = 'blue' ç­‰æ ·å¼æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-48-50.png)


# [README.md](./0022.%20ä½¿ç”¨%20ctx.closePath%20é—­åˆè·¯å¾„/README.md)<!-- !======> SEPERATOR <====== -->
# [0022. ä½¿ç”¨ ctx.closePath é—­åˆè·¯å¾„](https://github.com/Tdahuyou/canvas/tree/main/0022.%20%E4%BD%BF%E7%94%A8%20ctx.closePath%20%E9%97%AD%E5%90%88%E8%B7%AF%E5%BE%84)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1 - è‡ªåŠ¨é—­åˆ vs. æ‰‹åŠ¨é—­åˆ](#2--demo1---è‡ªåŠ¨é—­åˆ-vs-æ‰‹åŠ¨é—­åˆ)
- [3. ğŸ’» demo2 - æ³¨æ„ `lineWidth`](#3--demo2---æ³¨æ„-linewidth)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

äº†è§£æ‰‹åŠ¨é—­åˆå’Œè‡ªåŠ¨é—­åˆä¹‹é—´çš„åŒºåˆ«ã€‚é€šè¿‡ç¤ºä¾‹ï¼Œäº†è§£è·¯å¾„å¦‚æœæ²¡æœ‰è®¾ç½®è‡ªåŠ¨é—­åˆçš„è¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ã€‚

## 2. ğŸ’» demo1 - è‡ªåŠ¨é—­åˆ vs. æ‰‹åŠ¨é—­åˆ

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // è®¾ç½®çº¿æ¡å’Œå¡«å……æ ·å¼
      ctx.lineWidth = 20
      ctx.strokeStyle = 'red'
      ctx.fillStyle = 'yellow'

      // å¤šä¸ªè¿ç»­çº¿æ¡æ„æˆçš„åŒºåŸŸï¼Œæ˜¯å¯ä»¥ä½¿ç”¨ fill() è¿›è¡Œå¡«å……çš„ã€‚
      // å¦‚æœéœ€è¦é¦–å°¾èŠ‚ç‚¹è‡ªåŠ¨é—­åˆï¼Œå¯ä»¥ä½¿ç”¨ ctx.closePath() æ–¹æ³•ã€‚
      ctx.beginPath()
      ctx.moveTo(50, 50)
      ctx.lineTo(50, 150)
      ctx.lineTo(150, 150)
      ctx.lineTo(50, 50) // æ‰‹åŠ¨é—­åˆ
      ctx.stroke()
      ctx.fill()

      ctx.beginPath()
      ctx.moveTo(200, 200)
      ctx.lineTo(200, 300)
      ctx.lineTo(300, 300)
      ctx.closePath() // è‡ªåŠ¨é—­åˆ
      ctx.stroke()
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-49-40.png)

## 3. ğŸ’» demo2 - æ³¨æ„ `lineWidth`

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>demo</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // è®¾ç½®çº¿æ¡å’Œå¡«å……æ ·å¼
      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'
      ctx.fillStyle = 'yellow'

      // å¤šä¸ªè¿ç»­çº¿æ¡æ„æˆçš„åŒºåŸŸï¼Œæ˜¯å¯ä»¥ä½¿ç”¨ fill() è¿›è¡Œå¡«å……çš„ã€‚
      // æ³¨æ„ï¼šè¿™é‡Œæ‰€è¯´çš„åŒºåŸŸï¼Œå¹¶éä¸€å®šå¾—é—­åˆã€‚

      // ç”»ä¸€ä¸ªç›´è§’ï¼Œä½†æ˜¯è·¯å¾„å¹¶æ²¡æœ‰é—­åˆã€‚
      // æ­¤æ—¶è¿™ä¸ªç›´è§’ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¢«å¡«å…… fill çš„ã€‚
      // å› ä¸ºæ„æˆç›´è§’çš„ä¸¤æ¡çº¿æ®µæ„æˆäº†ä¸€ä¸ªä¸‰è§’å½¢åŒºåŸŸã€‚
      ctx.beginPath()
      ctx.moveTo(50, 50)
      ctx.lineTo(50, 150)
      ctx.lineTo(150, 150)

      ctx.stroke() // æè¾¹å„¿

      ctx.fill() // å°†æ„æˆçš„åŒºåŸŸå¡«å……ä¸ºé»„è‰²
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-49-54.png)

# [README.md](./0023.%20ä½¿ç”¨%20ctx.beginPath%20æ–¹æ³•å¯¹è·¯å¾„è¿›è¡Œåˆ†ç»„/README.md)<!-- !======> SEPERATOR <====== -->
# [0023. ä½¿ç”¨ ctx.beginPath æ–¹æ³•å¯¹è·¯å¾„è¿›è¡Œåˆ†ç»„](https://github.com/Tdahuyou/canvas/tree/main/0023.%20%E4%BD%BF%E7%94%A8%20ctx.beginPath%20%E6%96%B9%E6%B3%95%E5%AF%B9%E8%B7%AF%E5%BE%84%E8%BF%9B%E8%A1%8C%E5%88%86%E7%BB%84)


<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ notes](#2--notes)
- [3. ğŸ’» demo1 - é”™è¯¯å†™æ³•](#3--demo1---é”™è¯¯å†™æ³•)
- [4. ğŸ’» demo2 - æ­£ç¡®å†™æ³• 1](#4--demo2---æ­£ç¡®å†™æ³•-1)
- [5. ğŸ’» demo3 - æ­£ç¡®å†™æ³• 2](#5--demo3---æ­£ç¡®å†™æ³•-2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary


- å­¦ä¼šä½¿ç”¨ `ctx.beginPath()` å¯¹è·¯å¾„è¿›è¡Œåˆ†ç»„ï¼Œå¹¶äº†è§£å¦‚æœä¸ä½¿ç”¨åˆ†ç»„çš„è¯ï¼Œä¼šå­˜åœ¨ä»€ä¹ˆæ½œåœ¨é—®é¢˜ã€‚

## 2. ğŸ“’ notes

**éœ€æ±‚ï¼š**
1. å…ˆåœ¨ `(50, 50)` ä½ç½®ç»˜åˆ¶ä¸€ä¸ª `100 x 100` çš„çŸ©å½¢è½®å»“ï¼ˆè½®å»“é¢œè‰²ä¸ºè“è‰²ï¼‰
2. å†åœ¨ `(250, 50)` ä½ç½®ç»˜åˆ¶ä¸€ä¸ª `100 x 100` çš„çº¢è‰²çŸ©å½¢

ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡ä¸Šè¿°è¿™ä¿©ç®€å•çš„å°éœ€æ±‚ï¼Œä½“éªŒä¸€ä¸‹ `ctx.beginPath()` çš„ä½œç”¨ã€‚

## 3. ğŸ’» demo1 - é”™è¯¯å†™æ³•

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      // é”™è¯¯åšæ³•ï¼š
      ctx.rect(50, 50, 100, 100)
      ctx.strokeStyle = 'blue'
      ctx.stroke()

      ctx.rect(250, 50, 100, 100)
      ctx.fillStyle = 'red'
      ctx.fill()

      // stroke() æˆ– fill() é»˜è®¤ä¼šå¯¹ä¹‹å‰æ‰€æœ‰ç»˜åˆ¶çš„è·¯å¾„è¿›è¡Œä¸€ä¸ªå¤„ç†ã€‚
      // æˆ‘ä»¬å¯ä»¥ç”¨ beginPath() å¯¹è·¯å¾„è¿›è¡Œåˆ†ç»„å¤„ç†ã€‚
      // å¦‚æœä¸åˆ†ç»„çš„è¯ï¼Œé‚£ä¹ˆ fill() æˆ– stroke() ä¼šå¯¹ä¹‹å‰æ‰€æœ‰çš„è·¯å¾„è¿›è¡Œå¤„ç†ã€‚

      // å¦‚æœæ²¡æœ‰è°ƒç”¨ beginPath()ï¼Œé‚£ä¹ˆä¹‹å‰çš„è·¯å¾„ä¼šè¢«ä¿ç•™ï¼Œæ–°çš„è·¯å¾„ä¼šè¢«æ·»åŠ åˆ°ä¹‹å‰çš„è·¯å¾„ä¸Šã€‚
      // å½“æ‰§è¡Œ stroke() æˆ– fill() æ—¶ï¼Œä¼šå¯¹æ‰€æœ‰è·¯å¾„è¿›è¡Œå¤„ç†ã€‚

      // å¦‚æœè°ƒç”¨äº† beginPath()ï¼Œé‚£ä¹ˆä¹‹å‰çš„è·¯å¾„ä¼šè¢«æ¸…ç©ºï¼Œæ–°çš„è·¯å¾„ä¼šè¢«æ·»åŠ åˆ°ç©ºè·¯å¾„ä¸Šã€‚
      // å½“æ‰§è¡Œ stroke() æˆ– fill() æ—¶ï¼Œåªä¼šå¯¹æ–°çš„è·¯å¾„è¿›è¡Œå¤„ç†ã€‚
    </script>
  </body>
</html>
```

stroke() æˆ– fill() é»˜è®¤ä¼šå¯¹ **ä¹‹å‰æ‰€æœ‰ç»˜åˆ¶çš„è·¯å¾„** è¿›è¡Œä¸€ä¸ªå¤„ç†ã€‚

è¿™ç§å†™æ³•ä¸­ï¼Œåœ¨ç»˜åˆ¶å®Œç¬¬ä¸€ä¸ªæè¾¹çŸ©å½¢ä¹‹åï¼Œå½“ä½ ç»˜åˆ¶ç¬¬äºŒä¸ªå¡«å……çŸ©å½¢æ—¶ï¼Œå¡«å……å°†ä¼šå¯¹ä¹‹å‰çš„è·¯å¾„ä¹Ÿèµ·ä½œç”¨ã€‚

- å½“ `ctx.stroke()` æ‰§è¡Œæ—¶
  - `(50, 50)` ä½ç½®çš„çŸ©å½¢ï¼šåŠ ä¸Šäº†è“è‰²çš„æè¾¹
- å½“ `ctx.fill()` æ‰§è¡Œæ—¶
  - `(50, 50)` ä½ç½®çš„çŸ©å½¢ï¼šè¢«å¡«å……ä¸ºäº†çº¢è‰²
  - `(250, 50)` ä½ç½®çš„çŸ©å½¢ï¼šè¢«å¡«å……ä¸ºäº†çº¢è‰²

![](md-imgs/2024-10-04-00-52-36.png)

## 4. ğŸ’» demo2 - æ­£ç¡®å†™æ³• 1

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      // æ­£ç¡®åšæ³•1ï¼š
      ctx.rect(50, 50, 100, 100)
      ctx.strokeStyle = 'blue'
      ctx.stroke()

      ctx.beginPath() // æ³¨æ„ï¼Œè¿™ä¸€è¡Œä¸èƒ½å°‘ã€‚

      ctx.rect(250, 50, 100, 100)
      ctx.fillStyle = 'red'
      ctx.fill()
    </script>
  </body>
</html>
```

å› ä¸ºåœ¨æ‰§è¡Œ `ctx.fill()` ä¹‹å‰ï¼Œè°ƒç”¨äº† `ctx.beginPath()`ï¼Œç›¸å½“äºå¯¹è·¯å¾„åšäº†ä¸€ä¸ªåˆ†ç»„ï¼Œè¿™æ„å‘³ç€è·¯å¾„é‡æ–°å¼€å§‹ç»˜åˆ¶ï¼Œåˆ«å†ç®¡ä¹‹å‰çš„è·¯å¾„äº†ã€‚

- å½“ `ctx.stroke()` æ‰§è¡Œæ—¶
  - `(50, 50)` ä½ç½®çš„çŸ©å½¢ï¼šåŠ ä¸Šäº†è“è‰²çš„æè¾¹
- å½“ `ctx.fill()` æ‰§è¡Œæ—¶
  - ~~`(50, 50)` ä½ç½®çš„çŸ©å½¢ï¼šè¢«å¡«å……ä¸ºäº†çº¢è‰²~~ï¼ˆè¿™æ˜¯ä¹‹å‰çš„è·¯å¾„ï¼‰
  - `(250, 50)` ä½ç½®çš„çŸ©å½¢ï¼šè¢«å¡«å……ä¸ºäº†çº¢è‰²

![](md-imgs/2024-10-04-00-53-46.png)

## 5. ğŸ’» demo3 - æ­£ç¡®å†™æ³• 2

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      // æ­£ç¡®åšæ³•2ï¼š
      ctx.strokeStyle = 'blue'
      ctx.strokeRect(50, 50, 100, 100)

      // ctx.beginPath()
      // è¿™é‡Œæœ‰ or æ²¡æœ‰ beginPath() éƒ½å¯ä»¥ã€‚

      ctx.fillStyle = 'red'
      ctx.fillRect(250, 50, 100, 100)

      // ctx.fillRect()
      // ctx.strokeRect()
      // è¿™ä¸¤ä¸ª API ä¸ä¼šå— beginPath çš„å½±å“ã€‚
      // å› ä¸º strokeRect()ã€fillRect() æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»˜åˆ¶æ“ä½œï¼Œä¸ä¼šå—åˆ°ä¹‹å‰çš„è·¯å¾„çš„å½±å“ã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-00-54-27.png)


# [README.md](./0024.%20ä½¿ç”¨%20ctx.arc%20ç»˜åˆ¶åœ†å¼§/README.md)<!-- !======> SEPERATOR <====== -->
# [0024. ä½¿ç”¨ ctx.arc ç»˜åˆ¶åœ†å¼§](https://github.com/Tdahuyou/canvas/tree/main/0024.%20%E4%BD%BF%E7%94%A8%20ctx.arc%20%E7%BB%98%E5%88%B6%E5%9C%86%E5%BC%A7)


<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ notes](#2--notes)
  - [2.1. ctx.arc](#21-ctxarc)
  - [2.2. è§’åº¦ã€å¼§åº¦çš„è½¬æ¢](#22-è§’åº¦å¼§åº¦çš„è½¬æ¢)
    - [2.2.1. 1. è§’åº¦ï¼ˆDegreeï¼‰](#221-1-è§’åº¦degree)
    - [2.2.2. 2. å¼§åº¦ï¼ˆRadianï¼‰](#222-2-å¼§åº¦radian)
    - [2.2.3. 3. è½¬æ¢å…³ç³»](#223-3-è½¬æ¢å…³ç³»)
- [3. ğŸ’¡ åœ†å‚è€ƒåæ ‡](#3--åœ†å‚è€ƒåæ ‡)
- [4. ğŸ’» demo1](#4--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary


- å­¦ä¼šä½¿ç”¨ `ctx.arc` ç»˜åˆ¶åœ†å¼§ï¼Œå¯ä»¥æ ¹æ®æ–‡æ¡£ä¸­æä¾›çš„å›¾æ¥ç†è§£ç»˜åˆ¶åŸç†ã€‚
- çŸ¥é“è§’åº¦å’Œå¼§åº¦ä¹‹é—´çš„åŒºåˆ«ï¼Œæ¸…æ¥šå®ƒä»¬ä¿©ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚

## 2. ğŸ“’ notes

### 2.1. ctx.arc

`ctx.arc(x, y, radius, startAngle, endAngle, counterclockwise)`

- `x y radius` è¡¨ç¤ºåœ†ç‚¹åæ ‡ã€åŠå¾„ã€‚
- `startAngle` è¡¨ç¤ºä»å“ªä¸ªç‚¹å¼€å§‹ç”»ã€‚å•ä½æ˜¯å¼§åº¦ã€‚
- `endAngle` è¡¨ç¤ºç”»åˆ°å“ªä¸ªç‚¹ç»“æŸã€‚å•ä½æ˜¯å¼§åº¦ã€‚
  - `0` åº¦ç‚¹æ‰€åœ¨ä½ç½®ï¼š`3` ç‚¹é’Ÿæ–¹å‘ã€‚
- `counterclockwise` è¡¨ç¤ºç»˜åˆ¶æ–¹å‘ã€‚
  - `false` é¡ºæ—¶é’ˆï¼ˆé»˜è®¤ï¼‰
  - `true`  é€†æ—¶é’ˆ

> **å•è¯**
>
> counterclockwiseï¼Œè¡¨ç¤ºé€†æ—¶é’ˆæ–¹å‘ã€‚

### 2.2. è§’åº¦ã€å¼§åº¦çš„è½¬æ¢

è§’åº¦å’Œå¼§åº¦éƒ½æ˜¯ç”¨æ¥æµ‹é‡å¹³é¢è§’çš„å•ä½ï¼Œç”¨äºæè¿°è§’çš„æ‰“å¼€ç¨‹åº¦ã€‚

åœ¨ç»˜åˆ¶åœ†ã€å¼§ç­‰æ›²çº¿å›¾å½¢çš„æ—¶å€™ï¼Œä½¿ç”¨çš„å•ä½å¤§å¤šéƒ½æ˜¯å¼§åº¦ï¼Œè€Œéè§’åº¦ã€‚å‡å¦‚ä½ æƒ³è¦è¡¨è¾¾ 360Â°ï¼Œåº”è¯¥ä¼ å…¥çš„å‚æ•°ä¸æ˜¯ ~~360~~ è€Œæ˜¯ 2Ï€ ç”¨ JS æ¥è¡¨ç¤ºå°±æ˜¯ `2 * Math.PI`ã€‚

ä»¥æ­¤ç±»æ¨ï¼Œ180Â° å°±æ˜¯ `Math.PI`ï¼Œ90Â° å°±æ˜¯ `Math.PI / 2`ã€‚

å…¶å®ï¼Œä½ åªéœ€è¦è®°ä½ `1Â° = Math.PI / 180` è¿™ä¸ªç­‰å¼å³å¯ï¼Œ**å¦‚æœä½ æƒ³è¦è¡¨è¾¾ xÂ°ï¼Œé‚£ä¹ˆå¯ä»¥å†™ `x * (Math.PI / 180)`ã€‚**

ä¸Šå­¦é‚£ä¼šå„¿ï¼Œåœ¨æ•°å­¦è¯¾ä¸Šç»å¯¹æ˜¯æœ‰ä»‹ç»è¿‡è¿™ä¿©ä¹‹é—´çš„è½¬æ¢çš„ï¼Œå¦‚æœå¿˜è®°äº†å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œåº”è¯¥å¦‚ä½•è½¬æ¢ï¼Œå¯ä»¥çœ‹çœ‹æ–‡ä¸­æä¾›çš„ç›¸å…³æè¿°å’Œè½¬æ¢å…¬å¼ã€‚

#### 2.2.1. 1. è§’åº¦ï¼ˆDegreeï¼‰

è§’åº¦æ˜¯è¡¡é‡å¹³é¢è§’å¤§å°çš„ä¸€ç§åº¦é‡å•ä½ï¼Œç¬¦å·é€šå¸¸ç”¨Â°è¡¨ç¤ºã€‚ä¸€ä¸ªå®Œæ•´çš„åœ†æ˜¯360Â°ã€‚è¿™ç§åˆ’åˆ†æ–¹å¼æºäºå¤ä»£å¤©æ–‡å­¦å®¶çš„è§‚å¯Ÿï¼Œä»–ä»¬å‘ç°æ¯å¹´å¤ªé˜³åœ¨é»„é“ä¸Šç§»åŠ¨çš„è§’åº¦å¤§çº¦æ˜¯360åº¦ï¼ˆå®é™…ä¸Šæ¥è¿‘365å¤©ï¼Œä½†360æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„æ•°å­—ï¼Œå› ä¸ºå®ƒèƒ½è¢«å¤šä¸ªæ•°å­—æ•´é™¤ï¼‰ã€‚

- **ç›´è§’**ï¼šä¸€ä¸ªç›´è§’æ˜¯90Â°ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªå®Œæ•´çš„åœ†ç”±4ä¸ªç›´è§’ç»„æˆã€‚
- **å¹³è§’**ï¼šå¹³è§’æ˜¯180Â°ï¼Œè¡¨ç¤ºä¸¤æ¡å°„çº¿åœ¨åŒä¸€ç›´çº¿ä¸Šï¼Œæœç›¸åæ–¹å‘ã€‚
- **å‘¨è§’**ï¼šä¸€ä¸ªå®Œæ•´çš„åœ†è§’æ˜¯360Â°ã€‚

#### 2.2.2. 2. å¼§åº¦ï¼ˆRadianï¼‰

å¼§åº¦æ˜¯å¦ä¸€ç§åº¦é‡è§’åº¦çš„æ–¹æ³•ï¼Œå®ƒæ˜¯æ ¹æ®è§’æ‰€æˆªå–åœ†å¼§çš„é•¿åº¦ä¸åœ†çš„åŠå¾„çš„æ¯”ç‡æ¥å®šä¹‰çš„ã€‚åœ¨æ•°å­¦å’Œå·¥ç¨‹å­¦ä¸­ï¼Œå¼§åº¦æ˜¯æ›´å¸¸ç”¨çš„å•ä½ï¼Œå› ä¸ºå®ƒç›´æ¥ä¸åœ†çš„å…¶ä»–æ€§è´¨ï¼ˆå¦‚å‘¨é•¿å’Œé¢ç§¯ï¼‰ç›¸å…³è”ï¼Œä¸”åœ¨è®¡ç®—ä¸­é€šå¸¸æ›´ä¸ºç®€ä¾¿ã€‚

- ä¸€ä¸ªå¼§åº¦å®šä¹‰ä¸ºåœ†ä¸Šä¸€ä¸ªä¸åŠå¾„é•¿åº¦ç›¸ç­‰çš„å¼§æ‰€å¯¹åº”çš„ä¸­å¿ƒè§’ã€‚
- ä¸€ä¸ªå®Œæ•´åœ†çš„å‘¨è§’ä¸º (2\pi) å¼§åº¦ï¼Œå› ä¸ºä¸€ä¸ªåœ†çš„å‘¨é•¿æ˜¯ (2\pi r)ï¼ˆå…¶ä¸­ (r) æ˜¯åŠå¾„ï¼‰ï¼Œæ‰€ä»¥å½“å¼§é•¿ç­‰äºåŠå¾„æ—¶ï¼Œæ‰€å¯¹åº”çš„è§’å°±æ˜¯1å¼§åº¦ã€‚
- å› æ­¤ï¼Œ(360^\circ) ç›¸å½“äº (2\pi) å¼§åº¦ã€‚

#### 2.2.3. 3. è½¬æ¢å…³ç³»

**ä¸¤ç§å•ä½ä¹‹é—´çš„è½¬æ¢å…³ç³»æ˜¯**ï¼š

$$
1\ \text{å¼§åº¦} = \frac{180^\circ}{\pi} \approx 57.2958^\circ
$$

$$
1^\circ = \frac{\pi}{180} \ \text{å¼§åº¦}
$$

ä½¿ç”¨è¿™äº›å…³ç³»ï¼Œä½ å¯ä»¥åœ¨è§’åº¦å’Œå¼§åº¦ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ä¾‹å¦‚ï¼Œ90Â°ï¼ˆä¸€ä¸ªç›´è§’ï¼‰ç›¸å½“äº `Ï€ / 2` å¼§åº¦ã€‚è¿™ç§è½¬æ¢åœ¨è§£å†³æ¶‰åŠä¸‰è§’å‡½æ•°å’Œè§’åº¦æµ‹é‡çš„æ•°å­¦ã€ç‰©ç†é—®é¢˜æ—¶éå¸¸é‡è¦ã€‚

## 3. ğŸ’¡ åœ†å‚è€ƒåæ ‡

å¯ä»¥ç»“åˆè¿™å¼ å›¾æ¥è¾…åŠ©ç†è§£ `ctx.arc` ç»˜åˆ¶åœ†å¼§çš„åŸç†ã€‚

![](md-imgs/2024-10-04-01-00-48.png)

## 4. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ä½¿ç”¨ ctx.arc ç»˜åˆ¶åœ†å¼§</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // ctx.arc(x, y, radius, startAngle, endAngle, counterclockwise)

      // x y radius è¡¨ç¤ºåœ†ç‚¹åæ ‡ã€åŠå¾„ã€‚

      // startAngle è¡¨ç¤ºä»å“ªä¸ªç‚¹å¼€å§‹ç”»ã€‚å•ä½æ˜¯å¼§åº¦ã€‚
      // endAngle   è¡¨ç¤ºç”»åˆ°å“ªä¸ªç‚¹ç»“æŸã€‚å•ä½æ˜¯å¼§åº¦ã€‚
      // 0 åº¦ç‚¹æ‰€åœ¨ä½ç½®ï¼š3 ç‚¹é’Ÿæ–¹å‘ã€‚

      // counterclockwise è¡¨ç¤ºç»˜åˆ¶æ–¹å‘ã€‚
      // false é¡ºæ—¶é’ˆï¼ˆé»˜è®¤ï¼‰
      // true  é€†æ—¶é’ˆ

      // åœ†
      ctx.beginPath()
      ctx.arc(100, 100, 50, 0, Math.PI * 2)
      ctx.stroke()

      // ä¸ŠåŠåœ†
      ctx.beginPath()
      ctx.arc(300, 100, 50, 0, Math.PI, true)
      ctx.stroke()

      // ä¸‹åŠåœ†
      ctx.beginPath()
      ctx.arc(300, 300, 50, 0, Math.PI, false)
      ctx.stroke()

      // 3/4 åœ†
      ctx.beginPath()
      ctx.arc(100, 300, 50, Math.PI / 2, Math.PI, true)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-01-01-24.png)


# [README.md](./0025.%20ä½¿ç”¨%20ctx.quadraticCurveToã€ctx.bezierCurveTo%20ç»˜åˆ¶è´å¡å°”æ›²çº¿/README.md)<!-- !======> SEPERATOR <====== -->
# [0025. ä½¿ç”¨ ctx.quadraticCurveToã€ctx.bezierCurveTo ç»˜åˆ¶è´å¡å°”æ›²çº¿](https://github.com/Tdahuyou/canvas/tree/main/0025.%20%E4%BD%BF%E7%94%A8%20ctx.quadraticCurveTo%E3%80%81ctx.bezierCurveTo%20%E7%BB%98%E5%88%B6%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF)


<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
  - [3.1. äºŒæ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶åŸç†](#31-äºŒæ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶åŸç†)
    - [3.1.1. 1. åŠ¨å›¾](#311-1-åŠ¨å›¾)
    - [3.1.2. 2. äºŒæ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†](#312-2-äºŒæ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†)
  - [3.2. ä¸‰æ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶åŸç†](#32-ä¸‰æ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶åŸç†)
    - [3.2.1. 1. åŠ¨å›¾](#321-1-åŠ¨å›¾)
    - [3.2.2. 2. ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†](#322-2-ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†)
- [4. ğŸ’» demo1 - äºŒæ¬¡è´å¡å°”æ›²çº¿](#4--demo1---äºŒæ¬¡è´å¡å°”æ›²çº¿)
- [5. ğŸ’» demo2 - ä¸‰æ¬¡è´å¡å°”æ›²çº¿](#5--demo2---ä¸‰æ¬¡è´å¡å°”æ›²çº¿)
<!-- endregion:toc -->

## 1. ğŸ“ Summary


- é‡ç‚¹åœ¨äºç†è§£è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†ã€‚ç†è§£åŸç†åï¼Œè‡ªç„¶å°±ç†è§£è¿™ä¿© API åº”è¯¥å¦‚ä½•ä½¿ç”¨äº†ã€‚

## 2. ğŸ”— links

- https://blog.csdn.net/m0_37602827/article/details/118165217 - CSDN - è´å¡å°”æ›²çº¿åŸç† - è¿™æ˜¯ CSDN ä¸Šçš„ä¸€ç¯‡ä»‹ç»è´å¡å°”æ›²çº¿åŸç†çš„æ–‡ç« ã€‚

## 3. ğŸ“’ notes

`ctx.quadraticCurveTo`ã€`ctx.bezierCurveTo` è¿™ä¿© API çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œæ— éå°±æ˜¯ä¼ å…¥ 2 ä¸ªç‚¹è¿˜æ˜¯ 3 ä¸ªç‚¹ã€‚é‡ç‚¹åœ¨äºç†è§£è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†ã€‚

### 3.1. äºŒæ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶åŸç†

è´å¡å°”æ›²çº¿çš„ç›¸å…³å†…å®¹ï¼Œæ˜¯ä¸ªé€šç”¨çš„çŸ¥è¯†ç‚¹ï¼Œåœ¨å­¦ä¹  canvas æ—¶ä¹Ÿä¼šæ¥è§¦åˆ°ã€‚

åœ¨ css ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ chrome devtools æ¥æ‰‹åŠ¨è°ƒèŠ‚åŠ¨ç”»æ•ˆæœæˆ–è¿‡æ¸¡æ•ˆæœçš„å˜åŒ–è´å¡å°”æ›²çº¿ã€‚

#### 3.1.1. 1. åŠ¨å›¾

![](md-imgs/äºŒé˜¶è´å¡å°”æ›²çº¿.gif)

#### 3.1.2. 2. äºŒæ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†

![](md-imgs/2024-10-04-10-50-27.png)

å‡è®¾ï¼š
- `x1 = P0ï¼ŒP01 ä¹‹é—´çš„è·ç¦»`
- `x2 = P0ï¼ŒP1 ä¹‹é—´çš„è·ç¦»`
- `x3 = P1ï¼ŒP12 ä¹‹é—´çš„è·ç¦»`
- `x4 = P1ï¼ŒP2 ä¹‹é—´çš„è·ç¦»`
- `x5 = P01ï¼ŒP02 ä¹‹é—´çš„è·ç¦»`
- `x6 = P01ï¼ŒP12 ä¹‹é—´çš„è·ç¦»`

å­˜åœ¨ä¸€ä¸ªå‚æ•° tï¼Œä½¿å¾—ä¸Šè¿° x æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
- `t = x1 / x2`
- `t = x3 / x4`
- `t = x5 / x6`

æŒ‰ç…§ä¸Šè¿°è§„åˆ™ä¸éš¾æƒ³è±¡ï¼Œå¦‚æœ t æ˜¯ 0ï¼Œé‚£ä¹ˆ P02 ä½äºèµ·ç‚¹ P0 ä½ç½®ï¼›å¦‚æœ t æ˜¯ 1ï¼Œé‚£ä¹ˆ P02 ä½äºç»ˆç‚¹ P2 ä½ç½®ã€‚å½“ t ä»‹äº 0-1 ä¹‹é—´æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸Šè¿°è§„åˆ™æ‰¾åˆ° P02 ç‚¹çš„ä½ç½®ã€‚è¿™æ„å‘³ç€ï¼Œå½“ t ä» 0 å˜åˆ° 1 æ—¶ï¼Œä¼šè·å¾—æ— æ•°ä¸ª P02 ç‚¹ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªå…‰æ»‘çš„æ›²çº¿ â€”â€” ç”±æ— æ•°ä¸ª P02 ç‚¹è¿æˆçš„æ›²çº¿ã€‚

ä¸Šè¿°å°±æ˜¯äºŒæ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†ã€‚

### 3.2. ä¸‰æ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶åŸç†

è´å¡å°”æ›²çº¿çš„ç›¸å…³å†…å®¹ï¼Œæ˜¯ä¸ªé€šç”¨çš„çŸ¥è¯†ç‚¹ï¼Œåœ¨å­¦ä¹  canvas æ—¶ä¹Ÿä¼šæ¥è§¦åˆ°ã€‚

åœ¨ css ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ chrome devtools æ¥æ‰‹åŠ¨è°ƒèŠ‚åŠ¨ç”»æ•ˆæœæˆ–è¿‡æ¸¡æ•ˆæœçš„å˜åŒ–è´å¡å°”æ›²çº¿ã€‚

#### 3.2.1. 1. åŠ¨å›¾

![](md-imgs/ä¸‰é˜¶è´å¡å°”æ›²çº¿.gif)

#### 3.2.2. 2. ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†

![](md-imgs/2024-10-04-10-52-06.png)

äºŒæ¬¡è´å¡å°”æ›²çº¿æœ‰ä¸€ä¸ªæ§åˆ¶ç‚¹ï¼Œä¸‰æ¬¡è´å¡å°”æ›²çº¿æœ‰ä¸¤ä¸ªæ§åˆ¶ç‚¹ã€‚åœ¨ç†è§£äº†äºŒæ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†åï¼Œæ‰¾è‘«èŠ¦ç”»ç“¢ï¼Œä¸‰æ¬¡ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

å‡è®¾ï¼š
- `x1 = P0ï¼ŒP01 ä¹‹é—´çš„è·ç¦»`
- `x2 = P0ï¼ŒP1 ä¹‹é—´çš„è·ç¦»`
- `x3 = P1ï¼ŒP12 ä¹‹é—´çš„è·ç¦»`
- `x4 = P1ï¼ŒP2 ä¹‹é—´çš„è·ç¦»`
- `x5 = P01ï¼ŒP02 ä¹‹é—´çš„è·ç¦»`
- `x6 = P01ï¼ŒP12 ä¹‹é—´çš„è·ç¦»`
- `x7 = P2ï¼ŒP23 ä¹‹é—´çš„è·ç¦»`
- `x8 = P2ï¼ŒP3 ä¹‹é—´çš„è·ç¦»`
- `x9 = P12ï¼ŒP13 ä¹‹é—´çš„è·ç¦»`
- `x10 = P12ï¼ŒP23 ä¹‹é—´çš„è·ç¦»`

å­˜åœ¨ä¸€ä¸ªå‚æ•° tï¼Œä½¿å¾—ä¸Šè¿° x æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
- `t = x1 / x2`
- `t = x3 / x4`
- `t = x5 / x6`
- `t = x7 / x8`
- `t = x9 / x10`

æŒ‰ç…§ä¸Šè¿°è§„åˆ™ä¸éš¾æƒ³è±¡ï¼Œå¦‚æœ t æ˜¯ 0ï¼Œé‚£ä¹ˆ P03 ä½äºèµ·ç‚¹ P0 ä½ç½®ï¼›å¦‚æœ t æ˜¯ 1ï¼Œé‚£ä¹ˆ P03 ä½äºç»ˆç‚¹ P3 ä½ç½®ã€‚å½“ t ä»‹äº 0-1 ä¹‹é—´æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸Šè¿°è§„åˆ™æ‰¾åˆ° P03 ç‚¹çš„ä½ç½®ã€‚è¿™æ„å‘³ç€ï¼Œå½“ t ä» 0 å˜åˆ° 1 æ—¶ï¼Œä¼šè·å¾—æ— æ•°ä¸ª P03 ç‚¹ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªå…‰æ»‘çš„æ›²çº¿ â€”â€” ç”±æ— æ•°ä¸ª P03 ç‚¹è¿æˆçš„æ›²çº¿ã€‚

ä¸Šè¿°å°±æ˜¯ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶åŸç†ã€‚

## 4. ğŸ’» demo1 - äºŒæ¬¡è´å¡å°”æ›²çº¿

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.fillStyle = 'red'

      ctx.beginPath()
      ctx.arc(50, 200, 4, 0, Math.PI * 2) // èµ·ç‚¹
      ctx.fill()
      ctx.beginPath()
      ctx.arc(100, 100, 4, 0, Math.PI * 2) // æ§åˆ¶ç‚¹
      ctx.fill()
      ctx.beginPath()
      ctx.arc(250, 200, 4, 0, Math.PI * 2) // ç»ˆç‚¹
      ctx.fill()

      // ctx.quadraticCurveTo(cpx, cpy, x, y)
      // ä½¿ç”¨ ctx.quadraticCurveTo æ–¹æ³•ç»˜åˆ¶äºŒæ¬¡è´å¡å°”æ›²çº¿

      // cpx cpy è¡¨ç¤ºæ§åˆ¶ç‚¹åæ ‡
      // x y è¡¨ç¤ºç»ˆç‚¹åæ ‡

      // èµ·ç‚¹åæ ‡æ˜¯ moveTo è®¾ç½®ï¼Œæˆ–è€…æ˜¯ä¸Šä¸€æ¬¡ç»˜å›¾çš„ç»“å°¾ã€‚

      ctx.beginPath()
      ctx.moveTo(50, 200)
      ctx.quadraticCurveTo(100, 100, 250, 200)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-10-53-14.png)

## 5. ğŸ’» demo2 - ä¸‰æ¬¡è´å¡å°”æ›²çº¿

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      document.body.appendChild(cavnas)
      drawGrid(cavnas, 500, 500, 50)
      const ctx = cavnas.getContext('2d')
      ctx.beginPath()

      ctx.fillStyle = 'red'

      ctx.arc(50, 200, 4, 0, Math.PI * 2) // èµ·ç‚¹
      ctx.fill()
      ctx.beginPath()
      ctx.arc(100, 100, 4, 0, Math.PI * 2) // æ§åˆ¶ç‚¹ 1
      ctx.fill()
      ctx.beginPath()
      ctx.arc(200, 300, 4, 0, Math.PI * 2) // æ§åˆ¶ç‚¹ 2
      ctx.fill()
      ctx.beginPath()
      ctx.arc(250, 200, 4, 0, Math.PI * 2) // ç»ˆç‚¹
      ctx.fill()

      // ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)
      // ä½¿ç”¨ ctx.bezierCurveTo æ–¹æ³•ç»˜åˆ¶ä¸‰æ¬¡è´å¡å°”æ›²çº¿

      // èµ·ç‚¹åæ ‡æ˜¯ moveTo è®¾ç½®ï¼Œæˆ–è€…æ˜¯ä¸Šä¸€æ¬¡ç»˜å›¾çš„ç»“å°¾ã€‚
      // cp1x cp1y è¡¨ç¤ºæ§åˆ¶ç‚¹ 1 åæ ‡
      // cp2x cp2y è¡¨ç¤ºæ§åˆ¶ç‚¹ 2 åæ ‡
      // x y è¡¨ç¤ºç»ˆç‚¹åæ ‡

      ctx.beginPath()
      ctx.moveTo(50, 200)
      ctx.bezierCurveTo(100, 100, 200, 300, 250, 200)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-10-53-26.png)


# [README.md](./0026.%20ä½¿ç”¨%20ctx.ellipse%20ç»˜åˆ¶æ¤­åœ†/README.md)<!-- !======> SEPERATOR <====== -->
# [0026. ä½¿ç”¨ ctx.ellipse ç»˜åˆ¶æ¤­åœ†](https://github.com/Tdahuyou/canvas/tree/main/0026.%20%E4%BD%BF%E7%94%A8%20ctx.ellipse%20%E7%BB%98%E5%88%B6%E6%A4%AD%E5%9C%86)


<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1](#2--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary


- å­¦ä¼šä½¿ç”¨ ctx.ellipse ç»˜åˆ¶æ¤­åœ†ï¼Œå®ƒå’Œç»˜åˆ¶åœ†å¼§æ˜¯å¾ˆç±»ä¼¼çš„ã€‚
å¯ä»¥å¯¹æ¯”ç€åœ†å¼§ã€0024ã€‘çš„ç»˜åˆ¶åŸç†æ¥ç†è§£æ¤­åœ†çš„ç»˜åˆ¶ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ç»˜åˆ¶æ¤­åœ†</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      // ç»˜åˆ¶æ¤­åœ†çš„æ–¹æ³•ï¼š
      // ctx.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, counterclockwise)

      // x y è¡¨ç¤ºæ¤­åœ†ä¸­å¿ƒçš„åæ ‡ã€‚

      // radiusX radiusY æ¤­åœ†çš„ä¸»/æ¬¡åŠå¾„
      // ä¹Ÿå°±æ˜¯æ¤­åœ†çš„å®½åº¦/é«˜åº¦æ–¹å‘çš„åŠå¾„

      // rotation æ¤­åœ†çš„æ—‹è½¬è§’åº¦

      // startAngle/endAngle ç»˜åˆ¶æ¤­åœ†å¼§çš„èµ·å§‹/ç»“æŸè§’åº¦
      // è§’åº¦çš„è®¡ç®—ä»¥æ¤­åœ†çš„ä¸»è½´æ–¹å‘ä¸ºèµ·ç‚¹ã€‚ï¼ˆé»˜è®¤ 0 åº¦ï¼Œä¸‰ç‚¹é’Ÿ ğŸ•’ æ–¹å‘ã€‚ï¼‰

      // counterclockwise è¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šç»˜åˆ¶æ–¹å‘ã€‚
      // true  æŒ‰é€†æ—¶é’ˆæ–¹å‘ç»˜åˆ¶å¼§çº¿
      // false æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç»˜åˆ¶ï¼ˆé»˜è®¤å€¼ï¼‰

      // æ³¨æ„ï¼šä¼ é€’å‚æ•°æ—¶ï¼Œä¼ é€’çš„æ˜¯å¼§åº¦è€Œéè§’åº¦ã€‚

      ctx.beginPath()
      ctx.ellipse(200, 100, 100, 50, 0, 0, Math.PI * 2)
      // 200, 100        è¡¨ç¤ºæ¤­åœ†ä¸­å¿ƒçš„åæ ‡æ˜¯ (200, 100)
      // 100, 50         è¡¨ç¤ºæ¤­åœ†çš„ä¸»åŠå¾„æ˜¯ 100ï¼Œæ¬¡åŠå¾„æ˜¯ 50
      // 0               è¡¨ç¤ºæ¤­åœ†çš„æ—‹è½¬è§’åº¦æ˜¯ 0
      // 0 Math.PI * 2   è¡¨ç¤ºæ¤­åœ†å¼§çš„èµ·å§‹è§’åº¦æ˜¯ 0ï¼Œç»“æŸè§’åº¦æ˜¯ 2Ï€ï¼Œå³ 360Â°ã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„åœ†ã€‚
      ctx.stroke()

      ctx.beginPath()
      ctx.ellipse(100, 300, 100, 50, Math.PI / 2, 0, Math.PI * 2)
      // 100, 300        è¡¨ç¤ºæ¤­åœ†ä¸­å¿ƒçš„åæ ‡æ˜¯ (100, 300)
      // 100, 50         è¡¨ç¤ºæ¤­åœ†çš„ä¸»åŠå¾„æ˜¯ 100ï¼Œæ¬¡åŠå¾„æ˜¯ 50
      // Math.PI / 2     è¡¨ç¤ºæ¤­åœ†çš„æ—‹è½¬è§’åº¦æ˜¯ Ï€/2ï¼Œå³ 90Â°
      // 0 Math.PI * 2   è¡¨ç¤ºæ¤­åœ†å¼§çš„èµ·å§‹è§’åº¦æ˜¯ 0ï¼Œç»“æŸè§’åº¦æ˜¯ 2Ï€ï¼Œå³ 360Â°ã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„åœ†ã€‚
      ctx.stroke()

      ctx.beginPath()
      ctx.ellipse(350, 300, 100, 50, 0, 0, Math.PI / 2, true)
      // 350, 300        è¡¨ç¤ºæ¤­åœ†ä¸­å¿ƒçš„åæ ‡æ˜¯ (350, 300)
      // 100, 50         è¡¨ç¤ºæ¤­åœ†çš„ä¸»åŠå¾„æ˜¯ 100ï¼Œæ¬¡åŠå¾„æ˜¯ 50
      // 0               è¡¨ç¤ºæ¤­åœ†çš„æ—‹è½¬è§’åº¦æ˜¯ 0
      // 0 Math.PI / 2   è¡¨ç¤ºæ¤­åœ†å¼§çš„èµ·å§‹è§’åº¦æ˜¯ 0ï¼Œç»“æŸè§’åº¦æ˜¯ Ï€/2ï¼Œå³ 90Â°ã€‚
      //                 è¿™æ„å‘³ç€å¯èƒ½æ˜¯ä¸€ä¸ª 1/4 æˆ–è€… 3/4 çš„åœ†
      //                 å¦‚æœæŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘ç»˜åˆ¶ï¼Œé‚£ä¹ˆæ˜¯ 1/4 çš„åœ†
      //                 å¦‚æœæŒ‰ç…§é€†æ—¶é’ˆæ–¹å‘ç»˜åˆ¶ï¼Œé‚£ä¹ˆæ˜¯ 3/4 çš„åœ†
      // true            è¡¨ç¤ºæŒ‰ç…§é€†æ—¶é’ˆæ–¹å‘ç»˜åˆ¶å¼§çº¿
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-10-57-32.png)


# [README.md](./0027.%20ä½¿ç”¨%20ctx.arcTo%20ç»˜åˆ¶åœ†å¼§/README.md)<!-- !======> SEPERATOR <====== -->
# [0027. ä½¿ç”¨ ctx.arcTo ç»˜åˆ¶åœ†å¼§](https://github.com/Tdahuyou/canvas/tree/main/0027.%20%E4%BD%BF%E7%94%A8%20ctx.arcTo%20%E7%BB%98%E5%88%B6%E5%9C%86%E5%BC%A7)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1](#2--demo1)
- [3. ğŸ’» demo2](#3--demo2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- å­¦ä¼šä½¿ç”¨ `ctx.arcTo` ç»˜åˆ¶åœ†å¼§ã€‚
**éœ€è¦æ³¨æ„ï¼š**ä¼ å…¥çš„å‚æ•°å¹¶ä¸å†³å®šç»˜åˆ¶çš„çº¿æ¡çš„èµ·ç‚¹ or ç»ˆç‚¹ï¼Œè€Œä»…ä»…æ˜¯èµ·åˆ°å†³å®šåœ†å¼§å¼§åº¦çš„ä½œç”¨ã€‚
`ctx.arcTo` ç»˜åˆ¶åœ†å¼§æ¯”è¾ƒå¥‡æ€ªï¼Œä½ åªéœ€è¦é€šè¿‡æ§åˆ¶ç‚¹æè¿°å‡ºä¸€ä¸ªè§’å°±è¡Œï¼Œå®ƒè¿™ç©æ„å„¿ä¼šæ ¹æ®ä½ ç»™å®šçš„è§’å»ç»˜åˆ¶å¼§ï¼Œæœ€ç»ˆç»˜åˆ¶å‡ºæ¥çš„å¼§çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œå¹¶ä¸ä¸€å®šæ˜¯ä»ä½ çš„æ§åˆ¶ç‚¹å¼€å§‹çš„ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ arcTo æ–¹æ³•</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // #region è¾…åŠ©çº¿
      ctx.beginPath()
      ctx.moveTo(100, 100)
      ctx.lineTo(100, 300)
      ctx.lineTo(300, 300)
      ctx.stroke()

      ctx.beginPath()
      ctx.arc(200, 200, 100, 0, Math.PI * 2)
      ctx.stroke()
      // #endregion è¾…åŠ©çº¿

      // context.arcTo(x1, y1, x2, y2, radius)
      // ç”¨äºç»˜åˆ¶åœ†è§’è·¯å¾„ã€‚
      // å¸¸ç”¨äºç»˜åˆ¶å…·æœ‰ç‰¹å®šåŠå¾„çš„åœ†è§’ã€‚

      // ç¬¬ 1 ä¸ªç‚¹ï¼šmoveTo æŒ‡å®šçš„ç‚¹æˆ–è€…ä¸Šä¸€æ¬¡å›¾å½¢è·¯å¾„ç»“æŸçš„ç‚¹
      // ç¬¬ 2 ä¸ªç‚¹ï¼š(x1, y1)
      // ç¬¬ 3 ä¸ªç‚¹ï¼š(x2, y2)
      // ç”± 3 ä¸ªæ§åˆ¶ç‚¹å®ç°åœ†å¼§çš„ç»˜åˆ¶ã€‚
      // æŒ‰ç…§ 3 ä¸ªç‚¹çš„ä½ç½®ï¼Œè¿çº¿ï¼Œå½¢æˆä¸€ä¸ªå¤¹è§’ã€‚
      // ç»˜åˆ¶çš„åœ†å¼§ï¼Œä¸å¤¹è§’çš„ä¸¤æ¡è¾¹ç›¸åˆ‡ã€‚
      // æ ¹æ®æŒ‡å®šçš„åŠå¾„çš„ä¸åŒï¼Œç»˜åˆ¶å‡ºæ¥çš„åœ†å¼§ä¹Ÿä¸åŒã€‚

      // radius æŒ‡å®šäº†åœ†è§’çš„å¤§å°ï¼Œå³åœ†å¼§çš„åŠå¾„ã€‚
      // æ ¹æ® r ç»˜åˆ¶åœ†å¼§ï¼Œä¿è¯ä¸ä¸¤ä¸ªçº¿æ¡ç›¸åˆ‡ã€‚
      // æ³¨æ„ï¼šå¦‚æœ radius å€¼è¿‡å¤§ï¼Œæ— æ³•åŸºäºæä¾›çš„ç‚¹å’ŒåŠå¾„ç»˜åˆ¶åœ†è§’ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°†ä¸ç»˜åˆ¶åœ†å¼§ã€‚

      ctx.beginPath()
      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'
      ctx.moveTo(100, 200) // èµ·ç‚¹
      ctx.arcTo(100, 300, 200, 300, 100)
      // 100 300 è¡¨ç¤ºç¬¬ 1 ä¸ªæ§åˆ¶ç‚¹
      // 200 300 è¡¨ç¤ºç¬¬ 2 ä¸ªæ§åˆ¶ç‚¹
      // 100 è¡¨ç¤ºåœ†è§’çš„åŠå¾„
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-10-58-45.png)

## 3. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ arcTo æ–¹æ³•</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // #region è¾…åŠ©çº¿
      ctx.beginPath()
      ctx.moveTo(100, 100)
      ctx.lineTo(100, 300)
      ctx.lineTo(300, 300)
      ctx.stroke()

      ctx.beginPath()
      ctx.arc(200, 200, 100, 0, Math.PI * 2)
      ctx.stroke()
      // #endregion è¾…åŠ©çº¿

      ctx.beginPath()
      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'
      ctx.moveTo(100, 100) // èµ·ç‚¹åæ ‡
      ctx.arcTo(100, 300, 300, 300, 50)
      // 100 300 è¡¨ç¤ºç¬¬ 1 ä¸ªæ§åˆ¶ç‚¹
      // 300 300 è¡¨ç¤ºç¬¬ 2 ä¸ªæ§åˆ¶ç‚¹
      // 50 è¡¨ç¤ºåœ†è§’çš„åŠå¾„
      // æ³¨æ„ï¼šctx.arcTo è¿™ç©æ„å„¿ç»˜åˆ¶çš„æ˜¯åœ†å¼§
      // æ‰€ä»¥æœ€ç»ˆç»“æŸä½ç½®æ˜¯åœ¨åœ†å¼§çš„ç»ˆç‚¹ï¼Œè€Œéæ§åˆ¶ç‚¹ 2 æ‰€åœ¨çš„ä½ç½®ã€‚
      // æŠŠæ§åˆ¶ç‚¹ 2 çš„åæ ‡ç”± 300 300 æ”¹æˆ 101 300 æœ€ç»ˆç»˜åˆ¶çš„æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚
      // ctx.arcTo(100, 300, 101, 300, 50)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-10-58-53.png)


# [README.md](./0028.%20çŸ©å½¢è¾¹æ¡†æ—‹è½¬åŠ¨ç”»/README.md)<!-- !======> SEPERATOR <====== -->
# [0028. çŸ©å½¢è¾¹æ¡†æ—‹è½¬åŠ¨ç”»](https://github.com/Tdahuyou/canvas/tree/main/0028.%20%E7%9F%A9%E5%BD%A2%E8%BE%B9%E6%A1%86%E6%97%8B%E8%BD%AC%E5%8A%A8%E7%94%BB)


<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo1](#2--demo1)
<!-- endregion:toc -->

## 1. ğŸ“’ notes

å½“ä½ æƒ³è¦è®©çº¿æ¡æ²¿ç€ç»˜åˆ¶çš„è·¯å¾„åŠ¨èµ·æ¥çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥å°è¯•ä¸‹ `lineDashOffset`ã€‚

**åŸç†ï¼š**é€šè¿‡ä¸æ–­è®¾ç½®è™šçº¿çš„ä½ç§» `lineDashOffset` æ¥å®ç°çš„åŠ¨ç”»æ•ˆæœã€‚

`lineDashOffset` è™šçº¿çš„ä½ç§»ä¸ä»…ä½œç”¨äºç›´çº¿ä¸Šè¾¹ï¼Œåœ¨çŸ©å½¢è½®å»“ï¼Œå¼§å½¢è½®å»“ï¼Œåœ†å½¢è½®å»“ä¸Šéƒ½èƒ½å¤Ÿèµ·ä½œç”¨ã€‚å½“ä½ æƒ³è¦è®©çº¿æ¡æ²¿ç€ç»˜åˆ¶çš„è·¯å¾„åŠ¨èµ·æ¥çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥å°è¯•ä¸‹ `lineDashOffset`ã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ çŸ©å½¢è¾¹æ¡†æ—‹è½¬åŠ¨ç”»</title>
    <style>
      canvas {
        outline: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <div>
      <button id="start-move">å¼€å§‹è¿åŠ¨</button>
    </div>
    <script>
      const canvas = document.createElement('canvas')
      canvas.width = 400
      canvas.height = 400
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      ctx.lineWidth = 5
      ctx.strokeStyle = 'blue'
      ctx.setLineDash([10])

      function move() {
        ctx.clearRect(0, 0, 400, 400)
        ctx.beginPath()

        ctx.lineDashOffset -= 1
        // æ­£è´Ÿï¼šå¤§äº 0 é€†æ—¶é’ˆï¼Œå°äº 0 é¡ºæ—¶é’ˆ
        // ç»å¯¹å€¼ï¼šè¶Šå¤§æ—‹è½¬é€Ÿåº¦è¶Šå¿«

        ctx.rect(100, 100, 200, 200)
        ctx.stroke()

        requestAnimationFrame(move)
      }
      const startMove = document.getElementById('start-move')
      startMove.addEventListener('click', move)
    </script>
  </body>
</html>
```

![](md-imgs/çŸ©å½¢è¾¹æ¡†æ—‹è½¬åŠ¨ç”».gif)

# [README.md](./0029.%20çº¿æ¡ç©¿æ¢­åŠ¨ç”»/README.md)<!-- !======> SEPERATOR <====== -->
# [0029. çº¿æ¡ç©¿æ¢­åŠ¨ç”»](https://github.com/Tdahuyou/canvas/tree/main/0029.%20%E7%BA%BF%E6%9D%A1%E7%A9%BF%E6%A2%AD%E5%8A%A8%E7%94%BB)



<!-- region:toc -->
- [1. ğŸ“’ notes](#1--notes)
- [2. ğŸ’» demo1](#2--demo1)
<!-- endregion:toc -->


## 1. ğŸ“’ notes

å­¦ä¼šä½¿ç”¨ `lineDashOffset` æ¥è®¾ç½®çº¿æ¡çš„åŠ¨ç”»æ•ˆæœï¼Œç†è§£åŠ¨ç”»çš„å®ç°åŸç†ã€‚

é€šè¿‡ä¸æ–­è®¾ç½®è™šçº¿çš„ä½ç§» `lineDashOffset` æ¥å®ç°çš„åŠ¨ç”»æ•ˆæœã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ çº¿æ¡ç©¿æ¢­åŠ¨ç”»</title>
    <style>
      canvas {
        outline: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <div>
      <button id="start-move">å¼€å§‹è¿åŠ¨</button>
    </div>
    <script>
      const canvas = document.createElement('canvas')
      canvas.width = 400
      canvas.height = 400
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      // å¼€å§‹ä½ç½®çš„ç«–çº¿
      ctx.beginPath()
      ctx.moveTo(50, 100)
      ctx.lineTo(50, 200)
      ctx.stroke()

      // ç»“æŸä½ç½®çš„ç«–çº¿
      ctx.beginPath()
      ctx.moveTo(250, 100)
      ctx.lineTo(250, 200)
      ctx.stroke()

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'
      ctx.setLineDash([200]) // è®¾ç½®è™šçº¿é—´éš™ 200
      ctx.lineDashOffset = 200 // è®¾ç½®çº¿æ¡åç§»é‡ä¸º 200

      function move() {
        ctx.clearRect(50, 145, 200, 10) // å°†çº¿æ¡è¿åŠ¨è¿‡çš„è·¯å¾„ç»™æ¸…ç©º
        ctx.beginPath()
        ctx.lineDashOffset -= 2 // è°ƒèŠ‚è¿åŠ¨é€Ÿåº¦
        ctx.moveTo(50, 150)
        ctx.lineTo(250, 150) // çº¿æ®µçš„é•¿åº¦æ˜¯ 250 - 50 = 200
        ctx.stroke()

        if (ctx.lineDashOffset == -200) {
          // 200 åç§»é‡ä½œä¸ºä¸´ç•Œå€¼
          ctx.lineDashOffset = 200
        }
        requestAnimationFrame(move)
      }
      const startMove = document.getElementById('start-move')
      startMove.addEventListener('click', move)
    </script>
  </body>
</html>
```

![](md-imgs/çº¿æ¡ç©¿æ¢­åŠ¨ç”».gif)

# [README.md](./0030.%20æ¨¡æ‹Ÿè¿›åº¦æ¡åŠ¨ç”»æ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0030. æ¨¡æ‹Ÿè¿›åº¦æ¡åŠ¨ç”»æ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0030.%20%E6%A8%A1%E6%8B%9F%E8%BF%9B%E5%BA%A6%E6%9D%A1%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ notes](#2--notes)
- [3. ğŸ’» demo1](#3--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- å­¦ä¼šä½¿ç”¨ `lineDashOffset` æ¥è®¾ç½®çº¿æ¡çš„åŠ¨ç”»æ•ˆæœã€‚

## 2. ğŸ“’ notes

å¦‚æœçº¿æ¡æ¯æ¬¡åç§»ï¼ˆå³ï¼Œæ”¹å˜ `ctx.lineDashOffset`ï¼‰çš„æ—¶å€™ï¼Œæ²¡æœ‰æ¸…ç©ºç”»å¸ƒçš„è¯ï¼Œé‚£ä¹ˆçº¿æ¡ä¹‹å‰çš„è¿åŠ¨è½¨è¿¹å°†ä¿ç•™åœ¨ç•Œé¢ä¸Šã€‚æ­¤æ—¶çœ‹èµ·æ¥å°±æœ‰äº›ç±»ä¼¼äºè¿›åº¦æ¡åŠ è½½çš„æ•ˆæœã€‚

## 3. ğŸ’» demo1

```html
<!-- 1.html -->
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <button id="start-move">å¼€å§‹åŠ¨ç”»</button>
    </div>

    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      ctx.lineWidth = 10
      ctx.strokeStyle = 'red'

      ctx.beginPath()
      ctx.moveTo(50, 100)
      ctx.lineTo(450, 100)
      ctx.stroke()

      ctx.beginPath()
      ctx.setLineDash([400])
      ctx.lineDashOffset = 400
      ctx.moveTo(50, 200)
      ctx.lineTo(450, 200)
      ctx.stroke()

      function move() {
        ctx.lineDashOffset--
        console.log(ctx.lineDashOffset)
        // é€šè¿‡ä¸æ–­æ”¹å˜ lineDashOffset çš„å€¼ï¼Œå®ç°åŠ¨ç”»æ•ˆæœã€‚
        ctx.stroke()

        if (ctx.lineDashOffset > 0) {
          requestAnimationFrame(move)
        }
      }
      const startMoveBtn = document.getElementById('start-move')
      startMoveBtn.addEventListener('click', move)
    </script>
  </body>
</html>
```

ç‚¹å‡»ã€å¼€å§‹è¿åŠ¨ã€‘æŒ‰é’®åï¼Œè¿›åº¦æ¡ä¼šä»èµ·ç‚¹åŠ è½½åˆ°ç»ˆç‚¹ã€‚

![](md-imgs/2024-10-04-11-03-20.png)

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](md-imgs/æ¨¡æ‹Ÿè¿›åº¦æ¡åŠ¨ç”»æ•ˆæœ.gif)


# [README.md](./0031.%20ä½¿ç”¨%20ctx.clip%20å®ç°å›¾åƒè£å‰ª/README.md)<!-- !======> SEPERATOR <====== -->
# [0031. ä½¿ç”¨ ctx.clip å®ç°å›¾åƒè£å‰ª](https://github.com/Tdahuyou/canvas/tree/main/0031.%20%E4%BD%BF%E7%94%A8%20ctx.clip%20%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E8%A3%81%E5%89%AA)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. â° todos](#2--todos)
- [3. ğŸ”— links](#3--links)
- [4. ğŸ“’ notes](#4--notes)
- [5. ğŸ‘¨â€ğŸ« ææ‡‚ SVG/Canvas ä¸­ nonzero å’Œ evenodd å¡«å……è§„åˆ™](#5--ææ‡‚-svg/canvas-ä¸­-nonzero-å’Œ-evenodd-å¡«å……è§„åˆ™)
  - [5.1. å¡«å……æœ‰ä¸¤ç§è§„åˆ™](#51-å¡«å……æœ‰ä¸¤ç§è§„åˆ™)
  - [5.2. ä¸€åˆ‡éƒ½æ˜¯äº¤å‰ç‚¹ä»¬çš„é€‰æ‹©](#52-ä¸€åˆ‡éƒ½æ˜¯äº¤å‰ç‚¹ä»¬çš„é€‰æ‹©)
  - [5.3. å•¦å•¦å•¦ï¼Œç»“æŸè¯­](#53-å•¦å•¦å•¦ç»“æŸè¯­)
- [6. ğŸ’» demo1 - è£å‰ªè±å½¢](#6--demo1---è£å‰ªè±å½¢)
- [7. ğŸ’» demo2 - è£å‰ªåœ†å½¢](#7--demo2---è£å‰ªåœ†å½¢)
- [8. ğŸ’» demo3 - ç†è§£ fillRule](#8--demo3---ç†è§£-fillrule)
- [9. ğŸ’» demo4 - é—®é¢˜è®°å½•](#9--demo4---é—®é¢˜è®°å½•)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ctx.clip çš„åŸºæœ¬ä½¿ç”¨æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯å¡«å……è§„åˆ™ä¸å¤ªå¥½ç†è§£ï¼Œå¹¶ä¸”æš‚æ—¶ä¹Ÿè¿˜ä¸æ¸…æ¥šå¡«å……è§„åˆ™æœ‰ä½•å®é™…çš„åº”ç”¨åœºæ™¯â€¦â€¦

## 2. â° todos

- [ ] åœ¨è¿™ç¯‡æ–‡ç« çš„æœ€åä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œå­˜åœ¨ä¸ªé—®é¢˜è¿˜æ²¡ç†è§£ã€‚

## 3. ğŸ”— links

- https://www.zhangxinxu.com/wordpress/2018/10/nonzero-evenodd-fill-mode-rule/ - ææ‡‚SVG/Canvasä¸­nonzeroå’Œevenoddå¡«å……è§„åˆ™ Â« å¼ é‘«æ—­-é‘«ç©ºé—´-é‘«ç”Ÿæ´»ã€‚
- https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/clip - MDN - CanvasRenderingContext2Dï¼šclip() æ–¹æ³•
- https://en.wikipedia.org/wiki/Even%E2%80%93odd_rule - Wiki - Evenâ€“odd rule
- https://en.wikipedia.org/wiki/Nonzero-rule - Wiki - Nonzero-rule

## 4. ğŸ“’ notes

`ctx.clip` ç”¨æ¥è£å‰ªå›¾åƒï¼Œéš¾ç‚¹åœ¨äºç†è§£å¡«å……è§„åˆ™ã€‚

ä¸‹é¢æˆªå›¾æ˜¯æ¥è‡ª wiki ä¸­å¯¹äº Evenâ€“odd rule çš„è§£é‡Šã€‚

![](md-imgs/2024-10-04-11-07-34.png)

å½“ç”»å¸ƒä¸Šå‡ºç°å¤šä¸ªé—­åˆè·¯å¾„çš„æ—¶å€™ï¼ŒåŒºåˆ†å“ªäº›åŒºåŸŸæ˜¯æœ‰æ•ˆåŒºåŸŸã€‚

## 5. ğŸ‘¨â€ğŸ« ææ‡‚ SVG/Canvas ä¸­ nonzero å’Œ evenodd å¡«å……è§„åˆ™

> æ³¨ï¼šä»¥ä¸‹ä¸ºæ¬è¿å†…å®¹ï¼

### 5.1. å¡«å……æœ‰ä¸¤ç§è§„åˆ™

![](md-imgs/2024-10-04-11-30-30.png)

åªè¦æ˜¯è·¯å¾„å¡«å……ï¼Œéƒ½æœ‰ä¸¤ç§è§„åˆ™ï¼Œnonzeroå’Œevenoddï¼Œæ— è®ºæ˜¯SVGä¸­çš„è·¯å¾„å¡«å……ï¼Œè¿˜æ˜¯Canvasä¸­çš„è·¯å¾„å¡«å……ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–å’Œè·¯å¾„ç›¸å…³çš„æŠ€æœ¯ï¼ˆç”šè‡³è®¾è®¡è½¯ä»¶ï¼‰ï¼Œä¹Ÿç¦»ä¸å¼€è¿™ä¸¤ç§å¡«å……è§„åˆ™ã€‚

æ¢å¥è¯è¯´ï¼Œè¿™æ˜¯è¶…è¶Šå„ç§è¯­è¨€ï¼Œæ™®ä¸–é€šç”¨çš„æŠ€èƒ½ç‚¹ã€‚

ä¸‹é¢ï¼Œçœ‹çœ‹æˆ‘èƒ½ä¸èƒ½ç”¨è¶³å¤Ÿç²¾ç®€çš„è¯­è¨€ï¼Œå°½å¯èƒ½è®©å¤§å®¶éƒ½ææ‡‚è¿™ä¸¤ç§è·¯å¾„å¡«å……è§„åˆ™ã€‚

å¦‚æœæˆ‘ä»¬ç”¨3ä¸ªç‚¹ï¼Œè¿æˆä¸€ä¸ªä¸‰è§’å½¢ï¼Œåˆ™è¿™ä¸¤ç§å¡«å……è§„åˆ™æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå¦‚ä¸‹å¯¹æ¯”ï¼ˆCanvasè¯­æ³•ä¸¾ä¾‹ï¼ŒJSå®æ—¶æ¸²æŸ“ï¼Œå¦‚æœæ— æ•ˆæœï¼Œè¯·[è®¿é—®åŸæ–‡](https://www.zhangxinxu.com/wordpress/?p=8043)ï¼‰ã€‚

| nonzeroï¼ˆé»˜è®¤ï¼‰                      | evenodd                              |
| ------------------------------------ | ------------------------------------ |
| ![](md-imgs/2024-10-04-11-30-48.png) | ![](md-imgs/2024-10-04-11-30-48.png) |


å¦‚æœæ˜¯ä¸¤ä¸ªä¸‰è§’å½¢ï¼Œå¹¶ä¸”å‘ç”Ÿé‡å ï¼Œå·®å¼‚å°±å‡ºç°äº†ï¼Œå¦‚ä¸‹ï¼š

| nonzeroï¼ˆé»˜è®¤ï¼‰                      | evenodd                              |
| ------------------------------------ | ------------------------------------ |
| ![](md-imgs/2024-10-04-11-31-10.png) | ![](md-imgs/2024-10-04-11-31-16.png) |


ç©¶ç«Ÿæ˜¯å¦‚ä½•ä½œç”¨çš„å‘¢ï¼Ÿä¸”çœ‹~

### 5.2. ä¸€åˆ‡éƒ½æ˜¯äº¤å‰ç‚¹ä»¬çš„é€‰æ‹©

å¡«å……è§„åˆ™çš„å…³é”®ï¼Œå°±æ˜¯ç¡®å®šå¤æ‚è·¯å¾„æ„æˆçš„å›¾å½¢ï¼Œå“ªäº›æ˜¯å†…éƒ¨ï¼Œå“ªäº›æ˜¯å¤–éƒ¨ã€‚å†…éƒ¨åˆ™å¡«å……ï¼Œå¤–éƒ¨åˆ™é€æ˜ã€‚

â€œnonzeroè§„åˆ™â€é¡¾åæ€æ„å°±æ˜¯â€œéé›¶è§„åˆ™â€ï¼Œç”¨é€šä¿—çš„è¯è®²ï¼Œå°±ç®—è®¡ç®—æŸäº›ä¸œè¥¿æ˜¯ä¸æ˜¯`0`ï¼Œå¦‚æœä¸æ˜¯`0`åˆ™å†…éƒ¨ï¼Œå¡«å……ï¼›å¦‚æœæ˜¯`0`åˆ™å¤–éƒ¨ï¼Œä¸å¡«å……ã€‚

â€œevenoddè§„åˆ™â€é¡¾åæ€æ„å°±æ˜¯â€œå¥‡å¶è§„åˆ™â€ï¼Œç”¨é€šä¿—çš„è¯è®²ï¼Œå°±ç®—è®¡ç®—æŸäº›ä¸œè¥¿æ˜¯ä¸æ˜¯å¥‡æ•°ï¼Œå¦‚æœæ˜¯æ˜¯å¥‡æ•°åˆ™å†…éƒ¨ï¼Œå¡«å……ï¼›å¦‚æœæ˜¯å¶æ•°åˆ™å¤–éƒ¨ï¼Œä¸å¡«å……ã€‚

ä¸‹é¢å…³é”®æ¥äº†ï¼Œè¿™é‡Œçš„â€œè®¡ç®—æŸäº›ä¸œè¥¿â€ç©¶ç«Ÿè®¡ç®—çš„æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ

nonzeroè§„åˆ™å’Œevenoddè§„åˆ™è®¡ç®—çš„ä¸œè¥¿è¿˜ä¸ä¸€æ ·ï¼Œnonzeroæ˜¯è®¡ç®—é¡ºæ—¶é’ˆé€†æ—¶é’ˆæ•°é‡ï¼Œevenoddæ˜¯äº¤å‰è·¯å¾„æ•°é‡ã€‚

---

ä¸ºäº†ç¤ºæ„æ›´åŠ ç›´è§‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæœ¬æ–‡ç¤ºæ„çš„ä¸‰è§’è·¯å¾„æ–¹å‘å’Œåºå·æ ‡è®°ä¸‹ï¼Œå¦‚ä¸‹è¡¨ï¼š

| nonzeroï¼ˆé»˜è®¤ï¼‰                      | evenodd                              |
| ------------------------------------ | ------------------------------------ |
| ![](md-imgs/2024-10-04-11-31-44.png) | ![](md-imgs/2024-10-04-11-31-51.png) |


æ¥ä¸‹æ¥ï¼Œé«˜èƒ½æ¥äº†â€¦â€¦

---

æˆ‘ä»¬è¦åˆ¤æ–­æŸä¸€ä¸ªåŒºåŸŸæ˜¯è·¯å¾„å†…è¿˜æ˜¯è·¯å¾„å¤–ï¼Œå¾ˆç®€å•ï¼Œåœ¨è¿™ä¸ªåŒºåŸŸå†…ä»»æ„æ‰¾ä¸€ä¸ªç‚¹ï¼Œç„¶åä»¥è¿™ä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼Œå‘å°„ä¸€æ¡æ— é™é•¿çš„å°„çº¿ï¼Œç„¶åâ€”â€”

- å¯¹äºnonzeroè§„åˆ™ï¼šèµ·å§‹å€¼ä¸º0ï¼Œå°„çº¿ä¼šå’Œè·¯å¾„ç›¸äº¤ï¼Œå¦‚æœè·¯å¾„æ–¹å‘å’Œå°„çº¿æ–¹å‘å½¢æˆçš„æ˜¯é¡ºæ—¶é’ˆæ–¹å‘åˆ™+1ï¼Œå¦‚æœæ˜¯é€†æ—¶é’ˆæ–¹å‘åˆ™-1ï¼Œæœ€åå¦‚æœæ•°å€¼ä¸º0ï¼Œåˆ™æ˜¯è·¯å¾„çš„å¤–éƒ¨ï¼›å¦‚æœä¸æ˜¯0ï¼Œåˆ™æ˜¯è·¯å¾„çš„å†…éƒ¨ï¼Œå› æ­¤è¢«ç§°ä¸ºâ€œé0è§„åˆ™â€ã€‚

ä¸€å›¾èƒœåƒè¨€ï¼š

![](md-imgs/2024-10-04-11-32-09.png)

ä¾‹å¦‚ä¸Šå›¾ç‚¹Aï¼Œæˆ‘ä»¬éšä¾¿å‘å‡ºä¸€æ¡å°„çº¿ï¼Œç»“æœç»è¿‡äº†è·¯å¾„5å’Œè·¯å¾„2ï¼Œæˆ‘ä»¬é¡ºç€è·¯å¾„å‰è¿›æ–¹å‘å’Œå°„çº¿å‰è¿›æ–¹å‘ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåˆå¹¶åçš„è¿åŠ¨æ–¹å‘éƒ½æ˜¯é€†æ—¶é’ˆï¼Œé€†æ—¶é’ˆæ–¹å‘-1ï¼Œå› æ­¤ï¼Œæœ€åè®¡ç®—å€¼æ˜¯-2ï¼Œä¸æ˜¯0ï¼Œå› æ­¤ï¼Œæ˜¯å†…éƒ¨ï¼Œfillæ—¶å€™å¯ä»¥è¢«å¡«å……ã€‚

å†çœ‹å¤–éƒ¨çš„ä¾‹å­ï¼Œä¸€å›¾èƒœåƒè¨€+1ï¼š

![](md-imgs/2024-10-04-11-32-17.png)

ç‚¹Bå†å‘å‡ºä¸€æ¡å°„çº¿ï¼Œç»è¿‡ä¸¤æ¡è·¯å¾„ç‰‡æ®µï¼Œä¸ºè·¯å¾„2å’Œè·¯å¾„3ï¼Œæˆ‘ä»¬é¡ºç€è·¯å¾„å‰è¿›æ–¹å‘å’Œå°„çº¿å‰è¿›æ–¹å‘ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåˆå¹¶åçš„è¿åŠ¨æ–¹å‘ä¸€ä¸ªæ˜¯é€†æ—¶é’ˆï¼Œ-1ï¼Œä¸€ä¸ªæ˜¯é¡ºæ—¶é’ˆï¼Œ+1ï¼Œå› æ­¤ï¼Œæœ€åçš„è®¡ç®—å€¼æ˜¯0ï¼Œæ˜¯å¤–éƒ¨ï¼Œå› æ­¤ï¼Œä¸è¢«å¡«å……ã€‚

+ å¯¹äºevenoddè§„åˆ™ï¼šèµ·å§‹å€¼ä¸º0ï¼Œå°„çº¿ä¼šå’Œè·¯å¾„ç›¸äº¤ï¼Œæ¯äº¤å‰ä¸€æ¡è·¯å¾„ï¼Œæˆ‘ä»¬è®¡æ•°å°±+1ï¼Œæœ€åçœ‹æˆ‘ä»¬çš„æ€»è®¡ç®—æ•°å€¼ï¼Œå¦‚æœæ˜¯å¥‡æ•°ï¼Œåˆ™è®¤ä¸ºæ˜¯è·¯å¾„å†…éƒ¨ï¼Œå¦‚æœæ˜¯å¶æ•°ï¼Œåˆ™è®¤ä¸ºæ˜¯è·¯å¾„å¤–éƒ¨ã€‚

ä¸€å›¾èƒœåƒè¨€+2ï¼š

![](md-imgs/2024-10-04-11-32-26.png)

ä¾‹å¦‚ä¸Šå›¾ç‚¹Aï¼Œæˆ‘ä»¬éšä¾¿å‘å‡ºä¸€æ¡å°„çº¿ï¼Œç»“æœç»è¿‡äº†è·¯å¾„5å’Œè·¯å¾„2ï¼Œäº¤å‰çš„è·¯å¾„ä¸ªæ•°ä¸º2ï¼Œæ˜¯å¶æ•°ï¼Œå› æ­¤ï¼Œå±äºè·¯å¾„å¤–ï¼Œä¸å¡«å……ã€‚

ä¸€å›¾èƒœåƒè¨€+3ï¼š

![](md-imgs/2024-10-04-11-32-36.png)

ç‚¹Bå†å‘å‡ºä¸€æ¡å°„çº¿ï¼Œç»è¿‡è·¯å¾„ç‰‡æ®µè·¯å¾„2å’Œè·¯å¾„3ï¼Œäº¤å‰çš„è·¯å¾„ä¸ªæ•°ä¸º2ï¼Œæ˜¯å¶æ•°ï¼Œå› æ­¤ï¼Œä¹Ÿå±äºè·¯å¾„å¤–ï¼Œä¸å¡«å……ã€‚

ä¸€å›¾èƒœåƒè¨€+4ï¼š

![](md-imgs/2024-10-04-11-32-44.png)

æœ€åè¿™ä¸ªç‚¹Cï¼Œå‘å‡ºçš„å°„çº¿æ€»å…±å’Œ3ä¸ªè·¯å¾„äº¤å‰ï¼Œæ˜¯å¥‡æ•°ã€‚å› æ­¤ï¼Œå±äºè·¯å¾„å†…ï¼Œå¡«å……ã€‚

### 5.3. å•¦å•¦å•¦ï¼Œç»“æŸè¯­

ä¸çŸ¥å¤§å®¶ææ‡‚æ²¡ï¼Ÿ

![](md-imgs/2024-10-04-11-32-52.png)

## 6. ğŸ’» demo1 - è£å‰ªè±å½¢

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // ä½¿ç”¨ ctx.clip() æ–¹æ³•è®¾ç½®è£å‰ªåŒºåŸŸã€‚
      // æ¥ä¸‹æ¥ç»˜åˆ¶çš„å›¾å½¢åªä¼šåœ¨è£å‰ªè·¯å¾„ä¸­å±•ç¤ºã€‚
      // åœ¨æŒ‡å®šè£å‰ªåŒºåŸŸä¹‹å‰ç»˜åˆ¶çš„å›¾å½¢ä¸ä¼šå—åˆ°å½±å“ã€‚

      // æ³¨æ„ï¼šè£å‰ªçš„æ—¶å€™æ˜¯å…ˆæŒ‡å®šè£å‰ªåŒºåŸŸå†ç»˜åˆ¶å›¾å½¢ã€‚

      // ç»˜åˆ¶ä¸€ä¸ªè“è‰²çŸ©å½¢ã€‚
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()
        ctx.fillStyle = 'blue'
        ctx.fillRect(100, 100, 200, 200)
      }

      // ä»ä¸€ä¸ªè“è‰²çš„çŸ©å½¢ä¸­è£å‰ªå‡ºä¸€ä¸ªè±å½¢ã€‚
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        // è±å½¢è£å‰ªåŒºåŸŸ
        ctx.beginPath()
        ctx.moveTo(100, 200)
        ctx.lineTo(200, 100)
        ctx.lineTo(300, 200)
        ctx.lineTo(200, 300)
        ctx.closePath()
        ctx.clip()

        // ä¸‹é¢ç»˜åˆ¶çš„çŸ©å½¢ï¼Œåªæœ‰åœ¨ä¸Šè¿°è±å½¢ä¸­çš„é‚£ä¸€éƒ¨åˆ†åŒºåŸŸä¼šæ­£å¸¸å±•ç¤ºã€‚
        ctx.beginPath()
        ctx.fillStyle = 'blue'
        ctx.fillRect(100, 100, 200, 200)
      }

    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-34-27.png)

## 7. ğŸ’» demo2 - è£å‰ªåœ†å½¢

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')
        const img = new Image()
        img.src = './week.png'
        img.onload = function () {
          ctx.drawImage(img, -200, -10)
        }
      }

      // è£å‰ªå‡º week çš„å¤´åƒ
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        const img = new Image()
        img.src = './week.png'
        img.onload = function () {
          ctx.beginPath()
          ctx.arc(200, 200, 100, 0, Math.PI * 2)
          ctx.clip()

          ctx.drawImage(img, -200, -10)
        }
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-34-35.png)

## 8. ğŸ’» demo3 - ç†è§£ fillRule

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // ctx.clip æ–¹æ³•è¿˜å¯ä»¥ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè£å‰ªè·¯å¾„çš„å¡«å……è§„åˆ™ï¼ˆfillRuleï¼‰ã€‚

      // ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦å¡«å……è§„åˆ™ï¼ˆfillRuleï¼‰ï¼Ÿ
      // å› ä¸ºåœ¨ç»˜åˆ¶è£å‰ªè·¯å¾„çš„æ—¶å€™ï¼Œæœ‰äº›è·¯å¾„åŒºåŸŸå¯èƒ½ä¼šè¢«é‡å¤åŒ…å«ã€‚

      // å¡«å……è§„åˆ™ï¼ˆfillRuleï¼‰ï¼š
      // nonzero  éé›¶ç¯ç»•è·¯å¾„ï¼ˆé»˜è®¤å€¼ï¼‰
      // evenodd  å¥‡å¶ç¯ç»•è·¯å¾„

      // æœ¬æ–‡çš„ä¸¤ä¸ªç¤ºä¾‹ï¼Œå¦‚æœä¸ç†è§£çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹é¢ ğŸ‘‡ çš„æ¨èæ–‡ç« ã€‚

      // æ¨èæ–‡ç« ï¼š
      // https://www.zhangxinxu.com/wordpress/2018/10/nonzero-evenodd-fill-mode-rule/
      // ææ‡‚SVG/Canvasä¸­nonzeroå’Œevenoddå¡«å……è§„åˆ™
      // â€”â€” å¼ é‘«æ—­

      // nonzero ç¤ºä¾‹
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.lineWidth = 5
        ctx.fillStyle = '#2d66bd'
        ctx.strokeStyle = '#e83727'

        ctx.beginPath()
        ctx.moveTo(100, 100)
        ctx.lineTo(350, 150)
        ctx.lineTo(225, 400)
        ctx.lineTo(100, 100)
        ctx.lineTo(220, 50)
        ctx.lineTo(360, 360)
        ctx.lineTo(100, 100)
        ctx.clip('nonzero')
        // nonzero æ˜¯é»˜è®¤å€¼ï¼Œå› æ­¤ ctx.clip() ä¸ä¼ é€’å‚æ•°æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœã€‚

        ctx.fillRect(0, 0, canvas.width, canvas.height)
        ctx.stroke()
      }

      // evenodd ç¤ºä¾‹
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.lineWidth = 5
        ctx.fillStyle = '#2d66bd'
        ctx.strokeStyle = '#e83727'

        ctx.beginPath()
        ctx.moveTo(100, 100)
        ctx.lineTo(350, 150)
        ctx.lineTo(225, 400)
        ctx.lineTo(100, 100)
        ctx.lineTo(220, 50)
        ctx.lineTo(360, 360)
        ctx.lineTo(100, 100)
        ctx.clip('evenodd')

        ctx.fillRect(0, 0, canvas.width, canvas.height)
        ctx.stroke()
      }

    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-34-46.png)

## 9. ğŸ’» demo4 - é—®é¢˜è®°å½•

```html
<!-- 4.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // è¢«è£å‰ªçš„å‚è€ƒå›¾åƒã€‚
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()
        ctx.fillRect(0, 0, canvas.width, canvas.height)
      }

      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()
        ctx.arc(150, 150, 100, 0, Math.PI * 2, false) // é¡ºæ—¶é’ˆ
        ctx.arc(300, 150, 100, 0, Math.PI * 2, false) // é¡ºæ—¶é’ˆ
        ctx.arc(225, 250, 100, 0, Math.PI * 2, false) // é¡ºæ—¶é’ˆ
        ctx.clip('nonzero')

        ctx.fillRect(0, 0, canvas.width, canvas.height)
      }

      /*
      é—®é¢˜ï¼š
      æš‚æ—¶è¿˜ä¸ç†è§£ä¸ºä»€ä¹ˆæœ€ç»ˆæ¸²æŸ“å‡ºæ¥çš„å›¾åƒã€‚
      */
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()
        ctx.arc(150, 150, 100, 0, Math.PI * 2, false) // é¡ºæ—¶é’ˆ
        ctx.arc(300, 150, 100, 0, Math.PI * 2, true) //  é€†æ—¶é’ˆ
        ctx.arc(225, 250, 100, 0, Math.PI * 2, false) // é¡ºæ—¶é’ˆ
        ctx.clip('nonzero')

        ctx.fillRect(0, 0, canvas.width, canvas.height)
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-34-53.png)

# [README.md](./0032.%20ä½¿ç”¨%20ctx.createPattern%20åˆ›å»ºå¡«å……å›¾æ¡ˆ/README.md)<!-- !======> SEPERATOR <====== -->
# [0032. ä½¿ç”¨ ctx.createPattern åˆ›å»ºå¡«å……å›¾æ¡ˆ](https://github.com/Tdahuyou/canvas/tree/main/0032.%20%E4%BD%BF%E7%94%A8%20ctx.createPattern%20%E5%88%9B%E5%BB%BA%E5%A1%AB%E5%85%85%E5%9B%BE%E6%A1%88)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1](#4--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- ç†è§£ ctx.createPattern çš„å¡«å……æœºåˆ¶ã€‚
éœ€è¦æ³¨æ„ **å¡«å……çš„å›¾æ¡ˆæ˜¯ç¦æ­¢çš„ï¼Œå¹¶ä¸ä¼šéšç€æˆ‘ä»¬ç»˜åˆ¶çš„å›¾æ¡ˆè€Œç§»åŠ¨ã€‚**

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createPattern - MDN - CanvasRenderingContext2D: createPattern() method

## 3. ğŸ“’ notes

ctx.createPattern é‡ç‚¹åœ¨äºç†è§£å¡«å……çš„æœºåˆ¶ï¼Œè¿™å¯èƒ½å’Œä½ å¸¸è§„å°è±¡ä¸­çš„å¡«å……æœºåˆ¶ä¸ä¸€æ ·ã€‚**å¡«å……çš„å›¾æ¡ˆæ˜¯ç¦æ­¢çš„ï¼Œå¹¶ä¸ä¼šéšç€æˆ‘ä»¬ç»˜åˆ¶çš„å›¾æ¡ˆè€Œç§»åŠ¨ã€‚**æˆ‘ä»¬åœ¨ä½¿ç”¨å¡«å……çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æŒ‡å®šå“ªä¸€å—åŒºåŸŸå¯ä»¥çœ‹åˆ°å·²ç»å‡†å¤‡å¥½çš„å¡«å……å›¾æ¡ˆã€‚å¦‚æœè¿™å—åŒºåŸŸçœ‹ä¸åˆ°å¡«å……å›¾æ¡ˆçš„è¯ï¼Œé‚£ä¹ˆå¡«å……çœ‹èµ·æ¥å°±æ˜¯æ— æ•ˆçš„ã€‚

## 4. ğŸ’» demo1

```html
<!-- 1.html -->
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        display: block;
        border: 1px solid #ccc;
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // æå‰åˆ›å»ºå¥½ä¸€ä¸ªè±å½¢ï¼Œä½œä¸ºå¡«å……ç´ æã€‚
      let rhombus
      {
        rhombus = document.createElement('canvas')
        rhombus.width = 50
        rhombus.height = 50
        document.body.append(rhombus)
        const ctx1 = rhombus.getContext('2d')

        ctx1.moveTo(0, rhombus.width / 2)
        ctx1.lineTo(rhombus.height / 2, 0)
        ctx1.lineTo(rhombus.height, rhombus.width / 2)
        ctx1.lineTo(rhombus.height / 2, rhombus.width)
        ctx1.closePath()
        ctx1.fill()
      }
      // const pattern = ctx.createPattern(imgSource, repetition)
      // ç”¨äºåˆ›å»ºä¸€ä¸ªå›¾æ¡ˆæ¥å¡«å……å›¾å½¢ã€‚

      // imgSource è¡¨ç¤ºå›¾åƒæº
      // repetition è¡¨ç¤ºé‡å¤æœºåˆ¶

      // åˆ›å»ºçš„å›¾æ¡ˆ pattern å¯ä»¥ä½œä¸ºå¡«å……èƒŒæ™¯æˆ–æè¾¹èƒŒæ™¯ã€‚
      // ctx.fillStyle = pattern
      // ctx.strokeStyle = pattern

      // æ³¨æ„ï¼š
      // 1. pattern æ˜¯åŸºäºç”»å¸ƒåæ ‡ç³»çš„åŸç‚¹å¼€å§‹è®¡ç®—çš„ï¼Œç»å¯¹ä½ç½®ï¼Œå¹¶ä¸ä¼šéšç€å›¾å½¢çš„ç§»åŠ¨è€Œå‘ç”Ÿå˜åŒ–ã€‚
      // 2. ctx.lineWidth è¿™ç©æ„å„¿è®¾ç½®çš„æè¾¹å®½åº¦ï¼Œä½œç”¨åˆ°å›¾å½¢ä¸Šæ—¶ï¼Œåˆ†åˆ«å‘ä¸¤ä¾§æ‰©æ•£ lineWidth / 2 çš„è·ç¦»ã€‚

      // ä¸€ã€å¡«å……æ•´ä¸ªç”»å¸ƒ
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()

        const pattern = ctx.createPattern(rhombus, 'repeat')
        // ä½¿ç”¨ rhombus æ¥åˆ›å»ºä¸€ä¸ªå¡«å……å›¾æ¡ˆ pattern
        // repeat è¡¨ç¤ºå¡«å……æ•´ä¸ªç”»å¸ƒ

        ctx.fillStyle = pattern
        // å°† pattern è®¾ç½®ä¸ºå¡«å……æ ·å¼

        ctx.rect(0, 0, canvas.width, canvas.height)
        ctx.fill()
      }

      // äºŒã€å¡«å…… x è½´
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()

        const pattern = ctx.createPattern(rhombus, 'repeat-x')
        // repeat-x è¡¨ç¤ºå¡«å…… x è½´

        ctx.fillStyle = pattern
        ctx.rect(0, 0, canvas.width, canvas.height)
        ctx.fill()
      }

      // ä¸‰ã€å¡«å…… y è½´
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()

        const pattern = ctx.createPattern(rhombus, 'repeat-y')
        // repeat-y è¡¨ç¤ºå¡«å…… y è½´

        ctx.fillStyle = pattern
        ctx.rect(0, 0, canvas.width, canvas.height)
        ctx.fill()
      }

      // å››ã€å¡«å……æŒ‡å®šåŒºåŸŸ
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()

        const pattern = ctx.createPattern(rhombus, 'repeat')
        ctx.fillStyle = pattern

        ctx.rect(100, 100, 100, 100)
        ctx.fill()

        ctx.beginPath()
        ctx.rect(75, 300, 100, 100)
        ctx.fill()
      }

      // äº”ã€å¡«å……æè¾¹åŒºåŸŸ
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 500, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()

        const pattern = ctx.createPattern(rhombus, 'repeat')
        ctx.strokeStyle = pattern

        ctx.beginPath()
        ctx.lineWidth = 100
        ctx.rect(100, 100, 300, 300)
        ctx.stroke()
      }
    </script>
  </body>
</html>
```

é¦–å…ˆç»˜åˆ¶äº†ä¸€ä¸ªè±å½¢çš„ iconï¼Œè¿™ä¸ª icon ç”¨äºåç»­çš„å¡«å……ç´ æã€‚

ç„¶åä¸€å…±ç»˜åˆ¶äº† 5 ä¸ªç¤ºä¾‹ï¼Œå¯æŒ¨ä¸ªå±•å¼€ä»£ç å—æŸ¥çœ‹é€»è¾‘ã€‚

ä¸‹é¢æ˜¯æ‰€æœ‰ç¤ºä¾‹æ±‡æ€»çš„æœ€ç»ˆæ•ˆæœã€‚

![](md-imgs/2024-10-04-11-37-37.png)


# [README.md](./0033.%20ä½¿ç”¨%20ctx.drawImage%20ç»˜åˆ¶è§†é¢‘å›¾åƒ/README.md)<!-- !======> SEPERATOR <====== -->
# [0033. ä½¿ç”¨ ctx.drawImage ç»˜åˆ¶è§†é¢‘å›¾åƒ](https://github.com/Tdahuyou/canvas/tree/main/0033.%20%E4%BD%BF%E7%94%A8%20ctx.drawImage%20%E7%BB%98%E5%88%B6%E8%A7%86%E9%A2%91%E5%9B%BE%E5%83%8F)


<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ notes](#2--notes)
- [3. ğŸ’» demo1](#3--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

## 2. ğŸ“’ notes

å¯ä»¥ä½¿ç”¨ ctx.drawImage æ¥å¤„ç†è§†é¢‘å›¾åƒï¼Œè¿™ä¸ªåŠŸèƒ½ç‚¹æœ‰äº› ğŸ‚ ğŸºï¼Œæ°´åº”è¯¥è›®æ·±çš„ã€‚

å¯ä»¥å°†è§†é¢‘æ•°æ®ä½œä¸º ctx.drawImage çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼Œå°†ä¼šç»˜åˆ¶è§†é¢‘å½“å‰æ’­æ”¾å¸§çš„å›¾åƒï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ canvas æŠ€æœ¯æ¥å¯¹å›¾åƒåšä¸€äº›é¢å¤–çš„å¤„ç†ï¼Œå®ç°ä¸€äº›ç‰¹æ®Šæ•ˆæœã€‚

è·å–åˆ°è§†é¢‘å›¾åƒæ•°æ®åï¼Œç»“åˆ canvas æŠ€æœ¯ä¼šæœ‰ä¸å°‘ç©æ³•ã€‚æ¯”å¦‚ï¼š
- å¯ä»¥å¯¹è§†é¢‘å›¾åƒåŠ ä¸€ä¸ªæ»¤é•œã€è£å‰ªæ•ˆæœã€‚
- ç”±äº canvas æœ¬èº«å°±æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªä¸‹è½½å›¾ç‰‡çš„é’©å­ï¼Œæƒ³è¦è·å–æŸä¸€å¸§å›¾åƒæ—¶ï¼Œæ‰§è¡Œé’©å­å³å¯ã€‚
- â€¦â€¦

## 3. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <video src="./01.mp4" autoplay controls width="400" height="400" muted></video>
      <!--
        autoplay å±æ€§è¡¨ç¤ºè§†é¢‘åŠ è½½å®Œæˆåè‡ªåŠ¨æ’­æ”¾
        controls å±æ€§è¡¨ç¤ºæ˜¾ç¤ºæ’­æ”¾æ§ä»¶
        muted å±æ€§è¡¨ç¤ºé™éŸ³æ’­æ”¾

        æ³¨æ„ï¼šå¦‚æœè¦è®¾ç½®è‡ªåŠ¨æ’­æ”¾çš„è¯ï¼Œéœ€è¦è®¾ç½® muted å±æ€§ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šé˜»æ­¢è‡ªåŠ¨æ’­æ”¾ã€‚
       -->
    </div>

    <script>
      const canvas = document.createElement('canvas')
      canvas.width = 400
      canvas.height = 400
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      const video = document.querySelector('video')
      video.addEventListener('play', draw) // å½“è§†é¢‘æ’­æ”¾åï¼Œè°ƒç”¨ draw å‡½æ•°

      ctx.arc(200, 200, 150, 0, Math.PI * 2)
      ctx.clip()
      // è¡¨ç¤ºè£å‰ªå‡ºä¸€ä¸ªåœ†å½¢åŒºåŸŸ

      // å¯ä»¥åŠ ä¸€äº›æ»¤é•œæ•ˆæœï¼ˆæœ‰å…³æ»¤é•œçš„ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œåœ¨åç»­å†…å®¹ä¸­ä¼šä»‹ç»ã€‚ï¼‰
      ctx.filter = 'blur(5px)' // è¡¨ç¤º 5px çš„æ¨¡ç³Šæ•ˆæœ
      ctx.filter = 'invert(0.8)' // è¡¨ç¤ºåè‰²æ•ˆæœ

      function draw() {
        ctx.clearRect(0, 0, 400, 400)
        ctx.drawImage(video, 0, 0, 400, 400)
        requestAnimationFrame(draw)
      }

      // requestAnimationFrame æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºå¹³æ»‘åŠ¨ç”»æ•ˆæœçš„æµè§ˆå™¨ API
      // ä¸æµè§ˆå™¨çš„å¸§åˆ·æ–°ç‡ï¼ˆé€šå¸¸æ˜¯60æ¬¡/ç§’ï¼Œå³æ¯16.67æ¯«ç§’ä¸€å¸§ï¼‰åŒæ­¥

      // requestAnimationFrame(draw)
      // è¯·æ±‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡é‡æ–°ç»˜åˆ¶ä¹‹å‰è°ƒç”¨ draw å‡½æ•°ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªåŠ¨ç”»å¾ªç¯ã€‚
      // é€šå¸¸ç”¨äºå®ç°é«˜æ•ˆç‡çš„ã€å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœã€‚
    </script>
  </body>
</html>
```

![](md-imgs/ä½¿ç”¨%20ctx.drawImage%20ç»˜åˆ¶è§†é¢‘å›¾åƒ.gif)

ä¸Šé¢æ˜¯åŸå§‹è§†é¢‘ã€‚

ä¸‹é¢æ˜¯è·å–åˆ°çš„è§†é¢‘å›¾åƒï¼Œå¹¶å¯¹è·å–åˆ°çš„è§†é¢‘å›¾åƒè¿›è¡Œäº†ä¸€äº›å¤„ç†ã€‚


# [README.md](./0034.%20ä½¿ç”¨%20ctx.drawImage%20å®ç°äººç‰©å¥”è·‘åŠ¨ç”»æ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0034. ä½¿ç”¨ ctx.drawImage å®ç°äººç‰©å¥”è·‘åŠ¨ç”»æ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0034.%20%E4%BD%BF%E7%94%A8%20ctx.drawImage%20%E5%AE%9E%E7%8E%B0%E4%BA%BA%E7%89%A9%E5%A5%94%E8%B7%91%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1 - ç´ æå›¾ç‰‡å±•ç¤º](#2--demo1---ç´ æå›¾ç‰‡å±•ç¤º)
- [3. ğŸ’» demo2 - åŸåœ°è·‘](#3--demo2---åŸåœ°è·‘)
- [4. ğŸ’» demo3 - å‘å‰è·‘](#4--demo3---å‘å‰è·‘)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- èƒ½å¤Ÿç†è§£ä»»åŠ¡çš„è¿åŠ¨åŸç†å³å¯ï¼Œæœ¬è´¨ä¸Šä½¿ç”¨çš„æ˜¯ `ctx.drawImage` çš„â€œæˆªå›¾â€åŠŸèƒ½ã€‚

## 2. ğŸ’» demo1 - ç´ æå›¾ç‰‡å±•ç¤º

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ å®ç°äººç‰©å¥”è·‘åŠ¨ç”»æ•ˆæœ</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 500, 150, 50)
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      ctx.globalAlpha = 0.5

      const img = new Image()
      img.src = './run.png'
      img.onload = function () {
        ctx.drawImage(img, 0, 0)
      }
      // å›¾åƒå®½åº¦çš„è®¡ç®—è¿‡ç¨‹ï¼š
      // åœ¨ä½¿ç”¨çš„ç´ æå›¾ç‰‡ run.png ä¸­ã€‚
      // ç»“åˆåæ ‡ç³»ï¼Œä¼°ç®—å„ä¸ªå›¾åƒçš„å¤§è‡´åæ ‡èŒƒå›´æ˜¯ 90 ï½ 100 çš„å®½åº¦ã€‚
      // å¼€å‘æ—¶ä¸æ–­å¾®è°ƒï¼Œæœ€ç»ˆç¡®å®šæ¯ä¸ªå›¾åƒçš„å®½åº¦ä¸º 94 æ¯”è¾ƒåˆé€‚ã€‚

      // å®é™…ä¸Šå¦‚æœå›¾åƒæ˜¯è´Ÿè´£ UI çš„åŒäº‹ä¸¢ç»™ä½ çš„è¯ï¼Œå¯ä»¥ç›´æ¥é—®ä»–ä»¬å›¾åƒçš„é—´éš”æ˜¯å¤šå°‘ã€‚
      // æ¯”å¦‚ç›´æ¥è®©å¯¹æ–¹è®¾è®¡æˆ 100 çš„å®½åº¦ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨è‡ªå·±å»ä¼°ç®—äº†ã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-40-47.png)

## 3. ğŸ’» demo2 - åŸåœ°è·‘

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ å®ç°äººç‰©å¥”è·‘åŠ¨ç”»æ•ˆæœ</title>
  </head>
  <body>
    <script>
      const canvas = document.createElement('canvas')
      canvas.width = 500
      canvas.height = 500
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      const img = new Image()
      img.src = './run.png'
      img.onload = function () {
        let i = 0
        function show() {
          ctx.clearRect(0, 0, 500, 500)
          ctx.drawImage(
            img,
            // ä» (i * 94, 0) ä½ç½®å¼€å§‹æˆªå–å®½åº¦ä¸º 94 é«˜åº¦ä¸º img.height çš„å›¾ç‰‡
            i * 94,
            0,
            94,
            img.height,
            // ä» (0, 0) ä½ç½®å¼€å§‹ç»˜åˆ¶å®½åº¦ä¸º 94 é«˜åº¦ä¸º img.height çš„å›¾ç‰‡
            // ç›¸å½“äºåŸåœ°å¥”è·‘
            0,
            0,
            94,
            img.height
          )
          i++
          if (i == 5) {
            i = 0
          }
        }

        setInterval(show, 1000 / 30) // è°ƒèŠ‚åŠ¨ç”»é€Ÿåº¦
      }
    </script>
  </body>
</html>
```

![](md-imgs/demo2-ä½¿ç”¨%20ctx.drawImage%20å®ç°äººç‰©å¥”è·‘åŠ¨ç”»æ•ˆæœ.gif)

## 4. ğŸ’» demo3 - å‘å‰è·‘

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ å®ç°äººç‰©å¥”è·‘åŠ¨ç”»æ•ˆæœ</title>
  </head>
  <body>
    <script>
      const canvas = document.createElement('canvas')
      canvas.width = 500
      canvas.height = 500
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      const img = new Image()
      img.src = './run.png'
      img.onload = function () {
        let i = 0
        let j = 0
        function show() {
          const runDistance = j * 10
          ctx.clearRect(0, 0, 500, 500)
          ctx.drawImage(
            img,
            // ä» (i * 94, 0) ä½ç½®å¼€å§‹æˆªå–å®½åº¦ä¸º 94 é«˜åº¦ä¸º img.height çš„å›¾ç‰‡
            i * 94,
            0,
            94,
            img.height,
            // æ¯æ¬¡åˆ‡æ¢å›¾ç‰‡æ—¶ï¼Œæ¨ªå‘ä½ç§» 10 ä¸ªå•ä½
            runDistance,
            0,
            94,
            img.height
          )
          i++
          j++

          if (i == 5) {
            i = 0
          }
          if (runDistance >= canvas.width) {
            j = 0
          }
        }

        setInterval(show, 1000 / 30) // è°ƒèŠ‚åŠ¨ç”»é€Ÿåº¦
      }
    </script>
  </body>
</html>
```

![](md-imgs/demo3-ä½¿ç”¨%20ctx.drawImage%20å®ç°äººç‰©å¥”è·‘åŠ¨ç”»æ•ˆæœ.gif)


# [README.md](./0035.%20ä½¿ç”¨%20ctx.drawImage%20å¼•å…¥å›¾åƒ/README.md)<!-- !======> SEPERATOR <====== -->
# [0035. ä½¿ç”¨ ctx.drawImage å¼•å…¥å›¾åƒ](https://github.com/Tdahuyou/canvas/tree/main/0035.%20%E4%BD%BF%E7%94%A8%20ctx.drawImage%20%E5%BC%95%E5%85%A5%E5%9B%BE%E5%83%8F)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1 - ä¿æŒå›¾ç‰‡åŸå§‹å°ºå¯¸](#4--demo1---ä¿æŒå›¾ç‰‡åŸå§‹å°ºå¯¸)
- [5. ğŸ’» demo2 - çº¦æŸå›¾ç‰‡å°ºå¯¸](#5--demo2---çº¦æŸå›¾ç‰‡å°ºå¯¸)
- [6. ğŸ’» demo3 - è£å‰ªå›¾ç‰‡](#6--demo3---è£å‰ªå›¾ç‰‡)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ä¸€å…±æœ‰ 3 ç§ä¼ å‚æ–¹å¼ï¼š
1. `drawImage(image, dx, dy)`
2. `drawImage(image, dx, dy, dWidth, dHeight)`
3. `drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)`
æœ€åä¸€ç§èƒ½ç”¨æ¥æ¨¡æ‹Ÿæˆªå›¾æ•ˆæœã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage - MDN - `ctx.drawImage`

## 3. ğŸ“’ notes

`ctx.drawImage` å¸¸è§æœ‰ 3 ç§å†™æ³•ï¼š

1. `drawImage(image, dx, dy)`
2. `drawImage(image, dx, dy, dWidth, dHeight)`
3. `drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)`

![](md-imgs/2024-10-04-11-47-00.png)

`ctx.drawImage` ä»å•è¯è§’åº¦å‡ºå‘ï¼Œdraw è¡¨ç¤ºç”»ï¼ŒImage è¡¨ç¤ºå›¾ç‰‡ï¼Œè¿™ API æ˜¯ç”¨æ¥ç”»å›¾ç‰‡çš„ã€‚æœ‰ 3 ç§å¸¸è§ç”¨æ³•ï¼Œå…¶ä¸­â€œæˆªå›¾â€åŠŸèƒ½æ¯”è¾ƒ ğŸ‚ ğŸºï¼Œå¯ä»¥ç©å‡ºå¾ˆå¤šèŠ±æ ·ã€‚

ä½ å¯ä»¥è‡ªç”±è£å‰ªå›¾ç‰‡çš„æŸä¸€éƒ¨åˆ†çŸ©å½¢åŒºåŸŸæ¥æ˜¾ç¤ºï¼Œå®ç°ä»…å±•ç¤ºä¸€å¼ å›¾ç‰‡çš„å±€éƒ¨æ•ˆæœï¼Œåœ¨åˆ¶ä½œä¸€äº›ç®€å•çš„è¿ç»­çš„åŠ¨ç”»æ•ˆæœæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚

## 4. ğŸ’» demo1 - ä¿æŒå›¾ç‰‡åŸå§‹å°ºå¯¸

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ä½¿ç”¨ ctx.drawImage å¼•å…¥å›¾åƒ</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 1500, 1000, 50)
      document.body.appendChild(cavnas)

      const ctx = cavnas.getContext('2d')

      // ctx.drawImage(imgSource, x, y)
      // x, y è¡¨ç¤ºåœ¨å›¾åƒåœ¨ canvas ç”»å¸ƒä¸­æ”¾ç½®çš„èµ·å§‹åæ ‡ä½ç½®ã€‚
      // è¿™ç§å†™æ³•ä¼šæŒ‰ç…§å›¾åƒåŸå¤§å°å±•ç¤ºã€‚

      const img = new Image()
      img.src = './week.png'
      img.onload = function () {
        // ctx.globalAlpha = 0.5
        ctx.drawImage(img, 100, 100)
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-47-57.png)

## 5. ğŸ’» demo2 - çº¦æŸå›¾ç‰‡å°ºå¯¸


```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ä½¿ç”¨ ctx.drawImage å¼•å…¥å›¾åƒ</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 500, 500, 50)
      document.body.appendChild(cavnas)

      const ctx = cavnas.getContext('2d')

      // ctx.drawImage(imgSource, x, y, width, height)

      // x, y
      // è¡¨ç¤ºåœ¨å›¾åƒåœ¨ canvas ç”»å¸ƒä¸­æ”¾ç½®çš„èµ·å§‹åæ ‡ä½ç½®ã€‚

      // width, height
      // è¡¨ç¤ºå›¾åƒå±•ç¤ºçš„å¤§å°ï¼Œæ­¤æ—¶å›¾ç‰‡ä¼šæŒ‰ç…§æŒ‡å®šçš„å°ºå¯¸å±•ç¤ºã€‚
      // å¦‚æœç…§ç‰‡å„¿çš„å®½é«˜æ¯”å’ŒæŒ‡å®šçš„å®½é«˜æ¯”ä¸ä¸€è‡´ï¼Œå›¾ç‰‡ä¼šè¢«æ‹‰ä¼¸æˆ–å‹ç¼©ã€‚

      const img = new Image()
      img.src = './week.png'
      img.onload = function () {
        ctx.drawImage(img, 100, 100, 300, 150)
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-48-03.png)

## 6. ğŸ’» demo3 - è£å‰ªå›¾ç‰‡


```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“ ä½¿ç”¨ ctx.drawImage å¼•å…¥å›¾åƒ</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const cavnas = document.createElement('canvas')
      drawGrid(cavnas, 1500, 1000, 50)
      document.body.appendChild(cavnas)
      const ctx = cavnas.getContext('2d')

      // ctx.drawImage(imgSource, x1, y1, w1, h1, x2, y2, w2, h2)
      // x1 y1 w1 h1 è¡¨ç¤ºå›¾åƒçš„â€œæˆªå›¾â€åŒºåŸŸï¼ˆåŸºäºå›¾åƒçš„åæ ‡ç³»ï¼‰
      // x2 y2 w2 h2 è¡¨ç¤ºç”»å¸ƒå±•ç¤ºåŒºåŸŸï¼ˆåŸºäºç”»å¸ƒçš„åæ ‡ç³»ï¼‰

      const img = new Image()
      img.src = './week.png'
      img.onload = function () {
        ctx.globalAlpha = 0.5
        ctx.drawImage(img, 0, 0)

        ctx.drawImage(
          img,
          150,
          100,
          900,
          img.height - 100,
          0,
          700,
          300,
          150
        )
      }
    </script>
  </body>
</html>
```

`ctx.globalAlpha = 0.5` è®¾ç½®ä¸ºåŠé€æ˜çš„æ•ˆæœï¼Œä»¥ä¾¿æŸ¥çœ‹åæ ‡ã€‚

![](md-imgs/2024-10-04-11-48-10.png)


# [README.md](./0036.%20ä½¿ç”¨%20ctx.getImageDataã€ctx.putImageData%20å®ç°å›¾åƒçš„åƒç´ å¤„ç†/README.md)<!-- !======> SEPERATOR <====== -->
# [0036. ä½¿ç”¨ ctx.getImageDataã€ctx.putImageData å®ç°å›¾åƒçš„åƒç´ å¤„ç†](https://github.com/Tdahuyou/canvas/tree/main/0036.%20%E4%BD%BF%E7%94%A8%20ctx.getImageData%E3%80%81ctx.putImageData%20%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E7%9A%84%E5%83%8F%E7%B4%A0%E5%A4%84%E7%90%86)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1 - ç½®ç°](#4--demo1---ç½®ç°)
- [5. ğŸ’» demo2 - å›¾åƒåè‰²å¤„ç†](#5--demo2---å›¾åƒåè‰²å¤„ç†)
- [6. ğŸ’» demo3 - ç½®è“](#6--demo3---ç½®è“)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

å…ˆå¯¹ `ctx.getImageData`ã€`ctx.putImageData` çš„ä½¿ç”¨æœ‰ä¸ªåŸºæœ¬çš„äº†è§£å³å¯ã€‚æƒ³è¦ç© 6ï¸âƒ£ å®ƒä»¬ï¼Œè¿˜éœ€è¦å»å­¦ä¹ å›¾åƒé¢œè‰²å¤„ç†çš„æ›´å¤šçŸ¥è¯†ã€‚
æ–‡æ¡£ä¸­æåˆ°çš„ç¤ºä¾‹ï¼Œå¤„ç†é€»è¾‘éƒ½æ˜¯ï¼š
1. å…ˆè¯»å›¾ç‰‡æ•°æ® `ctx.getImageData`
2. å†å¯¹å›¾ç‰‡æ•°æ®è¿›è¡Œä¿®æ”¹
3. æœ€åå°†ä¿®æ”¹åçš„æ•°æ®å†™å…¥å›¾ç‰‡ `ctx.putImageData`

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData - MDN - CanvasRenderingContext2D: getImageData() methodï¼Œè¯»å›¾ç‰‡æ•°æ®ã€‚
- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/putImageData - MDN - CanvasRenderingContext2D: putImageData() methodï¼Œå†™å›¾ç‰‡æ•°æ®ã€‚

## 3. ğŸ“’ notes

ctx.getImageDataã€ctx.putImageData è¿™ä¿© API çš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œèƒ½ç©å‡ºå¾ˆå¤šæ•ˆæœ â€”â€” å› ä¸ºæ‹¿åˆ°äº†æ•´ä¸ªå›¾åƒçš„æ‰€æœ‰åƒç´ ç‚¹æ•°æ®ã€‚

ç´ æåŸå›¾åƒï¼š
![](md-imgs/2024-10-04-11-50-13.png)

## 4. ğŸ’» demo1 - ç½®ç°

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script>
      // ã€è¯»ã€‘è¯»å–å›¾ç‰‡åƒç´ ç‚¹çš„ rgba å€¼
      // imageData = ctx.getImageData(x, y, width, height)
      // imageData.data æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„
      // æ¯ 4 ä½è¡¨ç¤ºä¸€ä¸ªåƒç´ ç‚¹çš„ rgba å€¼

      // ã€å†™ã€‘è®¾ç½®å›¾ç‰‡åƒç´ ç‚¹çš„ rgba å€¼
      // ctx.putImageData(imageData, x, y)
      // åœ¨è¯»å–åˆ° imageData æ•°æ®ä¹‹åï¼Œå¯ä»¥å¯¹æ¯ä¸ªåƒç´ ç‚¹çš„ rgba å€¼è¿›è¡Œå¤„ç†ï¼Œç„¶åå†å°†å¤„ç†åçš„æ•°æ®æ”¾å›åˆ° canvas ä¸­ã€‚
      // æ¯”å¦‚å¯ä»¥å¯¹åŸå›¾è¿›è¡Œç½®ç°ã€åè‰²ç­‰å¤„ç†ã€‚

      // æ³¨æ„ï¼šè¦ä½¿ç”¨ open with Live Server æ‰“å¼€ï¼Œå¦åˆ™ä¼šæŠ¥è·¨åŸŸé”™è¯¯ã€‚

      const canvas = document.createElement('canvas')
      canvas.width = 800
      canvas.height = 800
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      // console.log(
      //   '(0, 0) ç‚¹åˆ° (10, 10) ç‚¹å›´æˆçš„åŒºåŸŸ åƒç´ ç‚¹æ•°é‡ï¼š',
      //   ctx.getImageData(0, 0, 10, 10).data.length / 4
      // )

      const img = new Image()
      img.src = './home.png'
      img.onload = function () {
        ctx.drawImage(img, 0, 0)

        const imageData = ctx.getImageData(0, 0, img.width, img.height)
        for (let i = 0; i < imageData.data.length; i += 4) {
          const r = imageData.data[i]
          const g = imageData.data[i + 1]
          const b = imageData.data[i + 2]
          // const a = imageData.data[i + 3]

          // å›¾åƒç½®ç°å¤„ç†
          const avg = (r + g + b) / 3
          imageData.data[i] = avg
          imageData.data[i + 1] = avg
          imageData.data[i + 2] = avg
        }
        ctx.putImageData(imageData, 0, 0)
        // ctx.putImageData(imageData, img.width, 0) // å°†ç½®ç°çš„å›¾åƒæ”¾åœ¨åŸå›¾åƒå³ä¾§
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-50-46.png)

## 5. ğŸ’» demo2 - å›¾åƒåè‰²å¤„ç†

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script>
      const canvas = document.createElement('canvas')
      canvas.width = 800
      canvas.height = 800
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      const img = new Image()
      img.src = './home.png'
      img.onload = function () {
        ctx.drawImage(img, 0, 0)

        const imageData = ctx.getImageData(0, 0, img.width, img.height)
        for (let i = 0; i < imageData.data.length; i += 4) {
          const r = imageData.data[i]
          const g = imageData.data[i + 1]
          const b = imageData.data[i + 2]

          // å›¾åƒåè‰²å¤„ç†
          imageData.data[i] = 255 - r
          imageData.data[i + 1] = 255 - g
          imageData.data[i + 2] = 255 - b
        }
        ctx.putImageData(imageData, 0, 0)
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-51-02.png)

## 6. ğŸ’» demo3 - ç½®è“

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script>
      // ç½®è“ï¼šå°†çº¢è‰²ç»¿è‰²é€šé“è®¾ç½®ä¸º 0ï¼Œè“è‰²é€šé“çš„å€¼ä¿ç•™ä¸å˜ã€‚
      // ç½®çº¢ï¼šå°†ç»¿è‰²è“è‰²é€šé“è®¾ç½®ä¸º 0ï¼Œçº¢è‰²é€šé“çš„å€¼ä¿ç•™ä¸å˜ã€‚
      // ç½®ç»¿ï¼šå°†çº¢è‰²è“è‰²é€šé“è®¾ç½®ä¸º 0ï¼Œç»¿è‰²é€šé“çš„å€¼ä¿ç•™ä¸å˜ã€‚

      // é€šè¿‡å¯¹åƒç´ çš„å¤„ç†ï¼Œè¿˜èƒ½å®ç°å¾ˆå¤šæ•ˆæœã€‚
      // æ¯•ç«Ÿéƒ½æ‹¿åˆ°äº†ä¸€å¼ å›¾ç‰‡çš„æ‰€æœ‰åƒç´ ç‚¹æ•°æ®äº†ï¼Œæƒ³æ€ä¹ˆå¤„ç†éƒ½è¡Œã€‚
      //   é¢œè‰²å˜æ¢
      //   æ»¤é•œæ•ˆæœ
      //   é©¬èµ›å…‹
      //   å›¾åƒåˆæˆ
      //   åŠ¨ç”»æ•ˆæœ
      //   å›¾å½¢å¡«å……
      //   â€¦â€¦
      const canvas = document.createElement('canvas')
      canvas.width = 800
      canvas.height = 800
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      const img = new Image()
      img.src = './home.png'
      img.onload = function () {
        ctx.drawImage(img, 0, 0)

        const imageData = ctx.getImageData(0, 0, img.width, img.height)
        for (let i = 0; i < imageData.data.length; i += 4) {
          // ç½®è“
          imageData.data[i] = 0 // çº¢è‰²é€šé“è®¾ç½®ä¸º 0
          imageData.data[i + 1] = 0 // ç»¿è‰²é€šé“è®¾ç½®ä¸º 0
        }
        ctx.putImageData(imageData, 0, 0)
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-51-17.png)


# [README.md](./0037.%20ä½¿ç”¨%20ctx.globalCompositeOperation%20å¤„ç†å›¾åƒåˆæˆ/README.md)<!-- !======> SEPERATOR <====== -->
# [0037. ä½¿ç”¨ ctx.globalCompositeOperation å¤„ç†å›¾åƒåˆæˆ](https://github.com/Tdahuyou/canvas/tree/main/0037.%20%E4%BD%BF%E7%94%A8%20ctx.globalCompositeOperation%20%E5%A4%84%E7%90%86%E5%9B%BE%E5%83%8F%E5%90%88%E6%88%90)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1](#4--demo1)
- [5. ğŸ’» demo2](#5--demo2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ç†è§£å•è¯ sourceï¼ˆæºï¼‰å’Œç›®æ ‡ destinationï¼ˆç›®æ ‡ï¼‰çš„å«ä¹‰ï¼Œæœ‰åŠ©äºå¯¹ `ctx.globalCompositeOperation` çš„ç›¸å…³å±æ€§å€¼ï¼ˆ`source-over`ã€`destination-in`â€¦â€¦ï¼‰çš„ç†è§£ã€‚
è‡³äºåˆæˆé¢œè‰²ï¼Œæ¯”å¦‚æ›´äº® lighterã€æ›´æš— darkenã€é¢œè‰²ç›˜ hue ç­‰ç­‰å’Œé¢œè‰²ç›¸å…³çš„ï¼Œå¯ä»¥å…ˆè·³è¿‡ï¼Œå› ä¸ºè¿˜çœ‹ä¸æ‡‚å®ƒçš„é¢œè‰²å…·ä½“æ˜¯å¦‚ä½•è®¡ç®—å‡ºæ¥çš„ï¼Œåªè¦å¯¹æœ€ç»ˆå‘ˆç°çš„æ•ˆæœæœ‰ä¸ªå¤§è‡´çš„æ¦‚å¿µå³å¯ï¼ˆæ¯”å¦‚ä½ æƒ³è¦è®©åˆæˆåŒºåŸŸäº®ä¸€äº›ï¼ŒçŸ¥é“ç”¨ `lighter` è¿™ä¸ªå€¼æ¥å°è¯•ä¸‹å°±è¡Œï¼Œè‡³äºå¦‚ä½•å¾®è°ƒå°±å…ˆä¸ç”¨å»æƒ³äº†ï¼‰ã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation - MDN - ctx.globalCompositeOperation

## 3. ğŸ“’ notes

`ctx.globalCompositeOperation` ç”¨äºè®¾ç½®å¦‚ä½•å°†æ–°ç»˜åˆ¶çš„å›¾åƒä¸å·²å­˜åœ¨çš„ç”»å¸ƒå†…å®¹åˆæˆï¼Œå†³å®šæ–°å›¾åƒå¦‚ä½•ä¸åº•å±‚å†…å®¹ç›¸ç»“åˆã€‚

ä»ä»£ç ä¹¦å†™å±‚é¢ï¼Œéœ€è¦æŒæ¡ `ctx.globalCompositeOperation` çš„å†™æ³•ã€‚è‡³äºæœ€ç»ˆæ¸²æŸ“æ•ˆæœçš„ä¸€äº›ç»†èŠ‚å…ˆä¸ç®¡ï¼Œè¿™éƒ¨åˆ†çš„å†…å®¹æ¶‰åŠåˆ°å›¾åƒåˆæˆæŠ€æœ¯ç›¸å…³çš„ä¸“ä¸šçŸ¥è¯†ã€‚

**æ¯”è¾ƒå…¸å‹çš„åº”ç”¨åœºæ™¯ï¼š**
- â€œæ©¡çš®æ“¦â€æ•ˆæœ
  - destination-out
  - åœ¨åŸå›¾ä¸Šé¢ç»˜åˆ¶æ–°çš„å›¾å½¢ï¼ŒæŠŠåŸå›¾å½¢ä¸­çš„å›¾æ¡ˆç»™æ“¦æ‰ã€‚
- â€œå›¾å±‚â€æ•ˆæœ

> **å•è¯**
> destination ç›®æ ‡
> composite åˆæˆ
> operation æ“ä½œ

## 4. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script>
      // ctx.globalCompositeOperation
      // ç”¨äºè®¾ç½®åœ¨å·²æœ‰çš„ç”»å¸ƒå†…å®¹ä¸Šç»˜åˆ¶æ–°å›¾å½¢æ—¶ï¼Œå¦‚ä½•æ§åˆ¶è¿™äº›å›¾å½¢ä¹‹é—´çš„åˆæˆæˆ–æ··åˆæ¨¡å¼ã€‚
      // é€šè¿‡æ”¹å˜è¿™ä¸ªå±æ€§çš„å€¼ï¼Œä½ å¯ä»¥å®šä¹‰æ–°å›¾å½¢åº”è¯¥å¦‚ä½•ä¸èƒŒæ™¯çš„å·²æœ‰å›¾å½¢ç›¸ç»“åˆã€‚

      // Sourceï¼ˆæºï¼‰
      // æŒ‡çš„æ˜¯ä½ æ­£å°è¯•åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶çš„æ–°å›¾å½¢æˆ–å›¾åƒã€‚

      // Destinationï¼ˆç›®æ ‡ï¼‰
      // æŒ‡çš„æ˜¯ç”»å¸ƒä¸Šå·²ç»å­˜åœ¨çš„å›¾å½¢æˆ–å›¾åƒã€‚

      // source-overï¼ˆé»˜è®¤å€¼ï¼‰ æ–°çš„å›¾å½¢ä¼šç»˜åˆ¶åœ¨æ—§å›¾å½¢ä¸Šæ–¹ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        // ctx.globalCompositeOperation = 'source-over'
        // è¿™æ¡è¯­å¥å†™æˆ–è€…ä¸å†™éƒ½ä¸€æ ·ï¼Œå› ä¸ºé»˜è®¤å€¼å°±æ˜¯ source-overã€‚

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // source-in æ–°å›¾å½¢åªåœ¨æ—§å›¾å½¢å’Œæ–°å›¾å½¢é‡å çš„éƒ¨åˆ†æ˜¾ç¤ºã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'source-in'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // source-out æ–°å›¾å½¢åªåœ¨ä¸æ—§å›¾å½¢ä¸é‡å çš„éƒ¨åˆ†æ˜¾ç¤ºã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'source-out'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // source-atop æ–°å›¾å½¢åªåœ¨ä¸æ—§å›¾å½¢é‡å çš„éƒ¨åˆ†æ˜¾ç¤ºï¼Œä¸”è¿™éƒ¨åˆ†ä¼šæ˜¾ç¤ºåœ¨æ—§å›¾å½¢ä¹‹ä¸Šã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'source-atop'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // destination-over æ–°å›¾å½¢ä¼šç»˜åˆ¶åœ¨æ—§å›¾å½¢çš„ä¸‹æ–¹ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'destination-over'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // destination-in æ—§å›¾å½¢åªåœ¨ä¸æ–°å›¾å½¢é‡å çš„éƒ¨åˆ†æ˜¾ç¤ºã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'destination-in'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // destination-out æ—§å›¾å½¢åªåœ¨ä¸æ–°å›¾å½¢ä¸é‡å çš„éƒ¨åˆ†æ˜¾ç¤ºã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'destination-out'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // destination-atop æ—§å›¾å½¢åªåœ¨ä¸æ–°å›¾å½¢é‡å çš„éƒ¨åˆ†æ˜¾ç¤ºï¼Œä¸”è¿™éƒ¨åˆ†ä¼šæ˜¾ç¤ºåœ¨æ–°å›¾å½¢ä¹‹ä¸Šã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'destination-atop'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // copy åªæ˜¾ç¤ºæ–°å›¾å½¢ï¼Œå¿½ç•¥æ—§å›¾å½¢ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'copy'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }

      // xor åªæ˜¾ç¤ºæ–°å›¾å½¢å’Œæ—§å›¾å½¢ä¸é‡å çš„éƒ¨åˆ†ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'xor'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-53-55.png)

## 5. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script>
      // è¿™éƒ¨åˆ†çš„å†…å®¹æ¶‰åŠåˆ°å›¾åƒåˆæˆæŠ€æœ¯ç›¸å…³çš„ä¸“ä¸šçŸ¥è¯†ã€‚
      // å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œåªéœ€è¦çŸ¥é“è¿™ä¸ªå±æ€§çš„å€¼å¯ä»¥æ§åˆ¶å›¾åƒçš„åˆæˆæ•ˆæœå³å¯ã€‚
      // æ¯”å¦‚çŸ¥é“å¦‚ä½•å®ç°æ›´äº®ã€æ›´æš—ç­‰æ•ˆæœå°±è¡Œã€‚
      // æš‚æ—¶ä¸è¦æ±‚æŒæ¡åƒç´ è®¡ç®—çš„å…·ä½“ç»†èŠ‚ã€‚
      // ä¹Ÿå°±æ˜¯æš‚æ—¶ä¸éœ€è¦çŸ¥é“å¦‚ä½•æ›´ç»†ç²’åº¦çš„å»è°ƒèŠ‚å›¾åƒçš„åˆæˆæ•ˆæœã€‚

      // lighter é‡å éƒ¨åˆ†çš„é¢œè‰²å€¼ç›¸åŠ ï¼Œé€ æˆäº®åŒ–æ•ˆæœã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'lighter'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }
      // multiply é‡å éƒ¨åˆ†çš„é¢œè‰²å€¼ç›¸ä¹˜ï¼Œç»“æœæ›´æš—ï¼Œå¢åŠ è‰²å½©çš„é¥±å’Œåº¦ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'multiply'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }
      // screen é‡å éƒ¨åˆ†é‡‡ç”¨è¡¥è‰²ç›¸ä¹˜çš„æ–¹å¼å¤„ç†ï¼Œä½¿é¢œè‰²å€¼æ›´äº®ï¼Œäº§ç”Ÿé«˜å…‰æ•ˆæœã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'screen'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }
      // darken åœ¨é‡å éƒ¨åˆ†é€‰æ‹©è¾ƒæš—çš„é¢œè‰²ï¼Œä½¿å›¾åƒæ•´ä½“æ˜¾å¾—æ›´æš—ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'darken'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }
      // lighten åœ¨é‡å éƒ¨åˆ†é€‰æ‹©è¾ƒäº®çš„é¢œè‰²ï¼Œä½¿å›¾åƒæ•´ä½“æ˜¾å¾—æ›´äº®ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas.width = 200
        canvas.height = 200
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.fillStyle = 'blue'
        ctx.fillRect(10, 10, 100, 100)

        ctx.globalCompositeOperation = 'lighten'

        ctx.fillStyle = 'red'
        ctx.fillRect(50, 50, 100, 100)
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-54-04.png)

# [README.md](./0038.%20ä½¿ç”¨%20ctx.globalCompositeOperation%20å®ç°åˆ®åˆ®ä¹æ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0038. ä½¿ç”¨ ctx.globalCompositeOperation å®ç°åˆ®åˆ®ä¹æ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0038.%20%E4%BD%BF%E7%94%A8%20ctx.globalCompositeOperation%20%E5%AE%9E%E7%8E%B0%E5%88%AE%E5%88%AE%E4%B9%90%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1](#2--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

çœ‹æ‡‚å®ç°åŸç†å³å¯ã€‚
è¿™ä¸ªæ•ˆæœæŒºå¥½ç©çš„ï¼Œä¸è¿‡æƒ³è¦ç›‘å¬ç»“æœå¦‚ä½•å‡ºç°ï¼Œä¸å¤ªå®¹æ˜“ã€‚
**æœ€ç»ˆæ•ˆæœå±•ç¤ºï¼š**
![](md-imgs/ä½¿ç”¨%20ctx.globalCompositeOperation%20å®ç°åˆ®åˆ®ä¹æ•ˆæœ.gif)

## 2. ğŸ’» demo1

```css
/* 1.css */
/*
ä½¿ç”¨ç»å¯¹å®šä½çš„æ–¹å¼
è®©ç»“æœå’Œ canvas ç»˜åˆ¶åœ¨åŒä¸€å—åŒºåŸŸ
 */
canvas {
  border: 1px solid #ccc;
  margin-right: 5px;
  position: absolute;
}

#result {
  width: 300px;
  height: 200px;
  text-align: center;
  line-height: 200px;
  font-size: 3rem;
  position: absolute;

  /* é˜²æ­¢æ–‡æœ¬å†…å®¹è¢«é€‰ä¸­ */
  user-select: none;
}
```

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./1.css">
    <title>Document</title>
  </head>
  <body>
    <div id="result">è°¢è°¢æƒ é¡¾</div>
    <script>
      const canvas = document.createElement('canvas')
      canvas.width = 300
      canvas.height = 200
      document.body.append(canvas)

      const ctx = canvas.getContext('2d')

      // ç»˜åˆ¶å¡«å……çŸ©å½¢ï¼Œå°†ç»“æœç›–ä½ã€‚
      ctx.beginPath()
      ctx.fillStyle = '#ccc'
      ctx.fillRect(0, 0, 300, 200)

      ctx.globalCompositeOperation = 'destination-out'
      // destination-out æ—§å›¾å½¢åªåœ¨ä¸æ–°å›¾å½¢ä¸é‡å çš„éƒ¨åˆ†æ˜¾ç¤ºã€‚
      // è¿™æ„å‘³ç€å¦‚æœåœ¨æ—§å›¾å½¢ä¸Šç»˜åˆ¶æ–°å›¾å½¢ï¼Œé‡å çš„éƒ¨åˆ†ä¼šè¢«åˆ é™¤ã€‚

      ctx.beginPath()
      // ctx.strokeStyle = '#fff' // è¿™é‡Œæ˜¯å¦è®¾ç½®é¢œè‰²éƒ½å¯ä»¥
      ctx.lineWidth = 20
      ctx.lineCap = 'round'
      ctx.lineJoin = 'round'

      canvas.onmousedown = function (e) {
        ctx.moveTo(e.offsetX, e.offsetY)

        // æŒ‰ä¸‹é¼ æ ‡ä¹‹åå°±ä¸æ–­åœ°ç”»çº¿
        canvas.onmousemove = function (e) {
          ctx.lineTo(e.offsetX, e.offsetY)
          ctx.stroke()
        }

        canvas.onmouseup = canvas.onmouseout = function () {
          canvas.onmousemove = null
          canvas.onmouseout = null
        }
      }
    </script>
  </body>
</html>
```

![](md-imgs/ä½¿ç”¨%20ctx.globalCompositeOperation%20å®ç°åˆ®åˆ®ä¹æ•ˆæœ.gif)


# [README.md](./0039.%20ä¸‹è½½ã€ä½¿ç”¨%20canvas%20å›¾åƒ/README.md)<!-- !======> SEPERATOR <====== -->
# [0039. ä¸‹è½½ã€ä½¿ç”¨ canvas å›¾åƒ](https://github.com/Tdahuyou/canvas/tree/main/0039.%20%E4%B8%8B%E8%BD%BD%E3%80%81%E4%BD%BF%E7%94%A8%20canvas%20%E5%9B%BE%E5%83%8F)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ’» demo1](#2--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

canvas æœ¬èº«ä¹Ÿæ˜¯å›¾åƒï¼Œå¯ä»¥è¢«ä¸‹è½½ï¼Œå¯ä»¥è¢«å¼•ç”¨ã€‚
é€šè¿‡ä¸€ä¸ªç¤ºä¾‹ï¼ŒåŠ æ·±å¯¹ canvas çš„ç†è§£ï¼Œä½ å¯ä»¥å°†å…¶å°±çœ‹åšæ˜¯ä¸€ä¸ªç™½è‰²çš„å›¾ç‰‡ï¼Œç„¶åé€šè¿‡ canvas æä¾›çš„ä¸€äº› API åœ¨è¿™ä¸ªç™½è‰²çš„å›¾ç‰‡ä¸Šç»˜å›¾ï¼Œç»˜å›¾å®Œæ¯•åä½ å¯ä»¥ä¸‹è½½è¿™å¼ å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨è¿™å¼ å›¾è¿›è¡ŒäºŒæ¬¡åˆ›ä½œã€‚

## 2. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        display: block;
        margin-top: 2rem;
      }
    </style>
  </head>
  <body>
    <div>
      <button id="bnt-1">ä¸‹è½½ canvas 1</button>
      <button id="bnt-2">ä¸‹è½½ canvas 2</button>
      <button id="bnt-3">ä¸‹è½½ canvas 3</button>
    </div>
    <script>
      let canvas1
      let canvas2
      let canvas3

      // ã€canvas1ã€‘
      // ä½¿ç”¨ canvas ç»˜åˆ¶ä¸€ä¸ª é¶å¿ƒå›¾æ ‡ ğŸ¯
      // å¯ä»¥å°†å…¶è§†ä½œä¸€å¼ å›¾ç‰‡
      // è¿™å¼ å›¾ç‰‡å¯ä»¥è¢«ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥è¢«å¦ä¸€ä¸ª canvas ç»˜åˆ¶ã€‚
      {
        canvas1 = document.createElement('canvas')
        canvas1.width = 200
        canvas1.height = 200
        document.body.append(canvas1)

        const ctx = canvas1.getContext('2d')

        // åŒå¿ƒåœ†
        for (let i = 1; i <= 5; i++) {
          ctx.beginPath()
          ctx.arc(100, 100, 20 * i, 0, Math.PI * 2)
          ctx.stroke()
        }

        // æ¨ªçº¿
        ctx.beginPath()
        ctx.moveTo(0, 100)
        ctx.lineTo(200, 100)
        ctx.stroke()

        // ç«–çº¿
        ctx.beginPath()
        ctx.moveTo(100, 0)
        ctx.lineTo(100, 200)
        ctx.stroke()
      }

      // ã€canvas2ã€‘
      // å°† canvas1 å›¾åƒçš„ä¸€éƒ¨åˆ†ï¼Œç»˜åˆ¶åˆ° canvas2 ä¸Šã€‚
      {
        canvas2 = document.createElement('canvas')
        canvas2.width = 400
        canvas2.height = 400
        document.body.append(canvas2)
        const ctx = canvas2.getContext('2d')

        ctx.drawImage(canvas1, 0, 0, 100, 100, 150, 150, 100, 100)
        // canvas1 ä¹Ÿæ˜¯å›¾ç‰‡ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ drawImage æ–¹æ³•ç»˜åˆ¶åˆ° canvas2 ä¸Šã€‚
      }

      // ã€canvas3ã€‘
      // ä½¿ç”¨ canvas ç»˜åˆ¶ä¸€å¼ å›¾ç‰‡ã€‚
      {
        const canvas = document.createElement('canvas')
        canvas3 = canvas
        canvas.width = 800
        canvas.height = 400
        document.body.append(canvas)

        const ctx = canvas.getContext('2d')

        const img = new Image()
        img.src = './week.png'
        img.onload = function () {
          ctx.drawImage(img, 0, 0, 600, 300)
        }
      }

      // ã€ç»‘å®šä¸‹è½½çš„ç‚¹å‡»äº‹ä»¶ã€‘
      // æ³¨æ„ï¼šéœ€è¦ä½¿ç”¨æœåŠ¡å™¨ç¯å¢ƒï¼ˆopen with live serverï¼‰æ‰“å¼€ï¼Œå¦åˆ™åœ¨ä¸‹è½½ canvas3 æ—¶ä¼šæŠ¥è·¨åŸŸé”™è¯¯ã€‚
      {
        const bnt1 = document.getElementById('bnt-1')
        bnt1.onclick = function () {
          const url = canvas1.toDataURL()
          const a = document.createElement('a')
          a.href = url
          a.download = 'canvas1'
          a.click()
        }

        const bnt2 = document.getElementById('bnt-2')
        bnt2.onclick = function () {
          const url = canvas2.toDataURL()
          const a = document.createElement('a')
          a.href = url
          a.download = 'canvas2'
          a.click()
        }

        const bnt3 = document.getElementById('bnt-3')
        bnt3.onclick = function () {
          const url = canvas3.toDataURL()

          const a = document.createElement('a')
          a.href = url
          a.download = 'canvas3'
          a.click()
        }
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-56-45.png)


# [README.md](./0040.%20ä½¿ç”¨%20ctx.createConicGradient%20å®ç°é”¥å½¢æ¸å˜æ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0040. ä½¿ç”¨ ctx.createConicGradient å®ç°é”¥å½¢æ¸å˜æ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0040.%20%E4%BD%BF%E7%94%A8%20ctx.createConicGradient%20%E5%AE%9E%E7%8E%B0%E9%94%A5%E5%BD%A2%E6%B8%90%E5%8F%98%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ’» demo1](#3--demo1)
- [4. ğŸ’» demo2](#4--demo2)
- [5. ğŸ’» demo3](#5--demo3)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

`ctx.createConicGradient(startAngle, x, y)` ç”¨äºåˆ›å»ºä¸€ä¸ªé”¥å½¢æ¸å˜ã€‚
- `startAngle` æ¸å˜çš„èµ·å§‹è§’åº¦
- `x, y` æ¸å˜çš„ä¸­å¿ƒç‚¹åæ ‡

## 2. ğŸ”— links

https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createConicGradient - MDN - `ctx.createConicGradient(startAngle, x, y)`ã€‚

## 3. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // createConicGradient(startAngle, x, y)
      // startAngle: æ¸å˜çš„èµ·å§‹è§’åº¦
      // x, y: æ¸å˜çš„ä¸­å¿ƒç‚¹åæ ‡

      // æ¸å˜çš„èµ·å§‹è§’åº¦æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯ 3 ç‚¹é’Ÿæ–¹å‘ ğŸ•’ã€‚
      // æ¸å˜è§’åº¦çš„å•ä½æ˜¯å¼§åº¦ï¼Œè€Œéåº¦ã€‚

      const canvas = document.createElement('canvas')
      drawGrid(canvas, 400, 400, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.globalAlpha = 0.8

      const gradient = ctx.createConicGradient(0, 200, 200)
      // 0 è¡¨ç¤ºä» 3 ç‚¹é’Ÿæ–¹å‘å¼€å§‹æ¸å˜
      // 200 200 è¡¨ç¤ºæ¸å˜çš„ä¸­å¿ƒç‚¹åæ ‡

      gradient.addColorStop(0, 'red')
      // è¡¨ç¤ºæ¸å˜çš„èµ·ç‚¹é¢œè‰²ä¸ºçº¢è‰²
      gradient.addColorStop(0.25, 'orange')
      // è¡¨ç¤ºæ¸å˜åˆ° 25% çš„ä½ç½®æ—¶çš„é¢œè‰²ä¸ºæ©™è‰²
      gradient.addColorStop(0.5, 'yellow')
      // è¡¨ç¤ºæ¸å˜åˆ° 50% çš„ä½ç½®æ—¶çš„é¢œè‰²ä¸ºé»„è‰²
      gradient.addColorStop(0.75, 'green')
      // è¡¨ç¤ºæ¸å˜åˆ° 75% çš„ä½ç½®æ—¶çš„é¢œè‰²ä¸ºç»¿è‰²
      gradient.addColorStop(1, 'blue')
      // è¡¨ç¤ºæ¸å˜çš„ç»ˆç‚¹é¢œè‰²ä¸ºè“è‰²

      ctx.fillStyle = gradient

      ctx.rect(0, 0, canvas.width, canvas.height)
      ctx.stroke()
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-58-04.png)

## 4. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 400, 400, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()

      const gradient = ctx.createConicGradient(Math.PI / 2, 200, 200)
      // Math.PI / 2 è¡¨ç¤ºä» 6 ç‚¹é’Ÿæ–¹å‘å¼€å§‹æ¸å˜
      // 200 200 è¡¨ç¤ºæ¸å˜çš„ä¸­å¿ƒç‚¹åæ ‡

      gradient.addColorStop(0, 'red')
      gradient.addColorStop(0.25, 'orange')
      gradient.addColorStop(0.5, 'yellow')
      gradient.addColorStop(0.75, 'green')
      gradient.addColorStop(1, 'blue')

      ctx.fillStyle = gradient

      ctx.arc(200, 200, 100, 0, Math.PI * 2)
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-58-14.png)

## 5. ğŸ’» demo3

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 400, 400, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()

      const gradient = ctx.createConicGradient(Math.PI / 2, 200, 200)

      gradient.addColorStop(0, 'red')
      gradient.addColorStop(0.25, 'orange')
      gradient.addColorStop(0.5, 'yellow')
      gradient.addColorStop(0.75, 'green')
      gradient.addColorStop(1, 'blue')

      ctx.fillStyle = gradient

      ctx.arc(200, 200, 100, 0, Math.PI * 2)
      ctx.fill()

      // åœ¨ä¸­é—´ç»˜åˆ¶ä¸€ä¸ªç™½è‰²çš„åœ†ï¼Œå®ç°ç±»ä¼¼è‰²ç›¸ç¯çš„æ•ˆæœã€‚
      ctx.beginPath()
      ctx.fillStyle = '#fff'
      ctx.arc(200, 200, 60, 0, Math.PI * 2)
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-58-27.png)


# [README.md](./0041.%20ä½¿ç”¨%20ctx.createLinearGradient%20å®ç°çº¿æ€§æ¸å˜æ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0041. ä½¿ç”¨ ctx.createLinearGradient å®ç°çº¿æ€§æ¸å˜æ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0041.%20%E4%BD%BF%E7%94%A8%20ctx.createLinearGradient%20%E5%AE%9E%E7%8E%B0%E7%BA%BF%E6%80%A7%E6%B8%90%E5%8F%98%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ’» demo1](#3--demo1)
- [4. ğŸ’» demo2](#4--demo2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

- `createLinearGradient(x0, y0, x1, y1)` å®ƒè®¾ç½®çš„ä»…ä»…æ˜¯çº¿æ€§æ¸å˜çš„åŒºåŸŸã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createLinearGradient - MDN - `ctx.createLinearGradient`ã€‚

## 3. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // ctx.createLinearGradient æ–¹æ³•æ˜¯ Canvas API ä¸­ç”¨äºåˆ›å»ºçº¿æ€§æ¸å˜å¯¹è±¡çš„å‡½æ•°ã€‚

      // æ¥å—å››ä¸ªå‚æ•°ï¼šx0, y0, x1, y1
      // åˆ†åˆ«ä»£è¡¨æ¸å˜çš„èµ·ç‚¹ (x0, y0) å’Œç»ˆç‚¹ (x1, y1) çš„åæ ‡ã€‚
      // ä¼šæŒ‰ç…§ä¸¤ç‚¹çš„è¿çº¿æ–¹å‘æ¸å˜ã€‚
      // å¯ä»¥æ˜¯æ¨ªå‘ã€çºµå‘ã€æ–œå‘ã€‚

      // æ³¨æ„ï¼š
      // æ¸å˜çš„å‚è€ƒç³»æ˜¯ç”»å¸ƒåæ ‡ç³»ã€‚
      // ä½ç½®ä¸ä¼šéšç€å›¾å½¢çš„å˜åŒ–è€Œå˜åŒ–ã€‚
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 200, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.globalAlpha = 0.8

        const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0)
        gradient.addColorStop(0, 'red') // è¡¨ç¤ºæ¸å˜çš„èµ·ç‚¹é¢œè‰²ä¸ºçº¢è‰²
        gradient.addColorStop(0.5, 'green') // è¡¨ç¤ºæ¸å˜çš„ä¸­é—´ï¼ˆ50% ä½ç½®ï¼‰é¢œè‰²ä¸ºç»¿è‰²
        gradient.addColorStop(1, 'blue') // è¡¨ç¤ºæ¸å˜çš„ç»ˆç‚¹é¢œè‰²ä¸ºè“è‰²

        ctx.fillStyle = gradient
        ctx.fillRect(0, 0, canvas.width, canvas.height)
      }

      // ä»…ä¿®æ”¹çŸ©å½¢çš„å°ºå¯¸å’Œä½ç½®è§‚å¯Ÿæ¸å˜æ•ˆæœã€‚
      // ä¼šå‘ç°æ¸å˜æ˜¯å›ºå®šçš„ï¼ŒçŸ©å½¢ä½ç½®å’Œå°ºå¯¸ä»…ä»…å†³å®šäº†å±•ç¤ºå“ªä¸€éƒ¨åˆ†çš„æ¸å˜æ•ˆæœã€‚
      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 200, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.globalAlpha = 0.8

        const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0)
        gradient.addColorStop(0, 'red')
        gradient.addColorStop(0.5, 'green')
        gradient.addColorStop(1, 'blue')

        ctx.fillStyle = gradient
        ctx.fillRect(200, 0, 100, canvas.height)
      }

      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 500, 200, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.globalAlpha = 0.8

        const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0)
        gradient.addColorStop(0, 'red')
        gradient.addColorStop(0.5, 'green')
        gradient.addColorStop(1, 'blue')

        ctx.fillStyle = gradient
        ctx.fillRect(400, 0, 100, canvas.height)
      }

    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-59-28.png)

## 4. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // å‰é¢çš„ç¤ºä¾‹åˆ›å»ºçš„æ˜¯ä¸€ä¸ªé“ºæ»¡æ•´ä¸ª canvas çš„æ¸å˜æ•ˆæœã€‚
      // å¦‚æœæ¸å˜åŒºåŸŸå°äºçŸ©å½¢åŒºåŸŸçš„è¯ï¼Œé‚£ä¹ˆéæ¸å˜åŒºåŸŸï¼Œå°†å±•ç¤ºæ¸å˜çš„â€œç»ˆç‚¹â€é¢œè‰²ã€‚
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 500, 200, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.globalAlpha = 0.8

      // æ¸å˜åŒºåŸŸæ˜¯ä» 100-400
      const gradient = ctx.createLinearGradient(100, 0, 400, 0)
      gradient.addColorStop(0, 'red')
      gradient.addColorStop(0.5, 'green')
      gradient.addColorStop(1, 'blue')

      // ç»˜åˆ¶çš„çŸ©å½¢æ˜¯ä» 0-500
      ctx.fillStyle = gradient
      ctx.fillRect(0, 0, canvas.width, canvas.height)

      // ä»”ç»†è§‚å¯Ÿæœ€ç»ˆæ•ˆæœï¼Œä¼šå‘ç° 0-100 å’Œ 400-500 çš„åŒºåŸŸæ˜¯æ¸å˜çš„â€œç»ˆç‚¹â€é¢œè‰²ã€‚
      // è¿™éƒ¨åˆ†æ˜¯æ²¡æœ‰æ¸å˜æ•ˆæœçš„ã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-11-59-37.png)


# [README.md](./0042.%20ä½¿ç”¨%20ctx.createRadialGradient%20å®ç°å¾„å‘æ¸å˜æ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0042. ä½¿ç”¨ ctx.createRadialGradient å®ç°å¾„å‘æ¸å˜æ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0042.%20%E4%BD%BF%E7%94%A8%20ctx.createRadialGradient%20%E5%AE%9E%E7%8E%B0%E5%BE%84%E5%90%91%E6%B8%90%E5%8F%98%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ’» demo1](#3--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ctx.createRadialGradient ç”¨äºåˆ›å»ºå¾„å‘æ¸å˜ï¼ˆæˆ–ç§°ä¸ºæ”¾å°„çŠ¶æ¸å˜ï¼‰ã€‚
`createRadialGradient(x0, y0, r0, x1, y1, r1)`
- `x0, y0, r0` åœ†1
- `x1, y1, r1` åœ†2
ä»åœ† 1 çš„è¾¹ç¼˜å¼€å§‹æ¸å˜åˆ°åœ† 2 çš„è¾¹ç¼˜ã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/createRadialGradient - MDN - `ctx.createRadialGradient`ã€‚

## 3. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        border: 1px solid #888;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // createRadialGradient(x0, y0, r0, x1, y1, r1)
      // x0, y0, r0: æ¸å˜çš„èµ·ç‚¹åæ ‡å’ŒåŠå¾„
      // x1, y1, r1: æ¸å˜çš„ç»ˆç‚¹åæ ‡å’ŒåŠå¾„

      // æ³¨æ„ï¼šä¸¤ä¸ªåœ†æ˜¯åŒ…å«å…³ç³»ã€‚
      // å³ä¸€ä¸ªåœ†åœ¨å¦ä¸€ä¸ªåœ†çš„å†…éƒ¨ã€‚

      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()
        ctx.globalAlpha = 0.8

        const gradient = ctx.createRadialGradient(200, 200, 50, 200, 200, 100)
        // è¡¨ç¤ºä» (200, 200) åŠå¾„ä¸º 50 çš„åœ†å¼€å§‹æ¸å˜
        // åˆ° (200, 200) åŠå¾„ä¸º 100 çš„åœ†ç»“æŸæ¸å˜

        gradient.addColorStop(0, 'red')
        // è¡¨ç¤ºæ¸å˜çš„èµ·ç‚¹é¢œè‰²ä¸ºçº¢è‰²
        gradient.addColorStop(0.9, 'yellow')
        // è¡¨ç¤ºæ¸å˜åˆ° 90% çš„ä½ç½®æ—¶çš„é¢œè‰²ä¸ºé»„è‰²
        gradient.addColorStop(1, 'black')
        // è¡¨ç¤ºæ¸å˜çš„ç»ˆç‚¹é¢œè‰²ä¸ºé»‘è‰²

        ctx.fillStyle = gradient

        ctx.rect(0, 0, canvas.width, canvas.height)
        ctx.stroke()
        ctx.fill()
      }

      {
        const canvas = document.createElement('canvas')
        drawGrid(canvas, 400, 400, 50)
        document.body.append(canvas)
        const ctx = canvas.getContext('2d')

        ctx.beginPath()
        ctx.globalAlpha = 0.8

        const gradient = ctx.createRadialGradient(200, 200, 100, 200, 200, 50)
        // è¡¨ç¤ºä» (200, 200) åŠå¾„ä¸º 100 çš„åœ†å¼€å§‹æ¸å˜
        // åˆ° (200, 200) åŠå¾„ä¸º 50 çš„åœ†ç»“æŸæ¸å˜

        gradient.addColorStop(0, 'red')
        gradient.addColorStop(0.9, 'yellow')
        gradient.addColorStop(1, 'black')
        ctx.fillStyle = gradient

        ctx.rect(0, 0, canvas.width, canvas.height)
        ctx.stroke()
        ctx.fill()
      }
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-01-09.png)


# [README.md](./0043.%20ç»™å›¾åƒæ·»åŠ é˜´å½±/README.md)<!-- !======> SEPERATOR <====== -->
# [0043. ç»™å›¾åƒæ·»åŠ é˜´å½±](https://github.com/Tdahuyou/canvas/tree/main/0043.%20%E7%BB%99%E5%9B%BE%E5%83%8F%E6%B7%BB%E5%8A%A0%E9%98%B4%E5%BD%B1)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1](#4--demo1)
- [5. ğŸ’» demo2](#5--demo2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

è·Ÿ css ä¸­çš„ box-shadow ç±»ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨äºç»™ç›’å­æ·»åŠ é˜´å½±ã€‚åœ¨ canvas ä¸­ï¼Œå¯ä»¥ç»™é˜´å½±æ·»åŠ é¢œè‰²ctx.shadowColorã€æ¨¡ç³ŠåŠå¾„shadowBlurã€åç§»shadowOffsetXã€shadowOffsetYã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowOffsetY
- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowOffsetX
- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowBlur
- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowColor

## 3. ğŸ“’ notes

shadowColor è®¾ç½®é˜´å½±çš„é¢œè‰²ã€‚

shadowBlur è®¾ç½®é˜´å½±çš„æ¨¡ç³Šç¨‹åº¦ã€‚å€¼è¶Šå¤§ï¼Œé˜´å½±è¶Šæ¨¡ç³Šã€‚

shadowOffsetX å’Œ shadowOffsetY å±æ€§ç”¨äºè®¾ç½®é˜´å½±çš„åç§»é‡ã€‚

## 4. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // shadowColor: é˜´å½±çš„é¢œè‰²
      // shadowBlur: é˜´å½±çš„æ¨¡ç³Šç¨‹åº¦ã€‚å€¼è¶Šå¤§ï¼Œé˜´å½±è¶Šæ¨¡ç³Šã€‚

      const canvas = document.createElement('canvas')
      drawGrid(canvas, 400, 400, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()

      ctx.shadowColor = 'yellow'
      // è¡¨ç¤ºé˜´å½±çš„é¢œè‰²ä¸ºé»„è‰²

      ctx.shadowBlur = 100
      // è¡¨ç¤ºé˜´å½±çš„æ¨¡ç³Šç¨‹åº¦ä¸º 100

      ctx.fillStyle = 'red'
      ctx.arc(200, 200, 100, 0, Math.PI * 2)
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-02-11.png)

## 5. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 400, 400, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.shadowColor = '#888' // é˜´å½±çš„é¢œè‰²ä¸ºç°è‰²
      ctx.shadowBlur = 15

      // shadowOffsetX å’Œ shadowOffsetY å±æ€§ç”¨äºè®¾ç½®é˜´å½±çš„åç§»é‡ã€‚
      ctx.shadowOffsetX = 8
      ctx.shadowOffsetY = 8

      // åˆ›å»ºä¸€ä¸ªå¾„å‘æ¸å˜
      const gradient = ctx.createRadialGradient(170, 170, 30, 200, 200, 100)
      // 170, 170, 30 è¡¨ç¤ºæ¸å˜çš„èµ·ç‚¹æ˜¯ä¸€ä¸ªåœ†å¿ƒä¸º (170, 170) åŠå¾„ä¸º 30 çš„åœ†ã€‚
      // 200, 200, 100 è¡¨ç¤ºæ¸å˜çš„ç»ˆç‚¹æ˜¯ä¸€ä¸ªåœ†å¿ƒä¸º (200, 200) åŠå¾„ä¸º 100 çš„åœ†ã€‚
      gradient.addColorStop(0, 'rgb(221, 0, 0)') // å¼€å§‹ä½ç½®æ›´äº®çº¢
      gradient.addColorStop(1, 'rgb(136, 0, 0)') // ç»“æŸä½ç½®æ›´é»‘çº¢

      ctx.fillStyle = gradient
      ctx.arc(200, 200, 100, 0, Math.PI * 2)
      ctx.fill()

      // æ¨¡æ‹Ÿåœºæ™¯ï¼š
      // å…‰æºåœ¨å·¦ä¸Šè§’ï¼Œé˜´å½±åœ¨å³ä¸‹è§’ã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-02-24.png)


# [README.md](./0044.%20ä½¿ç”¨%20ctx.filter%20å®ç°æ»¤é•œæ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0044. ä½¿ç”¨ ctx.filter å®ç°æ»¤é•œæ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0044.%20%E4%BD%BF%E7%94%A8%20ctx.filter%20%E5%AE%9E%E7%8E%B0%E6%BB%A4%E9%95%9C%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1 - blur](#4--demo1---blur)
- [5. ğŸ’» demo2 - brightness](#5--demo2---brightness)
- [6. ğŸ’» demo3 - hue-rotate](#6--demo3---hue-rotate)
- [7. ğŸ’» demo4 - drop-shadow](#7--demo4---drop-shadow)
- [8. ğŸ’» demo5 - invert](#8--demo5---invert)
- [9. ğŸ’» demo6 - sepia](#9--demo6---sepia)
- [10. ğŸ’» demo7 - grayscale](#10--demo7---grayscale)
- [11. ğŸ’» demo8 - saturate](#11--demo8---saturate)
- [12. ğŸ’» demo9 - contrast](#12--demo9---contrast)
- [13. ğŸ’» demo10 - ä½¿ç”¨ url å¼•ç”¨ svg æ»¤é•œ](#13--demo10---ä½¿ç”¨-url-å¼•ç”¨-svg-æ»¤é•œ)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

æ–‡æ¡£å¯¹ ctx.filter å®ç°æ»¤é•œæ•ˆæœåšäº†ä¸ªç®€è¿°ï¼Œå¿«é€Ÿè¿‡äº†ä¸€éå’Œæ»¤é•œç›¸å…³çš„éƒ¨åˆ†å†…å®¹ã€‚
é™Œç”Ÿçš„å•è¯æœ‰äº›å¤šâ€¦â€¦ éœ€è¦ç†è§£è¿™äº›å•è¯çš„å«ä¹‰ã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/filter - MDN - ctx.filterã€‚

## 3. ğŸ“’ notes

ctx.filter ç”¨äºè®¾ç½®æ»¤é•œæ•ˆæœï¼Œè·Ÿ css ä¸­çš„æ»¤é•œè¯­æ³•ã€åŠŸèƒ½éƒ½éå¸¸ç±»ä¼¼ã€‚

**å•è¯**

- brightnessï¼Œäº®åº¦
- hueï¼Œè‰²è°ƒ
- dropï¼ŒæŠ•å½±ï¼Œä¸‹æŠ•
- invertï¼Œåè½¬
- sepiaï¼Œæ£•è¤è‰²ï¼Œä¹Œè´¼å¢¨è‰²
- saturateï¼Œé¥±å’Œåº¦
- contrastï¼Œå¯¹æ¯”åº¦

**å‡†å¤‡è¾…åŠ©å‡½æ•° createCanvas**

```javascript
function createCanvas(filterStr) {
  const canvas = document.createElement('canvas')
  drawGrid(canvas, 250, 500, 50)
  document.body.append(canvas)
  const ctx = canvas.getContext('2d')

  ctx.beginPath()

  if (filterStr) {
    ctx.filter = filterStr
  }

  const img = new Image()
  img.src = './å®‰å¦®å¨….png'
  img.onload = function () {
    ctx.drawImage(img, 50, 50)
  }
}
```

## 4. ğŸ’» demo1 - blur

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'blur(5px)'
      // è®¾ç½®æ¨¡ç³Šï¼Œå€¼è¶Šå¤§ï¼Œæ¨¡ç³Šæ•ˆæœè¶Šæ˜æ˜¾ã€‚
      createCanvas('blur(5px)')
      createCanvas('blur(10px)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-05-21.png)

## 5. ğŸ’» demo2 - brightness

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'brightness(1.5)'
      // è®¾ç½®äº®åº¦
      // 1 è¡¨ç¤ºåŸæ ·
      // < 1 å˜æš—
      // > 1 å˜äº®
      createCanvas('brightness(1.5)')
      createCanvas('brightness(1)')
      createCanvas('brightness(0.5)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-05-31.png)

## 6. ğŸ’» demo3 - hue-rotate

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'hue-rotate(180deg)'
      // ç”¨äºè®¾ç½®è‰²è°ƒ
      // å‚æ•°è¡¨ç¤ºè‰²è°ƒæ—‹è½¬çš„è§’åº¦ã€‚
      // è§’åº¦å¯ä»¥æ˜¯ä» 0deg åˆ° 360degã€‚
      // å…¶ä¸­ 0deg è¡¨ç¤ºä¸è¿›è¡Œè‰²è°ƒæ”¹å˜ï¼Œ360deg è¡¨ç¤ºå®Œå…¨æ—‹è½¬ä¸€åœˆï¼Œæ•ˆæœåŒ 0degã€‚
      // ä¸åŒçš„è§’åº¦å€¼ä¼šå°†é¢œè‰²æ²¿ç€è‰²å½©ç¯ç§»åŠ¨ï¼Œäº§ç”Ÿä¸åŒçš„è§†è§‰æ•ˆæœã€‚
      createCanvas('hue-rotate(0deg)')
      createCanvas('hue-rotate(90deg)')
      createCanvas('hue-rotate(180deg)')
      createCanvas('hue-rotate(270deg)')
      createCanvas('hue-rotate(360deg)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-05-41.png)

## 7. ğŸ’» demo4 - drop-shadow


```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'drop-shadow(x y blur color)'
      // x - é˜´å½±åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„åç§»é‡ï¼Œå¯ä»¥æ˜¯æ­£å€¼æˆ–è´Ÿå€¼ã€‚
      // y - é˜´å½±åœ¨å‚ç›´æ–¹å‘ä¸Šçš„åç§»é‡ï¼Œå¯ä»¥æ˜¯æ­£å€¼æˆ–è´Ÿå€¼ã€‚
      // blur - æ¨¡ç³ŠåŠå¾„ï¼Œå®šä¹‰é˜´å½±çš„è½¯åŒ–ç¨‹åº¦ã€‚æ•°å€¼è¶Šå¤§ï¼Œé˜´å½±è¶Šæ¨¡ç³Šå’Œæ‰©æ•£ã€‚
      // color - é˜´å½±çš„é¢œè‰²ã€‚
      createCanvas('drop-shadow(10px 10px 10px yellow)')
      createCanvas('drop-shadow(10px 10px 10px #231f1d)')
      createCanvas('drop-shadow(10px 10px 10px #e4a5a8)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-05-51.png)

## 8. ğŸ’» demo5 - invert

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'invert(1)'

      // è¯¥å‡½æ•°å°†æ‰€æœ‰é¢œè‰²çš„å€¼åè½¬ï¼Œä¾‹å¦‚é»‘å˜ç™½ï¼Œç™½å˜é»‘ï¼Œä»¥åŠå…¶ä»–é¢œè‰²çš„ç›¸å¯¹åè‰²ã€‚
      // è¿™ç§æ»¤é•œå¯ä»¥åˆ›å»ºå…·æœ‰å¼ºçƒˆè§†è§‰å¯¹æ¯”æ•ˆæœçš„å›¾åƒï¼Œå¸¸ç”¨äºç‰¹æ®Šè§†è§‰æ•ˆæœæˆ–è¾…åŠ©åŠŸèƒ½ï¼ˆæ¯”å¦‚å¤œé—´æ¨¡å¼æˆ–è§†è§‰éšœç¢æ¨¡å¼ï¼‰ã€‚

      // è®¾ç½®åè‰²
      // 0   è¡¨ç¤ºåŸæ ·
      // 0.5 è¡¨ç¤ºç°è‰²
      // 1   è¡¨ç¤ºé¢œè‰²å–å
      createCanvas('invert(0)')
      createCanvas('invert(0.5)')
      createCanvas('invert(1)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-06-02.png)

## 9. ğŸ’» demo6 - sepia

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'sepia(1)'
      // ç”¨äºç»™å›¾åƒæ·»åŠ ä¸€ç§æ·±è¤è‰²çš„æ€€æ—§æ•ˆæœï¼Œç±»ä¼¼äºæ—©æœŸæ‘„å½±ä¸­ä½¿ç”¨çš„æ£•è¤è‰²è°ƒã€‚
      // 0 è¡¨ç¤ºåŸæ ·
      // 1 æ€€æ—§é£æ ¼ï¼ˆæ·±è¤è‰²ï¼‰
      createCanvas('sepia(0)')
      createCanvas('sepia(0.5)')
      createCanvas('sepia(1)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-06-13.png)

## 10. ğŸ’» demo7 - grayscale

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'grayscale()'
      // è®¾ç½®ç°åº¦
      // å–å€¼èŒƒå›´ï¼š0ï½1
      // å½“è®¾ä¸º 0 æ—¶ï¼Œå…ƒç´ çš„é¢œè‰²ä¸å‘ç”Ÿå˜åŒ–ã€‚
      // å½“è®¾ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºå…ƒç´ å®Œå…¨è½¬ä¸ºç°è‰²ï¼Œå³å½»åº•ç°åº¦åŒ–ã€‚
      createCanvas('grayscale(0)')
      createCanvas('grayscale(0.5)')
      createCanvas('grayscale(1)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-06-26.png)

## 11. ğŸ’» demo8 - saturate

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'saturate()'
      // è®¾ç½®é¥±å’Œåº¦
      // 1 è¡¨ç¤ºåŸæ ·
      // < 1 å›¾åƒæ•´ä½“ä¼šå˜ç°
      // > 1 å›¾åƒæ•´ä½“é¢œè‰²ä¼šæ›´é²œæ˜
      createCanvas('saturate(0.5)')
      createCanvas('saturate(1)')
      createCanvas('saturate(1.5)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-06-37.png)

## 12. ğŸ’» demo9 - contrast

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      canvas {
        margin: 2rem;
      }
    </style>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script src="./createCanvas.js"></script>
    <script>
      // åŸå›¾
      createCanvas()

      // ctx.filter = 'contrast()'
      // è®¾ç½®å¯¹æ¯”åº¦
      // 1 è¡¨ç¤ºåŸæ ·
      // < 1 å¯¹æ¯”åº¦å‡å¼±ï¼Œå›¾åƒå„éƒ¨åˆ†é¢œè‰²æ›´åŠ æ¥è¿‘
      // > 1 å¯¹æ¯”åº¦å¢å¼ºï¼Œé¢œè‰²æ›´é²œæ˜
      createCanvas('contrast(0.5)')
      createCanvas('contrast(1)')
      createCanvas('contrast(1.5)')
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-06-50.png)

## 13. ğŸ’» demo10 - ä½¿ç”¨ url å¼•ç”¨ svg æ»¤é•œ

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Canvas Using SVG Filter</title>
  </head>
  <body>
    <svg width="0" height="0">
      <!-- å®šä¹‰ä¸€ä¸ª svg æ»¤é•œ -->
      <defs>
        <filter id="blur-filter">
          <feGaussianBlur in="SourceGraphic" stdDeviation="5"></feGaussianBlur>
        </filter>
      </defs>
    </svg>


    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 200, 200, 50)
      document.body.appendChild(canvas)
      const ctx = canvas.getContext('2d')

      // å¼•ç”¨ svg æ»¤é•œã€‚
      ctx.filter = 'url(#blur-filter)'

      // ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢
      ctx.fillStyle = 'red'
      ctx.fillRect(50, 50, 100, 100)
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-12-07-07.png)


# [README.md](./0045.%20ä½¿ç”¨%20ctx.rotate%20å®ç°å›¾åƒæ—‹è½¬/README.md)<!-- !======> SEPERATOR <====== -->
# [0045. ä½¿ç”¨ ctx.rotate å®ç°å›¾åƒæ—‹è½¬](https://github.com/Tdahuyou/canvas/tree/main/0045.%20%E4%BD%BF%E7%94%A8%20ctx.rotate%20%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E6%97%8B%E8%BD%AC)

<!-- region:toc -->
- [1. ğŸ”— links](#1--links)
- [2. ğŸ“’ notes](#2--notes)
- [3. ğŸ’» demo1](#3--demo1)
- [4. ğŸ’» demo2](#4--demo2)
<!-- endregion:toc -->


## 1. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/rotate - MDN - CanvasRenderingContext2Dï¼šrotate() æ–¹æ³•ã€‚

## 2. ğŸ“’ notes

ctx.rotate ç”¨äºæ—‹è½¬ç”»å¸ƒçš„å½“å‰ç»˜å›¾ã€‚

**æ³¨æ„ï¼š**
1. æ—‹è½¬ä¸ä¼šå¯¹ä¹‹å‰ç»˜åˆ¶å¥½çš„å†…å®¹æœ‰å½±å“ã€‚
2. æ—‹è½¬çš„è§’åº¦å•ä½æ˜¯å¼§åº¦ã€‚
3. æ—‹è½¬é»˜è®¤æ˜¯åŸºäºç”»å¸ƒçš„åŸç‚¹æ¥æ—‹è½¬çš„ã€‚
4. è¿™ç§æ—‹è½¬ä¼šå½±å“åˆ°ä¹‹åæ‰€æœ‰çš„ç»˜åˆ¶æ“ä½œï¼Œç›´åˆ°ç”»å¸ƒçš„å˜æ¢çŠ¶æ€è¢«é‡ç½®æˆ–è€…å†æ¬¡ä¿®æ”¹ã€‚
5. æ¯æ¬¡çš„æ—‹è½¬éƒ½æ˜¯åŸºäºå½“å‰çš„åæ ‡è½´å·²æ—‹è½¬çš„è§’åº¦è¿›ä¸€æ­¥æ—‹è½¬çš„ã€‚

## 3. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // ctx.rotate ç”¨äºæ—‹è½¬ç”»å¸ƒçš„å½“å‰ç»˜å›¾ã€‚

      // æ³¨æ„ï¼š
      // 1. æ—‹è½¬ä¸ä¼šå¯¹ä¹‹å‰ç»˜åˆ¶å¥½çš„å†…å®¹æœ‰å½±å“ã€‚
      // 2. æ—‹è½¬çš„è§’åº¦å•ä½æ˜¯å¼§åº¦ã€‚
      // 3. æ—‹è½¬é»˜è®¤æ˜¯åŸºäºç”»å¸ƒçš„åŸç‚¹æ¥æ—‹è½¬çš„ã€‚
      // 4. è¿™ç§æ—‹è½¬ä¼šå½±å“åˆ°ä¹‹åæ‰€æœ‰çš„ç»˜åˆ¶æ“ä½œï¼Œç›´åˆ°ç”»å¸ƒçš„å˜æ¢çŠ¶æ€è¢«é‡ç½®æˆ–è€…å†æ¬¡ä¿®æ”¹ã€‚
      // 5. æ¯æ¬¡çš„æ—‹è½¬éƒ½æ˜¯åŸºäºå½“å‰çš„åæ ‡è½´å·²æ—‹è½¬çš„è§’åº¦è¿›ä¸€æ­¥æ—‹è½¬çš„ã€‚

      const canvas = document.createElement('canvas')
      drawGrid(canvas, 300, 300, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.globalAlpha = 0.5

      ctx.fillStyle = 'red'
      ctx.rect(50, 50, 50, 50)
      ctx.fill()

      // åæ ‡è½´æ—‹è½¬ 0Â°
      // åœ¨ (200, 50) ä½ç½®ç»˜åˆ¶ä¸€ä¸ªåœ†
      ctx.beginPath()
      ctx.arc(200, 50, 10, 0, Math.PI * 2)
      ctx.fill()

      // åæ ‡è½´æ—‹è½¬ 10Â°
      // åæ ‡æ—‹è½¬ 10Â° å†ç»˜åˆ¶ä¸€ä¸ªåœ†
      ctx.rotate(10 * Math.PI / 180)
      ctx.beginPath()
      ctx.arc(200, 50, 10, 0, Math.PI * 2)
      ctx.fill()

      // åæ ‡è½´æ—‹è½¬ 20Â°
      // åæ ‡æ—‹è½¬ 10Â° å†ç»˜åˆ¶ä¸€ä¸ªåœ†
      ctx.rotate(10 * Math.PI / 180)
      ctx.beginPath()
      ctx.arc(200, 50, 10, 0, Math.PI * 2)
      ctx.fill()

      // åæ ‡è½´æ—‹è½¬ 30Â°
      // åæ ‡æ—‹è½¬ 10Â° å†ç»˜åˆ¶ä¸€ä¸ªåœ†
      ctx.rotate(10 * Math.PI / 180)
      ctx.beginPath()
      ctx.arc(200, 50, 10, 0, Math.PI * 2)
      ctx.fill()

      // åæ ‡è½´æ—‹è½¬ 40Â°
      // åæ ‡æ—‹è½¬ 10Â° å†ç»˜åˆ¶ä¸€ä¸ªåœ†
      ctx.rotate(10 * Math.PI / 180)
      ctx.beginPath()
      ctx.arc(200, 50, 10, 0, Math.PI * 2)
      ctx.fill()

      // åæ ‡è½´æ—‹è½¬ 50Â°
      // åæ ‡æ—‹è½¬ 10Â° å†ç»˜åˆ¶ä¸€ä¸ªåœ†
      ctx.rotate(10 * Math.PI / 180)
      ctx.beginPath()
      ctx.arc(200, 50, 10, 0, Math.PI * 2)
      ctx.fill()

      // åæ ‡è½´æ—‹è½¬ 60Â°
      // åæ ‡æ—‹è½¬ 10Â° å†ç»˜åˆ¶ä¸€ä¸ªåœ†
      ctx.rotate(10 * Math.PI / 180)
      ctx.beginPath()
      ctx.arc(200, 50, 10, 0, Math.PI * 2)
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-03-44.png)

## 4. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // éœ€æ±‚æè¿°ï¼š
      // ç”»å¸ƒä¸Šæœ‰ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œè¯·é€šè¿‡ ctx.rotate æ—‹è½¬ï¼Œå°†è¿™ä¸ªæ­£æ–¹å½¢å˜ä¸ºè±å½¢ã€‚
      // è¦æ±‚æ­£æ–¹å½¢ä¸­å¿ƒä½ç½®å’Œæ—‹è½¬åå¾—åˆ°çš„è±å½¢çš„ä¸­å¿ƒä½ç½®æ˜¯ä¸€æ ·çš„ã€‚
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 150, 150, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()

      // å‡è®¾æ­£æ–¹å½¢ç»˜åˆ¶åœ¨ (50, 50) ä½ç½®ï¼Œå®½é«˜ä¸º 50ã€‚
      ctx.strokeStyle = 'red'
      ctx.setLineDash([10])
      ctx.strokeRect(50, 50, 50, 50)

      // 1. å°†åæ ‡è½´çš„åŸç‚¹è®¾ç½®ä¸ºæ—‹è½¬çŸ©å½¢çš„ä¸­å¿ƒ
      ctx.translate(75, 75)
      // 2. åæ ‡è½´æ—‹è½¬ 45Â°
      ctx.rotate(45 * Math.PI / 180)

      ctx.fillStyle = 'blue'
      // 3. ç»˜åˆ¶çŸ©å½¢
      ctx.rect(50 - 75, 50 - 75, 50, 50)
      // æ³¨æ„ï¼š
      // åæ ‡è½´çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–
      // å¦‚æœæƒ³è¦åœ¨åŸå§‹å›¾å½¢çš„ä¸­å¿ƒç»˜åˆ¶è±å½¢ï¼Œéœ€è¦å°†çŸ©å½¢çš„ä½ç½®è®¾ç½®ä¸º (-25, -25)
      // è¿™æ˜¯åŸºäºåŸå§‹å›¾å½¢çš„ä½ç½®å’Œåæ ‡åç§»ä½ç½®è®¡ç®—å‡ºæ¥çš„ç»“æœ (50 - 75, 50 - 75)
      ctx.fill()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-03-54.png)


# [README.md](./0046.%20ä½¿ç”¨%20ctx.scale%20ç¼©æ”¾ç»˜åˆ¶çš„å›¾åƒ/README.md)<!-- !======> SEPERATOR <====== -->
# [0046. ä½¿ç”¨ ctx.scale ç¼©æ”¾ç»˜åˆ¶çš„å›¾åƒ](https://github.com/Tdahuyou/canvas/tree/main/0046.%20%E4%BD%BF%E7%94%A8%20ctx.scale%20%E7%BC%A9%E6%94%BE%E7%BB%98%E5%88%B6%E7%9A%84%E5%9B%BE%E5%83%8F)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1](#4--demo1)
- [5. ğŸ’» demo2](#5--demo2)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ctx.scale ç”¨äºåœ¨ç”»å¸ƒä¸Šç¼©æ”¾ç»˜åˆ¶çš„å›¾åƒã€‚é€šè¿‡ä¼ å…¥è´Ÿæ•°ï¼Œè¿˜èƒ½å®ç°åæ ‡çš„ç¿»è½¬ã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/scale - MDN - CanvasRenderingContext2Dï¼šscale() æ–¹æ³•

## 3. ğŸ“’ notes

ctx.scale ç”¨äºåœ¨ç”»å¸ƒä¸Šç¼©æ”¾ç»˜åˆ¶çš„å›¾åƒã€‚

é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥æ›´æ”¹ç”»å¸ƒä¸Šå›¾å½¢çš„å¤§å°ï¼Œè€Œä¸æ”¹å˜å›¾å½¢æœ¬èº«çš„å®šä¹‰ã€‚

**æ³¨æ„ï¼š**
1. è¿™ç©æ„å„¿ä¸ä¼šå¯¹ä¹‹å‰ç»˜åˆ¶çš„å›¾åƒèµ·ä½œç”¨ã€‚
2. è¿™ç©æ„å„¿å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆå°†ä¼šå¯¼è‡´åæ ‡ç³»åè½¬ã€‚
3. è¿™ç§å˜æ¢å¯¹åç»­çš„æ‰€æœ‰ç»˜å›¾æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œç›´åˆ°ç”»å¸ƒçš„ç¼©æ”¾çŠ¶æ€è¢«é‡ç½®æˆ–ä¿®æ”¹ã€‚

## 4. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // ctx.scale ç”¨äºåœ¨ç”»å¸ƒä¸Šç¼©æ”¾ç»˜åˆ¶çš„å›¾åƒã€‚

      // é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥æ›´æ”¹ç”»å¸ƒä¸Šå›¾å½¢çš„å¤§å°ï¼Œè€Œä¸æ”¹å˜å›¾å½¢æœ¬èº«çš„å®šä¹‰ã€‚

      // æ³¨æ„ï¼š
      // 1. è¿™ç©æ„å„¿ä¸ä¼šå¯¹ä¹‹å‰ç»˜åˆ¶çš„å›¾åƒèµ·ä½œç”¨ã€‚
      // 2. è¿™ç§å˜æ¢å¯¹åç»­çš„æ‰€æœ‰ç»˜å›¾æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œç›´åˆ°ç”»å¸ƒçš„ç¼©æ”¾çŠ¶æ€è¢«é‡ç½®æˆ–ä¿®æ”¹ã€‚

      const canvas = document.createElement('canvas')
      drawGrid(canvas, 300, 300, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.globalAlpha = 0.5

      // ç»˜åˆ¶ä¸€ä¸ªåŸå§‹å¤§å°çš„çº¢è‰²çŸ©å½¢
      ctx.fillStyle = 'red'
      ctx.fillRect(10, 10, 50, 50)

      // ç¼©æ”¾ç”»å¸ƒ
      ctx.scale(2, 2)
      // æ¨ªå‘ç¼©æ”¾ 2 å€ï¼Œçºµå‘ç¼©æ”¾ 2 å€

      // åœ¨ç¼©æ”¾åçš„ç”»å¸ƒä¸Šç»˜åˆ¶ä¸€ä¸ªè“è‰²çŸ©å½¢
      ctx.fillStyle = 'blue'
      ctx.fillRect(10, 10, 50, 50)

      // ä¸¤æ¬¡åœ¨åŒä¸€ä¸ªä½ç½®ç»˜åˆ¶åŒæ ·å°ºå¯¸çš„çŸ©å½¢ã€‚
      // åœ¨åæ ‡è¢«ç¼©æ”¾åï¼Œè¿™ä¸¤ä¸ªçŸ©å½¢ç»˜åˆ¶çš„ä½ç½®å’Œå°ºå¯¸éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚
      // ä¸»è¦åŸå› åœ¨äºåæ ‡çš„åˆ»åº¦æ”¹å˜äº†ï¼ŒåŸåæ ‡ç³»çš„ä¸¤ä¸ªåˆ»åº¦ç›¸å½“äºæ–°åæ ‡ç³»çš„ä¸€ä¸ªåˆ»åº¦ã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-05-25.png)

## 5. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // ctx.scale è¿™ç©æ„å„¿å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆå°†ä¼šå¯¼è‡´åæ ‡ç³»åè½¬ã€‚

      const canvas = document.createElement('canvas')
      drawGrid(canvas, 500, 500, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.globalAlpha = 0.5

      // å°†ç”»å¸ƒåŸç‚¹ç§»è‡³ä¸­å¿ƒ
      ctx.translate(canvas.width / 2, canvas.height / 2)

      // è¾…åŠ©ç‚¹ æ ‡æ³¨å‡ºåŸç‚¹
      ctx.fillStyle = 'blue'
      ctx.arc(0, 0, 10, 0, Math.PI * 2)
      ctx.fill()

      // ç»˜åˆ¶ä¸€ä¸ªåŸå§‹å¤§å°çš„çº¢è‰²çŸ©å½¢
      ctx.fillStyle = 'red'
      ctx.fillRect(50, 50, 100, 100)

      // æ°´å¹³ç¿»è½¬
      ctx.scale(-1, 1)
      // ç”±äºåæ ‡ç³»è¢«ç¿»è½¬ï¼Œæ‰€ä»¥è¿™é‡Œçš„ x åæ ‡çš„æ­£æ–¹å‘ï¼ˆå‘å³ï¼‰æŒ‡å‘äº†åŸæ¥çš„è´Ÿæ–¹å‘ï¼ˆå‘å·¦ï¼‰ã€‚

      // ç»˜åˆ¶ä¸€ä¸ªè“è‰²çŸ©å½¢ï¼Œåæ ‡å’Œå°ºå¯¸éƒ½è·Ÿå‰é¢çš„çŸ©å½¢ä¸€æ ·ã€‚
      ctx.fillStyle = 'blue'
      ctx.fillRect(50, 50, 100, 100) // æ³¨æ„è¿™é‡Œçš„ x åæ ‡æ˜¯è´Ÿçš„
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-05-36.png)


# [README.md](./0047.%20ä½¿ç”¨%20ctx.transform%20æ¥è½¬æ¢å›¾å½¢/README.md)<!-- !======> SEPERATOR <====== -->
# [0047. ä½¿ç”¨ ctx.transform æ¥è½¬æ¢å›¾å½¢](https://github.com/Tdahuyou/canvas/tree/main/0047.%20%E4%BD%BF%E7%94%A8%20ctx.transform%20%E6%9D%A5%E8%BD%AC%E6%8D%A2%E5%9B%BE%E5%BD%A2)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
  - [3.1. ctx.transform åæ ‡è½¬æ¢è®¡ç®—è§„åˆ™](#31-ctxtransform-åæ ‡è½¬æ¢è®¡ç®—è§„åˆ™)
- [4. ğŸ’» demo1](#4--demo1)
- [5. ğŸ’» demo2](#5--demo2)
- [6. ğŸ’» demo3](#6--demo3)
- [7. ğŸ’» demo4](#7--demo4)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ctx.transform å¾ˆå¼ºå¤§ï¼Œå¯ä»¥å®ç°å¾ˆå¤šè½¬æ¢æ•ˆæœï¼Œéš¾ç‚¹åœ¨äºè®¡ç®—åæ ‡çš„è½¬æ¢è§„åˆ™ã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform - MDN - CanvasRenderingContext2Dï¼štransform() æ–¹æ³•

## 3. ğŸ“’ notes

ctx.transform å¾ˆå¼ºå¤§ï¼Œå¯ä»¥å®ç°å¾ˆå¤šè½¬æ¢æ•ˆæœã€‚ä½†æ˜¯è¿™ç©æ„å„¿çš„å‚æ•°å€¼éœ€è¦æ ¹æ®å…·ä½“çš„è½¬æ¢æ•ˆæœæ¥æŒ¨ä¸ªè®¡ç®—ã€‚

### 3.1. ctx.transform åæ ‡è½¬æ¢è®¡ç®—è§„åˆ™

è¿™éƒ¨åˆ†ä»‹ç»æœ‰å…³ ctx.transform åæ ‡è½¬æ¢çš„è®¡ç®—è§„åˆ™ã€‚

é‡ç‚¹éœ€è¦ç†è§£æ–‡ä¸­æåˆ°çš„å…¬å¼ï¼Œéœ€è¦çŸ¥é“ `(x`, y`)` æ˜¯å¦‚ä½•è®¡ç®—å‡ºæ¥çš„ã€‚

`ctx.transform` æ–¹æ³•ç”¨äºä¿®æ”¹ç”»å¸ƒçš„å½“å‰å˜æ¢çŸ©é˜µã€‚å®ƒæ‰§è¡Œä¸€ä¸ªçŸ©é˜µä¹˜æ³•æ¥åº”ç”¨ä¸€ä¸ªå˜æ¢ï¼Œè¿™ä¸ªå˜æ¢å¯ä»¥åŒ…æ‹¬æ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨ï¼ˆå¹³ç§»ï¼‰ä»¥åŠå€¾æ–œï¼ˆé”™åˆ‡ï¼‰ç­‰æ“ä½œã€‚

ä½¿ç”¨ `transform()` æ–¹æ³•å¯ä»¥éå¸¸çµæ´»åœ°å¯¹å›¾å½¢è¿›è¡Œå¤šç§å˜æ¢æ“ä½œï¼Œæ˜¯é«˜çº§å›¾å½¢å¤„ç†ä¸­éå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚

`ctx.transform(a, b, c, d, e, f)` è¿™é‡Œçš„å‚æ•°å¯¹åº”äºå˜æ¢çŸ©é˜µçš„ç»„æˆéƒ¨åˆ†ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

- **a** (m11): æ°´å¹³ç¼©æ”¾ç»˜å›¾
- **b** (m12): æ°´å¹³å€¾æ–œç»˜å›¾
- **c** (m21): å‚ç›´å€¾æ–œç»˜å›¾
- **d** (m22): å‚ç›´ç¼©æ”¾ç»˜å›¾
- **e** (dx): æ°´å¹³ç§»åŠ¨ç»˜å›¾
- **f** (dy): å‚ç›´ç§»åŠ¨ç»˜å›¾

æ‰€è°“çš„å˜æ¢å°±æ˜¯å°†åŸåæ ‡æŒ‰ç…§ä¸€å®šçš„å˜æ¢å…¬å¼ï¼ˆé€»è¾‘ï¼‰ï¼Œå˜æ¢æˆä¸€ä¸ªæ–°åæ ‡ã€‚

**è½¬æ¢å…¬å¼ï¼š**

$$
\begin{bmatrix}
x' \\
y' \\
1
\end{bmatrix}
=
\begin{bmatrix}
a & c & e \\
b & d & f \\
0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
1
\end{bmatrix}
=>
\begin{aligned}
x' &= ax + cy + e \\
y' &= bx + dy + f \\
1 &= 0x + 0y + 1
\end{aligned}
$$

åœ¨å…¬å¼ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“çš„å€¼æ˜¯å›¾å½¢çš„å½“å‰åæ ‡ `(x, y)`ï¼Œå…¶ä¸­ aï½f æ˜¯æˆ‘ä»¬ä¼ é€’çš„å‚æ•°ã€‚

**ç´¯ç§¯æ•ˆåº”ï¼š**

`transform()` æ–¹æ³•ä¼šä¸å½“å‰å˜æ¢çŸ©é˜µç›¸ä¹˜ï¼Œå› æ­¤å®ƒçš„æ•ˆæœæ˜¯ç´¯ç§¯çš„ã€‚

å¦‚æœè¦é‡ç½®å˜æ¢çŸ©é˜µåˆ°é»˜è®¤çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨ `ctx.setTransform(1, 0, 0, 1, 0, 0)`ã€‚å°† aã€d ç½® 1ï¼Œå…¶ä»–å€¼éƒ½ç½® 0ï¼Œä¹Ÿå°±æ˜¯è¯´ `x = x`` `y = y``ã€‚

**åŒºåˆ«äº `setTransform()`ï¼š**

`setTransform()` ä¹Ÿç”¨äºè®¾ç½®å˜æ¢çŸ©é˜µï¼Œä½†å®ƒä¼šé‡ç½®å½“å‰çš„å˜æ¢çŸ©é˜µå†è®¾ç½®æ–°çš„çŸ©é˜µï¼Œè€Œä¸æ˜¯ç´¯ç§¯åº”ç”¨ã€‚

## 4. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 500, 500, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      // åŸå§‹çŸ©å½¢
      ctx.fillStyle = 'blue'
      ctx.fillRect(50, 50, 100, 50)

      ctx.transform(1, 0, 0, 1, 100, 100)
      // è¡¨ç¤ºæ¨ªçºµå„ç§»åŠ¨ 100

      ctx.fillStyle = 'red'
      ctx.fillRect(50, 50, 100, 50)
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-11-05.png)

## 5. ğŸ’» demo2

```html
<!-- 2.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 500, 200, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      // åŸå§‹çŸ©å½¢
      ctx.fillStyle = 'blue'
      ctx.fillRect(100, 100, 100, 50)
      // ä» x ä¸º 100ï¼Œy ä¸º 100 çš„ä½ç½®å¼€å§‹
      // ç”»ä¸€ä¸ªæ¨ªå‘é•¿åº¦ä¸º 100 çºµå‘é•¿åº¦ä¸º 50 çš„çŸ©å½¢

      ctx.transform(2, 0, 0, 0.5, 0, 0)
      // è¡¨ç¤ºæ¨ªå‘æ”¾å¤§ 2 å€ï¼Œçºµå‘ç¼©å° 0.5 å€ã€‚

      ctx.fillStyle = 'red'
      ctx.fillRect(100, 100, 100, 50)
      // ä» x ä¸º 2 * 100ï¼Œy ä¸º 0.5 * 100 çš„ä½ç½®å¼€å§‹
      // ç”»ä¸€ä¸ªæ¨ªå‘é•¿åº¦ä¸º 2 * 100 çºµå‘é•¿åº¦ä¸º 0.5 * 50 çš„çŸ©å½¢
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-11-15.png)

## 6. ğŸ’» demo3

```html
<!-- 3.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 500, 200, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.globalAlpha = 0.8

      ctx.fillStyle = 'blue'
      ctx.fillRect(100, 100, 100, 50)

      ctx.transform(1, 0, Math.tan((30 * Math.PI) / 180), 1, 0, 0)
      // å®ç°å€¾æ–œæ•ˆæœ

      ctx.fillStyle = 'red'
      ctx.fillRect(100, 100, 100, 50)
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-11-25.png)

## 7. ğŸ’» demo4

```html
<!-- 4.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 500, 200, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.globalAlpha = 0.8
      ctx.lineWidth = 10

      ctx.beginPath()
      ctx.strokeStyle = 'blue'
      ctx.moveTo(0, 0)
      ctx.lineTo(200, 0)
      ctx.stroke()

      ctx.transform(
        Math.cos((45 * Math.PI) / 180), // a
        Math.sin((45 * Math.PI) / 180), // b
        -Math.sin((45 * Math.PI) / 180), // c
        Math.cos((45 * Math.PI) / 180), // d
        0, // e
        0 // f
      )
      // å®ç°æ—‹è½¬æ•ˆæœ æ—‹è½¬è§’åº¦ 45Â°

      ctx.beginPath()
      ctx.strokeStyle = 'red'
      ctx.moveTo(0, 0)
      ctx.lineTo(200, 0)
      ctx.stroke()

      ctx.transform(
        Math.cos((45 * Math.PI) / 180), // a
        Math.sin((45 * Math.PI) / 180), // b
        -Math.sin((45 * Math.PI) / 180), // c
        Math.cos((45 * Math.PI) / 180), // d
        0, // e
        0 // f
      )
      // å®ç°æ—‹è½¬æ•ˆæœ æ—‹è½¬è§’åº¦ 45Â°
      // æ¯æ¬¡å˜åŒ–éƒ½æ˜¯åŸºäºä¹‹å‰çš„æ•ˆæœç´¯åŠ 
      // è¿™æ¬¡æ˜¯ç¬¬äºŒæ¬¡æ—‹è½¬ 45Â°ï¼Œç›¸å½“äºä¸€å…±æ—‹è½¬äº† 90Â°ã€‚

      ctx.beginPath()
      ctx.strokeStyle = 'orange'
      ctx.moveTo(0, 0)
      ctx.lineTo(200, 0)
      ctx.stroke()
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-11-36.png)


# [README.md](./0048.%20ä½¿ç”¨%20ctx.translate%20ç§»åŠ¨ç”»å¸ƒ/README.md)<!-- !======> SEPERATOR <====== -->
# [0048. ä½¿ç”¨ ctx.translate ç§»åŠ¨ç”»å¸ƒ](https://github.com/Tdahuyou/canvas/tree/main/0048.%20%E4%BD%BF%E7%94%A8%20ctx.translate%20%E7%A7%BB%E5%8A%A8%E7%94%BB%E5%B8%83)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
- [3. ğŸ“’ notes](#3--notes)
- [4. ğŸ’» demo1](#4--demo1)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ctx.translate ç”¨äºç§»åŠ¨ç”»å¸ƒå’Œå…¶åŸç‚¹åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/translate - MDN - CanvasRenderingContext2Dï¼štranslate() æ–¹æ³•

## 3. ğŸ“’ notes

ctx.translate ç”¨äºç§»åŠ¨ç”»å¸ƒå’Œå…¶åŸç‚¹åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ã€‚

**æ³¨æ„ï¼š**
1. è¿™ç©æ„å„¿ç§»åŠ¨çš„æ˜¯æ•´ä¸ªåæ ‡ç³»ï¼Œè€ŒéæŒ‡å®šçš„æŸä¸ªå›¾åƒã€‚
2. è¿™ç§å˜æ¢æ˜¯å¯¹åç»­çš„æ‰€æœ‰ç”»å¸ƒç»˜åˆ¶æ“ä½œèµ·ä½œç”¨çš„ï¼Œè€Œä¸ä¼šå½±å“å·²ç»ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šçš„å†…å®¹ã€‚

![](md-imgs/2024-10-04-15-12-33.png)

## 4. ğŸ’» demo1

```html
<!-- 1.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="./drawGrid.js"></script>
    <script>
      // ctx.translate ç”¨äºç§»åŠ¨ç”»å¸ƒå’Œå…¶åŸç‚¹åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ã€‚

      // æ³¨æ„ï¼š
      // 1. è¿™ç©æ„å„¿ç§»åŠ¨çš„æ˜¯æ•´ä¸ªåæ ‡ç³»ï¼Œè€ŒéæŒ‡å®šçš„æŸä¸ªå›¾åƒã€‚
      // 2. è¿™ç§å˜æ¢æ˜¯å¯¹åç»­çš„æ‰€æœ‰ç”»å¸ƒç»˜åˆ¶æ“ä½œèµ·ä½œç”¨çš„ï¼Œè€Œä¸ä¼šå½±å“å·²ç»ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šçš„å†…å®¹ã€‚
      const canvas = document.createElement('canvas')
      drawGrid(canvas, 300, 300, 50)
      document.body.append(canvas)
      const ctx = canvas.getContext('2d')

      ctx.beginPath()
      ctx.globalAlpha = 0.5

      // åŸå§‹ç»˜åˆ¶
      ctx.fillStyle = 'red'
      ctx.fillRect(0, 0, 100, 100)
      // åœ¨ (0, 0) å¤„ç»˜åˆ¶ä¸€ä¸ªçº¢è‰²çŸ©å½¢ï¼ŒçŸ©å½¢å°ºå¯¸ä¸º 100x100ã€‚

      ctx.translate(150, 150)
      // ç§»åŠ¨åæ ‡åŸç‚¹åˆ° (150, 150)
      // è¿™ä¸€æ“ä½œï¼Œä»…ä¼šå¯¹åç»­ç»˜åˆ¶çš„å›¾åƒèµ·ä½œç”¨ï¼Œè€Œä¸ä¼šå½±å“å·²ç»ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šçš„å†…å®¹ã€‚

      // åœ¨æ–°çš„åæ ‡åŸç‚¹ç»˜åˆ¶è“è‰²çŸ©å½¢
      ctx.fillStyle = 'blue'
      ctx.fillRect(0, 0, 100, 100)
      // åœ¨ (0, 0) å¤„ç»˜åˆ¶ä¸€ä¸ªè“è‰²çŸ©å½¢ï¼ŒçŸ©å½¢å°ºå¯¸ä¸º 100x100ã€‚

      // ä¸¤æ¬¡ç»˜åˆ¶çŸ©å½¢çš„ä½ç½®éƒ½æ˜¯ (0, 0)ï¼Œä½†æ˜¯ç”±äºåæ ‡åŸç‚¹çš„ä¸åŒï¼Œå¯¼è‡´äº†ä¸¤æ¬¡ç»˜åˆ¶çš„ä½ç½®ä¸åŒã€‚
    </script>
  </body>
</html>
```

![](md-imgs/2024-10-04-15-13-02.png)


# [README.md](./0049.%20æ¨¡æ‹ŸçƒŸèŠ±æ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0049. æ¨¡æ‹ŸçƒŸèŠ±æ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0049.%20%E6%A8%A1%E6%8B%9F%E7%83%9F%E8%8A%B1%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ çƒŸèŠ± - æœ€ç»ˆæ•ˆæœ](#2--çƒŸèŠ±---æœ€ç»ˆæ•ˆæœ)
- [3. ğŸ“’ çƒŸèŠ± - ä¸Šå‡è¿‡ç¨‹åˆ†æ](#3--çƒŸèŠ±---ä¸Šå‡è¿‡ç¨‹åˆ†æ)
- [4. ğŸ’» demo - å®ç°ä¸Šå‡è¿‡ç¨‹](#4--demo---å®ç°ä¸Šå‡è¿‡ç¨‹)
- [5. ğŸ“’ çƒŸèŠ± - çˆ†ç‚¸è¿‡ç¨‹åˆ†æ](#5--çƒŸèŠ±---çˆ†ç‚¸è¿‡ç¨‹åˆ†æ)
- [6. ğŸ’» demo - å®ç°çˆ†ç‚¸è¿‡ç¨‹](#6--demo---å®ç°çˆ†ç‚¸è¿‡ç¨‹)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ç†è§£æ–‡æ¡£ä¸­æåˆ°çš„çƒŸèŠ±æ•ˆæœçš„å®ç°åŸç†ã€‚
æœ¬èŠ‚ä»…ä»…æ˜¯å®ç°ä¸€ä¸ªéå¸¸ç®€æ˜“ç‰ˆæœ¬çš„çƒŸèŠ±çš„å¯è§†åŒ–æ•ˆæœï¼Œæœ€ç»ˆè¦å®ç°çš„çƒŸèŠ±æ•ˆæœï¼Œé‡ç‚¹æœ‰ä¸¤ä¸ªï¼š
- çƒŸèŠ±çš„ä¸Šå‡è¿‡ç¨‹ã€‚
- çƒŸèŠ±çš„çˆ†ç‚¸è¿‡ç¨‹ã€‚

## 2. ğŸ“’ çƒŸèŠ± - æœ€ç»ˆæ•ˆæœ

![](md-imgs/0049-çƒŸèŠ±çˆ†ç‚¸è¿‡ç¨‹.gif)

## 3. ğŸ“’ çƒŸèŠ± - ä¸Šå‡è¿‡ç¨‹åˆ†æ

- æŠŠçƒŸèŠ±æ¨¡æ‹Ÿæˆä¸€ä¸ªé»„è‰²çš„åœ†ã€‚
- æ¯é—´éš” 50 å¸§ï¼Œæ”¾ä¸€ä¸ªçƒŸèŠ±ã€‚
- é¡µé¢ä¸ŠçƒŸèŠ±æ•°é‡çš„ä¸Šé™ä¸º 5 ä¸ªã€‚
  - ç¬¬ n ä¸ªçƒŸèŠ±å‡ºç°ï¼Œæ„å‘³ç€ç¬¬ n - 5 çˆ†ç‚¸ã€‚
  - çˆ†ç‚¸åçš„çƒŸèŠ±æ„å‘³ç€æ¶ˆå¤±ã€‚
- çƒŸèŠ±ä¸Šå‡çš„é€Ÿåº¦æ˜¯ä¸€ä¸ªéšæœºå€¼ã€‚
- çƒŸèŠ±ä¸Šå‡çš„è¿‡ç¨‹ä¸­æœ‰å°¾è¿¹æ•ˆæœï¼Œç±»ä¼¼ä¸€ä¸ªæ°´æ»´ ğŸ’§ å½¢çŠ¶ã€‚
  - å¤§åœ†åœ¨ä¸Šï¼Œå°å°–å°–åœ¨ä¸‹ã€‚
  - ä»å¤§åœ†åˆ°å°å°–å°–ï¼Œäº®åº¦ä¸æ–­é™ä½ã€‚

![](md-imgs/2024-10-04-15-33-21.png)

- çƒŸèŠ±ä¸Šå‡è¿‡ç¨‹ä¸­ï¼Œé€æ˜åº¦ä¸æ–­åœ°é™ä½ã€‚

## 4. ğŸ’» demo - å®ç°ä¸Šå‡è¿‡ç¨‹

```html
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <script src="index.js"></script>
  </body>
</html>
```

```css
/* index.css */
html,
body {
  margin: 0;
  padding: 0;
}

canvas {
  background-color: black;
}
```

```js
// index.js
const canvas = document.createElement('canvas')
document.body.append(canvas)
canvas.width = window.innerWidth
canvas.height = window.innerHeight
const ctx = canvas.getContext('2d')

ctx.translate(0, canvas.height)

ctx.scale(1, -1)
// y è½´åè½¬
// y å€¼å˜å¤§çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸Šå‡çš„è¿‡ç¨‹ã€‚

// Firework ç”¨äºåˆ›å»ºå’Œç®¡ç†çƒŸèŠ±
class Firework {
  constructor(x, y) {
    this.x = x
    this.y = y
    this.r = 6
    this.opacity = 1 // åˆå§‹ä¸é€æ˜åº¦
    this.speed = 2 + Math.random() * 4 // éšæœºä¸Šå‡é€Ÿåº¦
    Firework.activeFireworks.push(this)
  }

  static activeFireworks = [] // å­˜å‚¨æ‰€æœ‰æ­£åœ¨æ´»åŠ¨çš„çƒŸèŠ±
  static maxActiveCount = 5 // æœ€å¤§åŒæ—¶æ´»åŠ¨çš„çƒŸèŠ±æ•°é‡

  draw() {
    // ç»˜åˆ¶å¤šä¸ªå°çƒï¼Œå½¢æˆçƒŸèŠ±ä¸»ä½“å½¢çŠ¶ã€‚
    // ç±»ä¼¼äºæ°´æ»´çš„æ•ˆæœ ğŸ’§
    // å¤§çš„åœ†åœ¨ä¸Šé¢ï¼Œå°çš„å°–å°–åœ¨ä¸‹é¢ï¼Œçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªå°å°¾å·´çš„æ•ˆæœã€‚
    this.y += this.speed
    this.opacity = Math.max(this.opacity - 0.01, 0.2)
    for (let i = 0; i < 100; i++) {
      const ball = new Ball(
        this.x,
        this.y - i,
        this.r - i / 20,
        `rgba(200,200,50,${this.opacity - i / 100})`
      )
      ball.draw()
    }
  }

  static update() {
    if (this.activeFireworks.length == this.maxActiveCount)
      this.activeFireworks.shift()

    this.activeFireworks.forEach(fire => fire.draw())
  }
}

// Ball ç”¨äºç»˜åˆ¶çƒŸèŠ±å‡ç©ºè¿‡ç¨‹ä¸­çš„çƒå½¢æ•ˆæœã€‚
// æ¯ä¸ªçƒæœ‰ä½ç½®ã€åŠå¾„å’Œé¢œè‰²ã€‚
class Ball {
  constructor(x, y, r, color) {
    this.x = x
    this.y = y
    this.r = r
    this.color = color
  }
  draw() {
    ctx.save()
    ctx.beginPath()
    ctx.fillStyle = this.color
    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2)
    ctx.fill()
    ctx.restore()
  }
}

let frameCount = 0
function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height)

  // æ¯ 50 å¸§ï¼Œé‡Šæ”¾ä¸€ä¸ªæ–°çš„çƒŸèŠ±ã€‚
  if (frameCount % 50 == 0) {
    const x = (Math.random() * canvas.width * 3) / 4 + canvas.width / 8
    // çƒŸèŠ±é‡Šæ”¾çš„æ¨ªåæ ‡ï¼Œé™åˆ¶åœ¨ç”»å¸ƒçš„ 1/8 ~ 7/8 ä¹‹é—´ã€‚

    const y = Math.random() * 100
    // çƒŸèŠ±é‡Šæ”¾çš„çºµåæ ‡ï¼Œé™åˆ¶åœ¨ 0ï½100 ä¹‹é—´ã€‚

    new Firework(x, y)
  }

  Firework.update()

  frameCount++
  requestAnimationFrame(animate)
}
animate()
```

![](md-imgs/0049-çƒŸèŠ±ä¸Šå‡è¿‡ç¨‹.gif)

## 5. ğŸ“’ çƒŸèŠ± - çˆ†ç‚¸è¿‡ç¨‹åˆ†æ

**çƒŸèŠ±çš„çˆ†ç‚¸åŸç†åˆ†æï¼š**

çˆ†ç‚¸åçš„çƒŸèŠ±ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ç»˜åˆ¶è‹¥å¹²ä¸ªå°çƒï¼Œå°çƒçš„æ•°é‡ç”± `this.particleCount` å˜é‡æ¥è¡¨ç¤ºã€‚æ‰€æœ‰çˆ†ç‚¸çš„ç²’å­å®ä¾‹å­˜å‚¨åœ¨ `this.particles` æ•°ç»„ä¸­ï¼Œæ¯æ¬¡æ›´æ–°çƒŸèŠ± `Firework.update()` çš„æ—¶å€™éœ€è¦å»ç»˜åˆ¶ä¿©ç©æ„å„¿ï¼š
1. è¿˜æ²¡çˆ†ç‚¸çš„çƒŸèŠ± `Firework.activeFireworks`
2. å·²ç»çˆ†ç‚¸çš„çƒŸèŠ± `Firework.explodeFireworks`

è¿˜æ²¡çˆ†ç‚¸çš„çƒŸèŠ±ï¼Œç»˜åˆ¶é€»è¾‘å°±æ˜¯å‰é¢æåˆ°çš„çƒŸèŠ±ä¸Šå‡é€»è¾‘ï¼Œä¿æŒä¸å˜å³å¯ã€‚

çˆ†ç‚¸åçš„çƒŸèŠ±ï¼Œéœ€è¦å°†çƒŸèŠ±å®ä¾‹å­˜å‚¨åˆ° `Firework.explodeFireworks` ä¸­ï¼Œç„¶åéå†æ‰€æœ‰å·²ç»çˆ†ç‚¸çš„çƒŸèŠ±å®ä¾‹ï¼Œåˆ›å»ºçˆ†ç‚¸ç²’å­ã€æ›´æ–°çˆ†ç‚¸ç²’å­çš„çŠ¶æ€ã€‚

## 6. ğŸ’» demo - å®ç°çˆ†ç‚¸è¿‡ç¨‹

htmlã€css ä¿æŒä¸å˜ï¼Œä¸»è¦æ‰©å±• index.js æ–‡ä»¶ã€‚

```js
const canvas = document.createElement('canvas')
document.body.append(canvas)
canvas.width = window.innerWidth
canvas.height = window.innerHeight
const ctx = canvas.getContext('2d')

ctx.translate(0, canvas.height)

ctx.scale(1, -1)

class Firework {
  constructor(x, y) {
    this.x = x
    this.y = y
    this.r = 6
    this.opacity = 1
    this.speed = 2 + Math.random() * 4
    this.particleCount = 100 // çˆ†ç‚¸çš„ç²’å­æ•°é‡
    this.particles = [] // å­˜å‚¨çˆ†ç‚¸åçš„ç²’å­
    Firework.activeFireworks.push(this)
  }

  static activeFireworks = []
  static explodeFireworks = []
  static maxActiveCount = 5
  // static maxExplodeCount = 5

  static update() {
    if (this.activeFireworks.length == this.maxActiveCount) {
      const explodeFireword = this.activeFireworks.shift()
      this.explodeFireworks.push(explodeFireword)
    }

    // if (this.explodeFireworks.length == this.maxExplodeCount) {
    //   this.explodeFireworks.shift()
    // }

    this.activeFireworks.forEach((fire) => fire.draw())
    this.explodeFireworks.forEach((fire) => fire.explode())
  }

  draw() {
    this.y += this.speed
    this.opacity = Math.max(this.opacity - 0.01, 0.2)
    for (let i = 0; i < 100; i++) {
      const ball = new Ball(
        this.x,
        this.y - i,
        this.r - i / 20,
        `rgba(200,200,50,${this.opacity - i / 100})`
      )
      ball.draw()
    }
  }

  explode() {
    // ç»˜åˆ¶çˆ†ç‚¸çš„ç²’å­
    if (this.particles.length == 0) {
      // é¦–æ¬¡çˆ†ç‚¸
      const angleDelta = (Math.PI * 2) / this.particleCount
      const color = `hsl(${Math.random() * 360},50%,50%)`
      for (let i = 0; i < this.particleCount; i++) {
        const directionX = Math.cos(angleDelta * i) * Math.random() * 4
        const directionY = Math.sin(angleDelta * i) * Math.random() * 4
        const particle = new Particle(
          this.x,
          this.y,
          directionX,
          directionY,
          color
        )
        this.particles.push(particle)
        particle.draw()
      }
    } else {
      // å·²ç»çˆ†ç‚¸ï¼Œäº§ç”Ÿäº†ç²’å­ï¼Œé‡ç»˜ç²’å­å³å¯
      this.particles.forEach((particle) => particle.update())
      this.particles = this.particles.filter((particle) => particle.isActive())
    }
  }
}

class Ball {
  constructor(x, y, r, color) {
    this.x = x
    this.y = y
    this.r = r
    this.color = color
  }
  draw() {
    ctx.save()
    ctx.beginPath()
    ctx.fillStyle = this.color
    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2)
    ctx.fill()
    ctx.restore()
  }
}

// Particle ç”¨äºç»˜åˆ¶çˆ†ç‚¸åçš„ç²’å­æ•ˆæœã€‚
// æ¯ä¸ªç²’å­æœ‰ä½ç½®ã€æ–¹å‘ã€é¢œè‰²å’Œç±»å‹ï¼ˆç”¨äºæ§åˆ¶ç»˜åˆ¶ä¸å¦ï¼‰ã€‚
class Particle {
  constructor(x, y, dirX, dirY, color) {
    this.x = x
    this.y = y
    this.radius = 3
    this.dirX = dirX
    this.dirY = dirY
    this.color = color
  }

  draw() {
    ctx.save()
    ctx.beginPath()
    ctx.fillStyle = this.color
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2)
    ctx.fill()
    ctx.restore()
  }

  update() {
    this.x += this.dirX
    this.y += this.dirY
    this.dirX *= 0.98
    this.dirY *= 0.99
    this.draw()
  }

  isActive() {
    return Math.abs(this.dirX) > 0.2 || Math.abs(this.dirY) > 0.2
  }
}

let frameCount = 0
function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height)

  if (frameCount % 50 == 0) {
    const x = (Math.random() * canvas.width * 3) / 4 + canvas.width / 8

    const y = Math.random() * 100

    new Firework(x, y)
  }

  Firework.update()

  frameCount++
  requestAnimationFrame(animate)
}
animate()
```

ä¸Šè¿°çš„é«˜äº®åŒºåŸŸæ˜¯ä¸»è¦ä¿®æ”¹çš„å†…å®¹ï¼Œindex.htmlã€index.css ä¸­çš„å†…å®¹æ˜¯æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„ã€‚

ä¸»è¦åŠ äº†ä¸€ä¸ªç²’å­ç±»ï¼Œç”¨äºåˆ›å»ºçˆ†ç‚¸åçš„çƒŸèŠ±çš„ç²’å­å®ä¾‹ã€‚

![](md-imgs/0049-çƒŸèŠ±çˆ†ç‚¸è¿‡ç¨‹.gif)


# [README.md](./0050.%20å®ç°åŠ¨æ€æ—¶é’Ÿæ•ˆæœ/README.md)<!-- !======> SEPERATOR <====== -->
# [0050. å®ç°åŠ¨æ€æ—¶é’Ÿæ•ˆæœ](https://github.com/Tdahuyou/canvas/tree/main/0050.%20%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E6%97%B6%E9%92%9F%E6%95%88%E6%9E%9C)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ åŠ¨æ€æ—¶é’Ÿçš„æœ€ç»ˆå®ç°æ•ˆæœ](#2--åŠ¨æ€æ—¶é’Ÿçš„æœ€ç»ˆå®ç°æ•ˆæœ)
- [3. ğŸ’» demo - åŠ¨æ€å§‹ç»ˆæ•ˆæœå®ç°æºç ](#3--demo---åŠ¨æ€å§‹ç»ˆæ•ˆæœå®ç°æºç )
<!-- endregion:toc -->

## 1. ğŸ“ Summary

UI è¿˜æœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ï¼Œé‡ç‚¹åœ¨äºç†è§£æ—¶é’Ÿæ•ˆæœçš„å®ç°é€»è¾‘ã€‚

## 2. ğŸ“’ åŠ¨æ€æ—¶é’Ÿçš„æœ€ç»ˆå®ç°æ•ˆæœ

![](md-imgs/0050-å®ç°åŠ¨æ€æ—¶é’Ÿæ•ˆæœ.gif)

## 3. ğŸ’» demo - åŠ¨æ€å§‹ç»ˆæ•ˆæœå®ç°æºç 

```html
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <script src="index.js"></script>
  </body>
</html>
```

```css
/* index.css */
/* é¡µé¢å‚ç›´å±…ä¸­ã€æ°´å¹³å±…ä¸­æ˜¾ç¤º */
canvas {
  /* border: 2px solid #ccc; */
  /* background-color: black; */
  position: absolute;
  left: 50%;
  top: 50%;
  /* ç”»å¸ƒå¤§å°æ˜¯ 400px * 400px */
  margin-left: -200px;
  margin-top: -200px;
}
```

```js
// index.js
// #region ç»˜åˆ¶æ—¶é’ŸèƒŒæ™¯
const clock_bg_canvas = document.createElement('canvas')
document.body.append(clock_bg_canvas)
clock_bg_canvas.width = 400
clock_bg_canvas.height = 400

let ctx = clock_bg_canvas.getContext('2d')

// ç§»åŠ¨åŸç‚¹ç½®å®¹å™¨ä¸­å¿ƒ
ctx.translate(200, 200)

// #region ç»˜åˆ¶æ—¶é’Ÿçš„åœ†ç›˜è½®å»“
// ctx.save()
// ctx.beginPath()
// ctx.arc(0, 0, 200, 0, Math.PI * 2)
// ctx.stroke()
// ctx.restore()
// #endregion ç»˜åˆ¶æ—¶é’Ÿçš„åœ†ç›˜è½®å»“

// #region ç»˜åˆ¶ä¸€ä¸ªé»‘åº•çš„åœ†
// ctx.arc(0, 0, 200, 0, Math.PI * 2)
// ctx.fill()
// #endregion ç»˜åˆ¶ä¸€ä¸ªé»‘åº•çš„åœ†

// #region ç»˜åˆ¶å°æ—¶åˆ»åº¦
ctx.strokeStyle = 'black'
ctx.lineWidth = 8
for (let i = 0; i < 12; i++) {
  ctx.beginPath()
  ctx.moveTo(0, -200)
  ctx.lineTo(0, -180)
  ctx.stroke()
  ctx.rotate((Math.PI * 2) / 12)
  // å°†ä¸€åœˆåˆ†ä¸º 12 ä»½ï¼Œæ¯æ¬¡æ—‹è½¬éƒ½æ˜¯åŸºäºä¸Šæ¬¡çš„ä½ç½®æ¥æ—‹è½¬çš„ã€‚
  // ä¸€å…±æ—‹è½¬ 12 æ¬¡ï¼Œç»˜åˆ¶ 12 ä¸ªåˆ»åº¦ç‚¹ã€‚
}
// #endregion ç»˜åˆ¶å°æ—¶åˆ»åº¦

// #region ç»˜åˆ¶åˆ†é’Ÿåˆ»åº¦
// æ¯ä¸ªå°æ—¶åˆ»åº¦ä¹‹é—´å†ç»˜åˆ¶ 5 ä¸ªåˆ†é’Ÿåˆ»åº¦ï¼Œåˆ†åˆ«è¡¨ç¤º 10ã€20ã€30ã€40ã€50 åˆ†ã€‚
ctx.strokeStyle = 'gray'
ctx.lineWidth = 4
for (let i = 0; i < 60; i++) {
  if (i % 5 != 0) {
    ctx.beginPath()
    ctx.moveTo(0, -200)
    ctx.lineTo(0, -190)
    ctx.stroke()
  }
  ctx.rotate((Math.PI * 2) / 60)
}
// #endregion ç»˜åˆ¶åˆ†é’Ÿåˆ»åº¦

// #region ç»˜åˆ¶å°æ—¶æ•°å­—
ctx.font = '20px sans-serif'
ctx.textAlign = 'center'
ctx.textBaseline = 'middle'
ctx.fillStyle = 'balck'
const r = 160
const hd = (Math.PI * 2) / 12
for (let i = 0; i < 12; i++) {
  const text = i == 0 ? 12 : i
  const x = Math.sin(hd * i) * r
  const y = -Math.cos(hd * i) * r
  ctx.fillText(text, x, y)
}
// #endregion ç»˜åˆ¶å°æ—¶æ•°å­—
// #endregion ç»˜åˆ¶æ—¶é’ŸèƒŒæ™¯

// #region ç»˜åˆ¶åŠ¨æ€çš„æŒ‡é’ˆ
const canvas = document.createElement('canvas')
document.body.append(canvas)
canvas.width = 400
canvas.height = 400
ctx = canvas.getContext('2d')

ctx.translate(200, 200)

start() // æ—¶é’Ÿå¼€å§‹è½¬åŠ¨

function start() {
  ctx.clearRect(-200, -200, canvas.width, canvas.height)
  // è·å¾—å½“å‰æ—¶é—´çš„æ—¶åˆ†ç§’ï¼Œåˆ†åˆ«è®¡ç®—è¡¨é’ˆæ—‹è½¬è§’åº¦
  const now = new Date()
  const hour = now.getHours() % 12
  const minute = now.getMinutes()
  const second = now.getSeconds()

  // #region ç»˜åˆ¶æ—¶é’ˆ
  ctx.save()
  ctx.rotate(
    ((hour * 3600 + minute * 60 + second) * Math.PI * 2) / (60 * 60 * 12)
  )
  ctx.beginPath()
  ctx.moveTo(-5, 10)
  ctx.lineTo(-5, -100)
  // ä½¿ç”¨è´å¡å°”æ›²çº¿ç»˜åˆ¶ä¸€ä¸ªå¿ƒå½¢
  ctx.quadraticCurveTo(-15, -100, 0, -120)
  ctx.quadraticCurveTo(15, -100, 5, -100)
  ctx.lineTo(5, 10)
  // ctx.lineTo(5, -100)
  ctx.closePath()
  ctx.stroke()
  ctx.fill()
  ctx.restore()
  // #endregion ç»˜åˆ¶æ—¶é’ˆ

  // #region ç»˜åˆ¶åˆ†é’ˆ
  ctx.save()
  ctx.rotate(((minute * 60 + second) * Math.PI * 2) / 3600)
  ctx.lineWidth = 6
  ctx.strokeStyle = 'gray'
  ctx.beginPath()
  ctx.moveTo(0, 20)
  ctx.lineTo(0, -160)
  ctx.stroke()
  ctx.restore()
  // #endregion ç»˜åˆ¶åˆ†é’ˆ

  // #region ç»˜åˆ¶ç§’é’ˆ
  ctx.save()
  ctx.rotate(((Math.PI * 2) / 60) * second)
  ctx.lineWidth = 2
  ctx.strokeStyle = 'red'
  ctx.beginPath()
  ctx.moveTo(0, 30)
  ctx.lineTo(0, -190)
  ctx.stroke()
  ctx.restore()
  // #endregion ç»˜åˆ¶ç§’é’ˆ

  // #region ç»˜åˆ¶åœ†å¿ƒç‚¹
  ctx.save()
  ctx.beginPath()
  ctx.arc(0, 0, 6, 0, Math.PI * 2)
  ctx.fill()
  ctx.restore()
  // #endregion ç»˜åˆ¶åœ†å¿ƒç‚¹

  setTimeout(start, 1000) // æ¯ç§’æ›´æ–°ä¸€æ¬¡
}
// #endregion ç»˜åˆ¶åŠ¨æ€çš„æŒ‡é’ˆ
```

**è„šæœ¬åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š**
1. é™æ€éƒ¨åˆ†ï¼šç»˜åˆ¶æ—¶é’ŸèƒŒæ™¯ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸»è¦å°±æ˜¯ç»˜åˆ¶æ—¶é’ŸèƒŒæ™¯æ‰€éœ€è¦çš„å„ä¸ªç»„ä»¶ã€‚
2. åŠ¨æ€éƒ¨åˆ†ï¼šç»˜åˆ¶åŠ¨æ€çš„æŒ‡é’ˆï¼Œè¿™ä¸€éƒ¨åˆ†ä¸»è¦é€šè¿‡ js æ¥æ§åˆ¶ 3 ä¸ªæŒ‡é’ˆçš„è½¬å‘ï¼Œæ¯ç§’æ›´æ–°ä¸€æ¬¡ã€‚

![](md-imgs/2024-10-04-15-16-31.png)

# [README.md](./0051.%20è´ªåƒè›‡å°æ¸¸æˆ/README.md)<!-- !======> SEPERATOR <====== -->
# [0051. è´ªåƒè›‡å°æ¸¸æˆ](https://github.com/Tdahuyou/canvas/tree/main/0051.%20%E8%B4%AA%E5%90%83%E8%9B%87%E5%B0%8F%E6%B8%B8%E6%88%8F)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ“’ è´ªåƒè›‡å°æ¸¸æˆ - æœ€ç»ˆæ•ˆæœ](#2--è´ªåƒè›‡å°æ¸¸æˆ---æœ€ç»ˆæ•ˆæœ)
- [3. ğŸ“’ è´ªåƒè›‡å°æ¸¸æˆ - å®ç°åŸç†åˆ†æ](#3--è´ªåƒè›‡å°æ¸¸æˆ---å®ç°åŸç†åˆ†æ)
  - [3.1. è›‡å¤´ç§»åŠ¨](#31-è›‡å¤´ç§»åŠ¨)
  - [3.2. æ¸¸æˆç»“æŸæ£€æŸ¥](#32-æ¸¸æˆç»“æŸæ£€æŸ¥)
  - [3.3. åƒé£Ÿç‰©æ£€æŸ¥](#33-åƒé£Ÿç‰©æ£€æŸ¥)
  - [3.4. è›‡èº«æ›´æ–°](#34-è›‡èº«æ›´æ–°)
  - [3.5. åŠ¨ç”»å’Œé€Ÿåº¦è°ƒèŠ‚](#35-åŠ¨ç”»å’Œé€Ÿåº¦è°ƒèŠ‚)
- [4. ğŸ’» demo - è´ªåƒè›‡å°æ¸¸æˆ - å®ç°æºç ](#4--demo---è´ªåƒè›‡å°æ¸¸æˆ---å®ç°æºç )
<!-- endregion:toc -->

## 1. ğŸ“ Summary

ç†è§£è´ªåƒè›‡å°æ¸¸æˆçš„å®ç°çš„åŸºæœ¬åŸç†ã€‚

## 2. ğŸ“’ è´ªåƒè›‡å°æ¸¸æˆ - æœ€ç»ˆæ•ˆæœ

![](md-imgs/0051-è´ªåƒè›‡å°æ¸¸æˆ.gif)

## 3. ğŸ“’ è´ªåƒè›‡å°æ¸¸æˆ - å®ç°åŸç†åˆ†æ

è´ªåƒè›‡ `Snake` ä¸­çš„é€»è¾‘ï¼Œæ˜¯æ•´ä¸ªæ¸¸æˆçš„æ ¸å¿ƒã€‚

æ ¸å¿ƒè¦ç†è§£ä»¥ä¸‹é€»è¾‘çš„å®ç°ï¼š

- è›‡çš„ç§»åŠ¨é€»è¾‘
    - è›‡å¤´çš„ç§»åŠ¨
    - è›‡èº«çš„ç§»åŠ¨ï¼ˆé‡ç‚¹ï¼‰
- è›‡åƒé£Ÿç‰©çš„é€»è¾‘
- æ¸¸æˆçš„ç»“æŸåˆ¤å®šé€»è¾‘

### 3.1. è›‡å¤´ç§»åŠ¨

1. **æ–¹å‘åˆ¤æ–­**ï¼šæ ¹æ®è›‡å½“å‰çš„æ–¹å‘ï¼Œè›‡å¤´çš„ä½ç½®ä¼šæ›´æ–°ã€‚è¿™æ˜¯é€šè¿‡ä¸€ä¸ª `switch` è¯­å¥æ¥å®ç°çš„ï¼Œå®ƒæ£€æŸ¥ `this.direction` çš„å€¼ï¼ˆå³è›‡çš„å½“å‰æ–¹å‘ï¼‰ï¼Œç„¶åæ ¹æ®æ–¹å‘æ¥å¢å‡è›‡å¤´çš„ `x` æˆ– `y` åæ ‡å€¼ã€‚æ¯ä¸ªæ–¹å‘å¯¹åº”ä¸€ä¸ªåæ ‡è½´çš„å˜åŒ–ï¼š

- `ARROW_RIGHT`: `x` åæ ‡å¢åŠ  `gridSize`ï¼Œè¡¨ç¤ºå‘å³ç§»åŠ¨ã€‚
- `ARROW_DOWN`: `y` åæ ‡å¢åŠ  `gridSize`ï¼Œè¡¨ç¤ºå‘ä¸‹ç§»åŠ¨ã€‚
- `ARROW_LEFT`: `x` åæ ‡å‡å°‘ `gridSize`ï¼Œè¡¨ç¤ºå‘å·¦ç§»åŠ¨ã€‚
- `ARROW_UP`: `y` åæ ‡å‡å°‘ `gridSize`ï¼Œè¡¨ç¤ºå‘ä¸Šç§»åŠ¨ã€‚

2. **ä½ç½®æ›´æ–°**ï¼šæ›´æ–°ä½ç½®åï¼Œè›‡å¤´çš„æ–°ä½ç½®å­˜å‚¨åœ¨ `this.head.x` å’Œ `this.head.y` ä¸­ã€‚

> æ³¨æ„ï¼šã€Œåæ ‡çš„æ›´æ–°ã€å’Œã€Œç•Œé¢çš„æ¸²æŸ“ã€æ˜¯ä¸¤ä¸ªæ­¥éª¤ã€‚
>
> åæ ‡ä½ç½®çš„æ›´æ–°å¹¶ä¸æ„å‘³ç€åœ¨ç•Œé¢ä¸Šçœ‹åˆ°è›‡å¤´çš„ä½ç½®å‘ç”Ÿäº†ç§»åŠ¨ã€‚å½“ä½ çœ‹åˆ°ç•Œé¢ä¸Šè›‡å¤´çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ„å‘³ç€é‡æ–°ç»˜åˆ¶ `draw` äº†ã€‚
>
> æ¯æ¬¡ç§»åŠ¨ `move` çš„æ—¶å€™éƒ½æ˜¯å…ˆæ›´æ–°åæ ‡ `x`ã€`y`ï¼Œåšå®Œä¸€ç³»åˆ—çš„åˆ¤å®šä¹‹åï¼Œæœ€åæ‰é‡æ–°ç»˜åˆ¶ `draw` æ›´æ–°ç•Œé¢ã€‚

### 3.2. æ¸¸æˆç»“æŸæ£€æŸ¥

- **å‡ºç•Œæ£€æŸ¥** (`isOutOfBounds`): å¦‚æœè›‡å¤´çš„æ–°ä½ç½®è¶…å‡ºäº†ç”»å¸ƒçš„è¾¹ç•Œï¼ˆæ¸¸æˆåŒºåŸŸï¼‰ï¼Œæ¸¸æˆç»“æŸã€‚
- **è‡ªèº«ç¢°æ’æ£€æŸ¥** (`isCollidingWithSelf`): å¦‚æœè›‡å¤´çš„æ–°ä½ç½®ä¸è›‡èº«çš„ä»»ä½•éƒ¨åˆ†é‡å ï¼ˆé€šè¿‡æŸ¥çœ‹ç½‘æ ¼çŠ¶æ€ `gridState` åˆ¤æ–­ï¼‰ï¼Œåˆ™æ¸¸æˆä¹Ÿä¼šç»“æŸã€‚

### 3.3. åƒé£Ÿç‰©æ£€æŸ¥

- **é£Ÿç‰©æ£€æŸ¥** (`isEatingFood`): å¦‚æœè›‡å¤´çš„æ–°ä½ç½®ä¸é£Ÿç‰©çš„ä½ç½®ç›¸åŒï¼Œè›‡å°†åƒæ‰é£Ÿç‰©ã€‚è¿™ä¼šå¯¼è‡´è›‡çš„å¾—åˆ†å¢åŠ ï¼Œå¹¶ä¸”åœ¨è›‡èº«çš„å‰ç«¯æ·»åŠ ä¸€ä¸ªæ–°çš„èº«ä½“éƒ¨åˆ†ï¼ˆå³è›‡å˜é•¿ï¼‰ã€‚

### 3.4. è›‡èº«æ›´æ–°

- **è›‡èº«ç§»åŠ¨** (`moveBody`): å¦‚æœè›‡æ²¡æœ‰åƒåˆ°é£Ÿç‰©ï¼Œè›‡èº«éœ€è¦æ›´æ–°æ¥è·Ÿéšè›‡å¤´ç§»åŠ¨ã€‚è¿™æ˜¯é€šè¿‡ç§»é™¤è›‡èº«æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆå°¾éƒ¨ï¼‰ï¼Œå¹¶å°†å…¶ä½ç½®è®¾ç½®ä¸ºè›‡å¤´ç§»åŠ¨å‰çš„ä½ç½®ï¼Œç„¶åå°†è¿™ä¸ªå…ƒç´ æ’å…¥åˆ°æ•°ç»„çš„å¼€å¤´æ¥å®ç°çš„ã€‚è¿™æ ·ï¼Œè›‡èº«çš„æ¯ä¸ªéƒ¨åˆ†éƒ½è·Ÿéšå‰ä¸€ä¸ªå‘å‰ç§»åŠ¨ï¼Œä»è€Œå®ç°æ•´ä½“çš„æµç•…ç§»åŠ¨ã€‚

### 3.5. åŠ¨ç”»å’Œé€Ÿåº¦è°ƒèŠ‚

- **å®šæ—¶å™¨** (`setTimeout`): é€šè¿‡ä½¿ç”¨å®šæ—¶å™¨ï¼Œè›‡çš„ `move` æ–¹æ³•ä¼šå‘¨æœŸæ€§åœ°è¢«è°ƒç”¨ï¼Œåˆ›å»ºè¿ç»­ç§»åŠ¨çš„æ•ˆæœã€‚ç§»åŠ¨çš„é€Ÿåº¦éšç€è›‡çš„å¾—åˆ†å¢åŠ è€ŒåŠ å¿«ï¼Œä½¿æ¸¸æˆéš¾åº¦é€æ¸å¢å¤§ã€‚

```javascript
// ç”Ÿæˆé£Ÿç‰©
let currentFood
// åœ¨ç”»å¸ƒéšæœºä¸€ä¸ªç©ºç™½ä½ç½®ä¸Šç”Ÿæˆé£Ÿç‰©
function generateFood() {
  while (true) {
    const x =
      Math.floor((Math.random() * canvasBoard.width) / gridSize) * gridSize
    const y =
      Math.floor((Math.random() * canvasBoard.height) / gridSize) * gridSize
    if (gridState[`${x}-${y}`] === 0) {
      currentFood = new Square(x, y, CELL_TYPE_FOOD, 'orange')
      currentFood.draw()
      break
    }
  }
}
generateFood()
```

```javascript
// å¼€å§‹æ¸¸æˆ
canvasGame.onclick = function () {
  // åœ°å›¾åˆå§‹åŒ–
  ctxGame.clearRect(0, 0, canvasGame.width, canvasGame.height)
  generateFood()
  initializeGrid()

  // åˆ›å»ºè›‡
  const playerSnake = new Snake(10, 10)
  playerSnake.draw()
  playerSnake.move()

  // ç›‘å¬é”®ç›˜æŒ‰ä¸‹äº‹ä»¶
  document.onkeydown = function (event) {
    if (
      // æŒ‰ä¸‹çš„ä¸æ˜¯æ–¹å‘é”®
      ![ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN].includes(event.code) ||
      // æŒ‰ä¸‹çš„æ˜¯å½“å‰è¿åŠ¨æ–¹å‘çš„åæ–¹å‘
      (playerSnake.direction === ARROW_RIGHT && event.code === ARROW_LEFT) ||
      (playerSnake.direction === ARROW_LEFT && event.code === ARROW_RIGHT) ||
      (playerSnake.direction === ARROW_DOWN && event.code === ARROW_UP) ||
      (playerSnake.direction === ARROW_UP && event.code === ARROW_DOWN)
    ) {
      return
    }

    playerSnake.direction = event.code
  }
}
```

## 4. ğŸ’» demo - è´ªåƒè›‡å°æ¸¸æˆ - å®ç°æºç 

```html
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <script src="index.js"></script>
  </body>
</html>
```

```css
/* index.css */
canvas {
  border: 2px solid #ccc;

  /* è®©ä¸¤ä¸ª canvas é‡åˆåœ¨ä¸€èµ· */
  position: absolute;
}
```

```javascript
// index.js
// é”®ç›˜æ–¹å‘é”®å€¼
const ARROW_LEFT = 'ArrowLeft'
const ARROW_UP = 'ArrowUp'
const ARROW_RIGHT = 'ArrowRight'
const ARROW_DOWN = 'ArrowDown'

// ç½‘æ ¼ä¸­çš„å…ƒç´ ç±»å‹
const CELL_TYPE_SPACE = 0 // 0 è¡¨ç¤ºç©º
const CELL_TYPE_SNAKE = 1 // 1 è¡¨ç¤ºè›‡
const CELL_TYPE_FOOD = 2 // 2 è¡¨ç¤ºé£Ÿç‰©

// å•å…ƒæ ¼é¢œè‰²
const CELL_COLOR_SNAKE_HEAD = 'red'
const CELL_COLOR_SNAKE_BODY = 'pink'
const CELL_COLOR_FOOD = 'orange'

// #region ç”»å¸ƒåˆå§‹åŒ–
const canvasBoard = document.createElement('canvas')
canvasBoard.width = 400
canvasBoard.height = 400
document.body.append(canvasBoard)
const ctxBoard = canvasBoard.getContext('2d')

const canvasGame = document.createElement('canvas')
canvasGame.width = 400
canvasGame.height = 400
document.body.append(canvasGame)
const ctxGame = canvasGame.getContext('2d')
// #endregion ç”»å¸ƒåˆå§‹åŒ–

// #region ç½‘æ ¼æ•°æ®åˆå§‹åŒ–
const gridSize = 20
const gridState = {}
function initializeGrid() {
  for (let row = 0; row < canvasBoard.width / gridSize; row++) {
    for (let col = 0; col < canvasBoard.height / gridSize; col++) {
      gridState[`${row * gridSize}-${col * gridSize}`] = CELL_TYPE_SPACE
    }
  }
}
initializeGrid()
// #endregion ç½‘æ ¼æ•°æ®åˆå§‹åŒ–

// #region ç»˜åˆ¶ç½‘æ ¼æ£‹ç›˜
// è¿™ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ç†è§£ä¸ºå‡†å¤‡æ¸¸æˆåœ°å›¾ã€‚
function drawGrid() {
  ctxBoard.save()
  ctxBoard.strokeStyle = '#ccc'
  for (let line = 0; line < canvasBoard.width / gridSize; line++) {
    ctxBoard.beginPath()
    ctxBoard.moveTo(gridSize * line, 0)
    ctxBoard.lineTo(gridSize * line, canvasBoard.height)
    ctxBoard.stroke()

    ctxBoard.beginPath()
    ctxBoard.moveTo(0, gridSize * line)
    ctxBoard.lineTo(canvasBoard.width, gridSize * line)
    ctxBoard.stroke()
  }
  ctxBoard.restore()
}
drawGrid()
// #endregion ç»˜åˆ¶ç½‘æ ¼æ£‹ç›˜

// #region è›‡å’Œé£Ÿç‰©çš„åŸºç±»
class Square {
  constructor(x, y, cell_type, cell_color) {
    this.x = x
    this.y = y
    this.previousX = x
    this.previousY = y
    this.cell_color = cell_color
    this.cell_type = cell_type
  }

  static width = gridSize
  static height = gridSize

  draw() {
    gridState[`${this.previousX}-${this.previousY}`] = CELL_TYPE_SPACE
    gridState[`${this.x}-${this.y}`] = this.cell_type

    ctxGame.clearRect(
      this.previousX,
      this.previousY,
      Square.width,
      Square.height
    )
    this.previousX = this.x
    this.previousY = this.y
    ctxGame.save()
    ctxGame.beginPath()
    ctxGame.fillStyle = this.cell_color
    ctxGame.fillRect(this.x, this.y, Square.width, Square.height)
    ctxGame.restore()
  }
}
// #endregion è›‡å’Œé£Ÿç‰©çš„åŸºç±»

// #region è´ªåƒè›‡
class Snake {
  // æ„é€ å‡½æ•°åˆå§‹åŒ–è›‡çš„ä½ç½®ã€æ–¹å‘ã€å¤´éƒ¨å’Œèº«ä½“
  constructor(x, y, direction = 'ArrowRight') {
    this.x = x * gridSize // æ¨ªåæ ‡åˆå§‹åŒ–ï¼Œæ ¹æ®ç½‘æ ¼å¤§å°è°ƒæ•´
    this.y = y * gridSize // çºµåæ ‡åˆå§‹åŒ–ï¼Œæ ¹æ®ç½‘æ ¼å¤§å°è°ƒæ•´
    this.direction = direction // åˆå§‹æ–¹å‘
    this.head = new Square(this.x, this.y, CELL_TYPE_SNAKE, CELL_COLOR_SNAKE_HEAD) // åˆ›å»ºè›‡å¤´éƒ¨çš„å®ä¾‹
    this.body = [] // è›‡çš„èº«ä½“éƒ¨åˆ†æ•°ç»„
    this.score = 0 // åˆå§‹åŒ–å¾—åˆ†
  }

  // ç»˜åˆ¶è›‡çš„å¤´éƒ¨å’Œèº«ä½“
  draw() {
    this.head.draw() // ç»˜åˆ¶è›‡å¤´
    this.body.forEach((segment) => segment.draw()) // ç»˜åˆ¶è›‡èº«ä½“çš„æ¯ä¸€ä¸ªéƒ¨åˆ†
  }

  // æ§åˆ¶è›‡çš„ç§»åŠ¨é€»è¾‘
  move() {
    // æ ¹æ®è›‡çš„å½“å‰æ–¹å‘æ›´æ–°è›‡å¤´çš„ä½ç½®
    switch (this.direction) {
      case ARROW_RIGHT:
        this.head.x += gridSize
        break
      case ARROW_DOWN:
        this.head.y += gridSize
        break
      case ARROW_LEFT:
        this.head.x -= gridSize
        break
      case ARROW_UP:
        this.head.y -= gridSize
        break
    }

    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸï¼ˆå‡ºç•Œæˆ–æ’åˆ°è‡ªå·±ï¼‰
    if (this.isOutOfBounds() || this.isCollidingWithSelf()) {
      console.log('æ¸¸æˆç»“æŸï¼æœ€ç»ˆå¾—åˆ†ï¼š' + this.score) // å¼¹å‡ºæ¸¸æˆç»“æŸä¿¡æ¯
      return
    }

    // æ£€æŸ¥è›‡æ˜¯å¦åƒåˆ°é£Ÿç‰©
    if (this.isEatingFood()) {
      this.score += 10 // å¢åŠ åˆ†æ•°
      const newSegment = new Square(
        this.head.previousX,
        this.head.previousY,
        CELL_TYPE_SNAKE,
        CELL_COLOR_SNAKE_BODY
      ) // åˆ›å»ºæ–°çš„èº«ä½“éƒ¨åˆ†
      this.body.unshift(newSegment) // å°†æ–°éƒ¨åˆ†æ·»åŠ åˆ°è›‡èº«ä½“çš„å‰ç«¯
      generateFood() // é‡æ–°ç”Ÿæˆé£Ÿç‰©
    } else {
      this.moveBody() // ç§»åŠ¨èº«ä½“
    }

    this.draw() // é‡ç»˜è›‡çš„æ–°çŠ¶æ€

    setTimeout(() => {
      this.move() // å»¶è¿Ÿè°ƒç”¨moveæ–¹æ³•ï¼Œä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœ
    }, 200 - this.score / 2) // ç§»åŠ¨é€Ÿåº¦éšåˆ†æ•°å¢åŠ è€Œå¢å¿«
  }

  // æ£€æŸ¥è›‡æ˜¯å¦å‡ºç•Œ
  isOutOfBounds() {
    return (
      this.head.x < 0 ||
      this.head.y < 0 ||
      this.head.x >= canvasGame.width ||
      this.head.y >= canvasGame.height
    )
  }

  // æ£€æŸ¥è›‡æ˜¯å¦æ’åˆ°äº†è‡ªå·±
  isCollidingWithSelf() {
    return gridState[`${this.head.x}-${this.head.y}`] === CELL_TYPE_SNAKE
  }

  // æ£€æŸ¥è›‡æ˜¯å¦åƒåˆ°äº†é£Ÿç‰©
  isEatingFood() {
    return this.head.x === currentFood.x && this.head.y === currentFood.y
  }

  // ç§»åŠ¨è›‡èº«ä½“çš„é€»è¾‘
  // æŠŠå°¾å·´åˆ‡æ‰ä¸€ä¸ªæ ¼å­
  // ç„¶ååœ¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ ¼å­
  moveBody() {
    if (this.body.length > 0) {
      const tailSegment = this.body.pop() // ç§»é™¤å°¾éƒ¨
      tailSegment.x = this.head.previousX // æ›´æ–°å°¾éƒ¨ä½ç½®åˆ°ä¹‹å‰å¤´éƒ¨çš„ä½ç½®
      tailSegment.y = this.head.previousY
      this.body.unshift(tailSegment) // å°†å°¾éƒ¨æ·»åŠ åˆ°å¤´éƒ¨ä½ç½®ï¼Œå®ç°èº«ä½“çš„â€œç§»åŠ¨â€
    }
  }
}
// #endregion è´ªåƒè›‡

// #region ç”Ÿæˆé£Ÿç‰©
let currentFood
// åœ¨ç”»å¸ƒéšæœºä¸€ä¸ªç©ºç™½ä½ç½®ä¸Šç”Ÿæˆé£Ÿç‰©
function generateFood() {
  while (true) {
    const x =
      Math.floor((Math.random() * canvasBoard.width) / gridSize) * gridSize
    const y =
      Math.floor((Math.random() * canvasBoard.height) / gridSize) * gridSize
    if (gridState[`${x}-${y}`] === 0) {
      currentFood = new Square(x, y, CELL_TYPE_FOOD, 'orange')
      currentFood.draw()
      break
    }
  }
}
generateFood()
// #endregion ç”Ÿæˆé£Ÿç‰©

// #region å¼€å§‹æ¸¸æˆ
canvasGame.onclick = function () {
  // åœ°å›¾åˆå§‹åŒ–
  ctxGame.clearRect(0, 0, canvasGame.width, canvasGame.height)
  generateFood()
  initializeGrid()

  // åˆ›å»ºè›‡
  const playerSnake = new Snake(10, 10)
  playerSnake.draw()
  playerSnake.move()

  // ç›‘å¬é”®ç›˜æŒ‰ä¸‹äº‹ä»¶
  document.onkeydown = function (event) {
    if (
      // æŒ‰ä¸‹çš„ä¸æ˜¯æ–¹å‘é”®
      ![ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN].includes(event.code) ||
      // æŒ‰ä¸‹çš„æ˜¯å½“å‰è¿åŠ¨æ–¹å‘çš„åæ–¹å‘
      (playerSnake.direction === ARROW_RIGHT && event.code === ARROW_LEFT) ||
      (playerSnake.direction === ARROW_LEFT && event.code === ARROW_RIGHT) ||
      (playerSnake.direction === ARROW_DOWN && event.code === ARROW_UP) ||
      (playerSnake.direction === ARROW_UP && event.code === ARROW_DOWN)
    ) {
      return
    }

    playerSnake.direction = event.code
  }
}
// #endregion å¼€å§‹æ¸¸æˆ
```

**å¸¸é‡**

```javascript
// é”®ç›˜æ–¹å‘é”®å€¼
const ARROW_LEFT = 'ArrowLeft'
const ARROW_UP = 'ArrowUp'
const ARROW_RIGHT = 'ArrowRight'
const ARROW_DOWN = 'ArrowDown'

// ç½‘æ ¼ä¸­çš„å…ƒç´ ç±»å‹
const CELL_TYPE_SPACE = 0 // 0 è¡¨ç¤ºç©º
const CELL_TYPE_SNAKE = 1 // 1 è¡¨ç¤ºè›‡
const CELL_TYPE_FOOD = 2 // 2 è¡¨ç¤ºé£Ÿç‰©

// å•å…ƒæ ¼é¢œè‰²
const CELL_COLOR_SNAKE_HEAD = 'red'
const CELL_COLOR_SNAKE_BODY = 'pink'
const CELL_COLOR_FOOD = 'orange'
```

**ç”»å¸ƒåˆå§‹åŒ–**

```javascript
const canvasBoard = document.createElement('canvas')
canvasBoard.width = 400
canvasBoard.height = 400
document.body.append(canvasBoard)
const ctxBoard = canvasBoard.getContext('2d')

const canvasGame = document.createElement('canvas')
canvasGame.width = 400
canvasGame.height = 400
document.body.append(canvasGame)
const ctxGame = canvasGame.getContext('2d')
```

**ç½‘æ ¼æ•°æ®åˆå§‹åŒ–**

```javascript
const gridSize = 20
const gridState = {}
function initializeGrid() {
  for (let row = 0; row < canvasBoard.width / gridSize; row++) {
    for (let col = 0; col < canvasBoard.height / gridSize; col++) {
      gridState[`${row * gridSize}-${col * gridSize}`] = CELL_TYPE_SPACE
    }
  }
}
initializeGrid()
```

**ç»˜åˆ¶ç½‘æ ¼æ£‹ç›˜**

```javascript
// è¿™ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ç†è§£ä¸ºå‡†å¤‡æ¸¸æˆåœ°å›¾ã€‚
function drawGrid() {
  ctxBoard.save()
  ctxBoard.strokeStyle = '#ccc'
  for (let line = 0; line < canvasBoard.width / gridSize; line++) {
    ctxBoard.beginPath()
    ctxBoard.moveTo(gridSize * line, 0)
    ctxBoard.lineTo(gridSize * line, canvasBoard.height)
    ctxBoard.stroke()

    ctxBoard.beginPath()
    ctxBoard.moveTo(0, gridSize * line)
    ctxBoard.lineTo(canvasBoard.width, gridSize * line)
    ctxBoard.stroke()
  }
  ctxBoard.restore()
}
drawGrid()
```

**è›‡å’Œé£Ÿç‰©çš„åŸºç±»**

```javascript
class Square {
  constructor(x, y, cell_type, cell_color) {
    this.x = x
    this.y = y
    this.previousX = x
    this.previousY = y
    this.cell_color = cell_color
    this.cell_type = cell_type
  }

  static width = gridSize
  static height = gridSize

  draw() {
    gridState[`${this.previousX}-${this.previousY}`] = CELL_TYPE_SPACE
    gridState[`${this.x}-${this.y}`] = this.cell_type

    ctxGame.clearRect(
      this.previousX,
      this.previousY,
      Square.width,
      Square.height
    )
    this.previousX = this.x
    this.previousY = this.y
    ctxGame.save()
    ctxGame.beginPath()
    ctxGame.fillStyle = this.cell_color
    ctxGame.fillRect(this.x, this.y, Square.width, Square.height)
    ctxGame.restore()
  }
}
```

**è´ªåƒè›‡**

```javascript
class Snake {
  // æ„é€ å‡½æ•°åˆå§‹åŒ–è›‡çš„ä½ç½®ã€æ–¹å‘ã€å¤´éƒ¨å’Œèº«ä½“
  constructor(x, y, direction = 'ArrowRight') {
    this.x = x * gridSize // æ¨ªåæ ‡åˆå§‹åŒ–ï¼Œæ ¹æ®ç½‘æ ¼å¤§å°è°ƒæ•´
    this.y = y * gridSize // çºµåæ ‡åˆå§‹åŒ–ï¼Œæ ¹æ®ç½‘æ ¼å¤§å°è°ƒæ•´
    this.direction = direction // åˆå§‹æ–¹å‘
    this.head = new Square(this.x, this.y, CELL_TYPE_SNAKE, CELL_COLOR_SNAKE_HEAD) // åˆ›å»ºè›‡å¤´éƒ¨çš„å®ä¾‹
    this.body = [] // è›‡çš„èº«ä½“éƒ¨åˆ†æ•°ç»„
    this.score = 0 // åˆå§‹åŒ–å¾—åˆ†
  }

  // ç»˜åˆ¶è›‡çš„å¤´éƒ¨å’Œèº«ä½“
  draw() {
    this.head.draw() // ç»˜åˆ¶è›‡å¤´
    this.body.forEach((segment) => segment.draw()) // ç»˜åˆ¶è›‡èº«ä½“çš„æ¯ä¸€ä¸ªéƒ¨åˆ†
  }

  // æ§åˆ¶è›‡çš„ç§»åŠ¨é€»è¾‘
  move() {
    // æ ¹æ®è›‡çš„å½“å‰æ–¹å‘æ›´æ–°è›‡å¤´çš„ä½ç½®
    switch (this.direction) {
      case ARROW_RIGHT:
        this.head.x += gridSize
        break
      case ARROW_DOWN:
        this.head.y += gridSize
        break
      case ARROW_LEFT:
        this.head.x -= gridSize
        break
      case ARROW_UP:
        this.head.y -= gridSize
        break
    }

    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸï¼ˆå‡ºç•Œæˆ–æ’åˆ°è‡ªå·±ï¼‰
    if (this.isOutOfBounds() || this.isCollidingWithSelf()) {
      console.log('æ¸¸æˆç»“æŸï¼æœ€ç»ˆå¾—åˆ†ï¼š' + this.score) // å¼¹å‡ºæ¸¸æˆç»“æŸä¿¡æ¯
      return
    }

    // æ£€æŸ¥è›‡æ˜¯å¦åƒåˆ°é£Ÿç‰©
    if (this.isEatingFood()) {
      this.score += 10 // å¢åŠ åˆ†æ•°
      const newSegment = new Square(
        this.head.previousX,
        this.head.previousY,
        CELL_TYPE_SNAKE,
        CELL_COLOR_SNAKE_BODY
      ) // åˆ›å»ºæ–°çš„èº«ä½“éƒ¨åˆ†
      this.body.unshift(newSegment) // å°†æ–°éƒ¨åˆ†æ·»åŠ åˆ°è›‡èº«ä½“çš„å‰ç«¯
      generateFood() // é‡æ–°ç”Ÿæˆé£Ÿç‰©
    } else {
      this.moveBody() // ç§»åŠ¨èº«ä½“
    }

    this.draw() // é‡ç»˜è›‡çš„æ–°çŠ¶æ€

    setTimeout(() => {
      this.move() // å»¶è¿Ÿè°ƒç”¨moveæ–¹æ³•ï¼Œä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœ
    }, 200 - this.score / 2) // ç§»åŠ¨é€Ÿåº¦éšåˆ†æ•°å¢åŠ è€Œå¢å¿«
  }

  // æ£€æŸ¥è›‡æ˜¯å¦å‡ºç•Œ
  isOutOfBounds() {
    return (
      this.head.x < 0 ||
      this.head.y < 0 ||
      this.head.x >= canvasGame.width ||
      this.head.y >= canvasGame.height
    )
  }

  // æ£€æŸ¥è›‡æ˜¯å¦æ’åˆ°äº†è‡ªå·±
  isCollidingWithSelf() {
    return gridState[`${this.head.x}-${this.head.y}`] === CELL_TYPE_SNAKE
  }

  // æ£€æŸ¥è›‡æ˜¯å¦åƒåˆ°äº†é£Ÿç‰©
  isEatingFood() {
    return this.head.x === currentFood.x && this.head.y === currentFood.y
  }

  // ç§»åŠ¨è›‡èº«ä½“çš„é€»è¾‘
  // æŠŠå°¾å·´åˆ‡æ‰ä¸€ä¸ªæ ¼å­
  // ç„¶ååœ¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ ¼å­
  moveBody() {
    if (this.body.length > 0) {
      const tailSegment = this.body.pop() // ç§»é™¤å°¾éƒ¨
      tailSegment.x = this.head.previousX // æ›´æ–°å°¾éƒ¨ä½ç½®åˆ°ä¹‹å‰å¤´éƒ¨çš„ä½ç½®
      tailSegment.y = this.head.previousY
      this.body.unshift(tailSegment) // å°†å°¾éƒ¨æ·»åŠ åˆ°å¤´éƒ¨ä½ç½®ï¼Œå®ç°èº«ä½“çš„â€œç§»åŠ¨â€
    }
  }
}
```




# [README.md](./0052.%20canvas%20åœ¨çº¿å­¦ä¹ %20-%20æ˜é‡‘/README.md)<!-- !======> SEPERATOR <====== -->
# [0052. canvas åœ¨çº¿å­¦ä¹  - æ˜é‡‘](https://github.com/Tdahuyou/canvas/tree/main/0052.%20canvas%20%E5%9C%A8%E7%BA%BF%E5%AD%A6%E4%B9%A0%20-%20%E6%8E%98%E9%87%91)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

è®°å½•äº†æ˜é‡‘ä¸Š canvas ç›¸å…³çš„é“¾æ¥ã€‚

## 2. ğŸ”— links

- https://juejin.cn/post/7116784455561248775
  - Canvas ä»å…¥é—¨åˆ°åŠæœ‹å‹æ”¾å¼ƒï¼ˆå›¾è§£ç‰ˆï¼‰ã€‚

# [README.md](./0053.%20canvas%20åœ¨çº¿å­¦ä¹ %20-%20html5canvas%20tutorials/README.md)<!-- !======> SEPERATOR <====== -->
# [0053. canvas åœ¨çº¿å­¦ä¹  - html5canvas tutorials](https://github.com/Tdahuyou/canvas/tree/main/0053.%20canvas%20%E5%9C%A8%E7%BA%BF%E5%AD%A6%E4%B9%A0%20-%20html5canvas%20tutorials)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
<!-- endregion:toc -->


## 1. ğŸ“ Summary

è®°å½•äº†ä¸€ä¸ª canvas åœ¨çº¿å­¦ä¹ ç«™ç‚¹ - html5canvas tutorialsã€‚

> [!NOTE]
> ![](md-imgs/2024-10-20-08-21-11.png)
> ç›®å‰ï¼ˆ24.10.20ï¼‰ç«™ç‚¹çªç„¶è®¿é—®ä¸äº†äº†ï¼Œæç¤ºåè®®ä¸å—æ”¯æŒã€‚

## 2. ğŸ”— links

- https://www.html5canvastutorials.com/
  - html5canvas tutorialsã€‚


# [README.md](./0054.%20canvas%20åœ¨çº¿å­¦ä¹ %20-%20MDN%20Canvas%20tutorial/README.md)<!-- !======> SEPERATOR <====== -->
# [0054. canvas åœ¨çº¿å­¦ä¹  - MDN Canvas tutorial](https://github.com/Tdahuyou/canvas/tree/main/0054.%20canvas%20%E5%9C%A8%E7%BA%BF%E5%AD%A6%E4%B9%A0%20-%20MDN%20Canvas%20tutorial)


<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

è®°å½•äº† MDN ä¸Š canvas ç›¸å…³çš„é“¾æ¥ã€‚

## 2. ğŸ”— links

- https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial
  - MDN Canvas tutorial



# [README.md](./0055.%20canvas%20åœ¨çº¿å­¦ä¹ %20-%20HTML%20Canvas%20Deep%20Dive/README.md)<!-- !======> SEPERATOR <====== -->
# [0055. canvas åœ¨çº¿å­¦ä¹  - HTML Canvas Deep Dive](https://github.com/Tdahuyou/canvas/tree/main/0055.%20canvas%20%E5%9C%A8%E7%BA%BF%E5%AD%A6%E4%B9%A0%20-%20HTML%20Canvas%20Deep%20Dive)

<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

è®°å½•äº†ä¸€ä¸ª canvas çš„åœ¨çº¿å­¦ä¹ ç«™ç‚¹ - HTML Canvas Deep Diveã€‚

## 2. ğŸ”— links

- https://joshondesign.com/p/books/canvasdeepdive/title.html
  - HTML Canvas Deep Dive
  - ä»‹ç»äº† Canvas API å’Œ WebGLã€‚

# [README.md](./0056.%20canvas%20åœ¨çº¿å­¦ä¹ %20-%20èœé¸Ÿæ•™ç¨‹/README.md)<!-- !======> SEPERATOR <====== -->
# [0056. canvas åœ¨çº¿å­¦ä¹  - èœé¸Ÿæ•™ç¨‹](https://github.com/Tdahuyou/canvas/tree/main/0056.%20canvas%20%E5%9C%A8%E7%BA%BF%E5%AD%A6%E4%B9%A0%20-%20%E8%8F%9C%E9%B8%9F%E6%95%99%E7%A8%8B)


<!-- region:toc -->
- [1. ğŸ“ Summary](#1--summary)
- [2. ğŸ”— links](#2--links)
<!-- endregion:toc -->

## 1. ğŸ“ Summary

è®°å½•äº†èœé¸Ÿæ•™ç¨‹ä¸Š canvas ç›¸å…³çš„é“¾æ¥ã€‚

## 2. ğŸ”— links

- https://www.runoob.com/html/html5-canvas.html
  - HTML5 Canvasã€‚
- https://www.runoob.com/tags/ref-canvas.html
  - HTML5 `<canvas>` å‚è€ƒæ‰‹å†Œã€‚
- https://www.runoob.com/w3cnote/html5-canvas-intro.html
   - ç»“å°¾æœ‰ä¿©æ¡ˆä¾‹ï¼Œä¸€ä¸ªæ˜¯â€œå¤ªé˜³ç³»â€ï¼Œä¸€ä¸ªæ˜¯â€œæ—¶é’Ÿâ€æ•ˆæœã€‚
